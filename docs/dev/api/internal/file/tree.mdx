---
title: 获取文件树
description: /file/tree、/file/tree/:type
---
import APITable from '@site/src/components/APITable';
import { GET } from '@site/src/components/RequestTag';

## 常规

<GET>/file/tree</GET>

### 请求

<APITable>

| 名称 | 类型 | 必填 | 描述 |
| :-: | :-: | :-: | --- |
| `onlyDir` | `string<'true' \| 'false'>` | 否 | 仅返回目录数据即过滤掉文件，默认为 `false` |
| `search` | `string` | 否 | 文件与目录名称关键字过滤，用于搜索 |
| `startTime` | `string` | 否 | 文件与目录名称的开始日期时间过滤（目前仅应用于运行日志），格式固定为 `yyyy-MM-dd HH:mm` |
| `endTime` | `string` | 否 | 文件与目录名称的结束日期时间过滤（目前仅应用于运行日志），格式固定为 `yyyy-MM-dd HH:mm` |

</APITable>

### 响应

<APITable>

| 名称 | 类型 | 描述 |
| :-: | :-: | --- |
| `path` | `string` | 绝对路径 |
| `title` | `string` | 目录名称 |
| `name` | `string` | 文件名称 |
| `type` | `string<'folder' \| 'file'>` | 文件类型  |
| `updated_at` | `string` | 最后修改时间 |
| `created_at` | `string` | 创建时间 |
| `children` | `object[]` | 成员，即下级内容 |

</APITable>

:::tip 含有 `children` 属性的对象为目录，应使用 `title` 字段获取目录名称
:::

```json title="示例"
[
  {
    "path": "/arcadia",
    "title": "arcadia",
    "type": "folder",
    "updated_at": "2024-01-01 00:00:00",
    "created_at": "2024-01-01 00:00:00",
    "children": [
      {
        "path": "/arcadia/script",
        "title": "script",
        "type": "folder",
        "updated_at": "2024-01-01 00:00:00",
        "created_at": "2024-01-01 00:00:00",
        "children": [
          {
            "path": "/arcadia/script/example.js",
            "name": "example.js",
            "type": "file",
            "updated_at": "2024-01-01 00:00:00",
            "created_at": "2024-01-01 00:00:00"
          },
          {
            "path": "/arcadia/script/template.sh",
            "name": "template.sh",
            "type": "file",
            "updated_at": "2024-01-01 00:00:00",
            "created_at": "2024-01-01 00:00:00"
          },
          ...
        ]
      },
      ...
    ]
  }
]
```

:::info 不包含 `log` 目录和一些不适合展示的文件目录
:::

## 获取指定类型的文件树

<GET>/file/tree/:type</GET>

### 请求

<APITable>

| 名称 | 类型 | 必填 | 描述 |
| :-: | :-: | :-: | --- |
| `type` | `string<FileTreeType>` | 否 | 获取类型，具体详见 [**FileTreeType**](#FileTreeType)，默认为 `all` 全部 |
| `onlyDir` | `string<'true' \| 'false'>` | 否 | 仅返回目录数据即过滤掉文件，默认为 `false` |
| `search` | `string` | 否 | 文件与目录名称关键字过滤，用于搜索 |
| `startTime` | `string` | 否 | 文件与目录名称开始日期时间过滤（目前仅应用于运行日志），格式固定为 `yyyy-MM-dd HH:mm` |
| `endTime` | `string` | 否 | 文件与目录名称结束日期时间过滤（目前仅应用于运行日志），格式固定为 `yyyy-MM-dd HH:mm` |

</APITable>

#### FileTreeType

<APITable>

| 名称 | 含义 |
| :-: | :-: |
| `all` | 全部 |
| `arcadia` | `/arcadia` |
| `src` | `/arcadia/src` |
| `config` | `/arcadia/config` |
| `sample` | `/arcadia/src/sample` |
| `scripts` | `/arcadia/scripts` |
| `shell` | `/arcadia/src/shell` |
| `log` | `/arcadia/log` |
| `repo` | `/arcadia/repo` |
| `raw` | `/arcadia/raw` |
| `config_bak` | `/arcadia/config/bak` |

</APITable>

类型 `arcadia` 等价于 `all`，且均不包含 `log` 目录和一些不适合展示的文件目录  
使用 `arcadia` 或 `all` 时与 [常规](#常规) 接口响应相同，即获取完整文件树

### 响应

参考上方[接口响应](#常规)
