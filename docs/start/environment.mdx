---
title: 运行环境
---
import { Icon } from '@site/src/components/Icon';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import Link from '@docusaurus/Link'

本部分文档用于指导代码文件运行环境配置，如果你对相关技术不是很熟悉那么请认真阅读以下内容

## 安装语言环境

<Tabs>
  <TabItem value="js&ts" label={(
    <>
      <Icon size={18} style={{ verticalAlign: '-0.1rem' }}>skill-icons:javascript</Icon>
      &nbsp;
      JavaScript
      &nbsp;
      /
      &nbsp;
      <Icon size={18} style={{ verticalAlign: '-0.1rem' }}>skill-icons:typescript</Icon>
      &nbsp;
      TypeScript
    </>
  )} default>

    <Tabs>
      <TabItem value="nodejs" label={(
        <>
          <Icon size={22} style={{ verticalAlign: 'baseline' }}>logos:nodejs</Icon>
        </>
      )} default>

      ```bash
      NODE_VERSION=22 # 指定安装版本（可自行修改）
      apt-get update && apt-get install -y ca-certificates curl gnupg
      curl -fsSL https://deb.nodesource.com/gpgkey/nodesource-repo.gpg.key | gpg --dearmor -o /etc/apt/keyrings/nodesource.gpg
      echo "deb [signed-by=/etc/apt/keyrings/nodesource.gpg] https://deb.nodesource.com/node_${NODE_VERSION}.x nodistro main" | tee /etc/apt/sources.list.d/nodesource.list
      apt-get update && apt-get install nodejs -y
      ```
      :::warning
      已预装，底层功能依赖请勿卸载，否则会导致项目无法正常运行
      :::
      Node.js 是项目当前运行 `.js` `.mjs` `.cjs` 代码文件的默认引擎，默认安装的是 LTS 版本，需要安装指定版本时可借鉴该命令

      <Link className="button button--secondary" href="https://nodejs.org">Node.js 官网</Link>

      </TabItem>

      <TabItem value="ts-nopde" label={(
        <>
          <Icon size={20} style={{ verticalAlign: 'baseline' }}>logos:tsnode</Icon>
        </>
      )}>

      ```bash
      npm install -g typescript ts-node
      ```
      ts-node 是项目当前运行 `.ts` 代码文件的默认引擎，也可以使用 Deno 或 Bun 代替。另外如果注重运行速度建议使用 Bun，因为 ts-node 的性能较差且占用较高。

      <Link className="button button--secondary" href="https://typestrong.org/ts-node">ts-node 官网</Link>

      </TabItem>

      <TabItem value="deno" label={(
        <>
          <Icon size={24} style={{ verticalAlign: '0.2rem' }}>vscode-icons:file-type-deno</Icon>
          &nbsp;
          Deno
        </>
      )}>

      [Deno](https://deno.com) 是一个现代的 JavaScript 和 TypeScript 运行时环境，可以替代默认的 Node.js 和 ts-node，特点是安全性高、运行速度快。默认采用沙盒机制，禁止脚本程序访问文件系统、网络和环境变量等敏感操作，除非显式授予权限。

      :::warning
      Deno 不完全兼容 Node.js API，一般无法直接运行 Node.js 项目。  
      由于沙盒下的默认权限不能满足项目基本需求，因此使用 Deno 时会默认赋予一些权限，具体如下：
      - ##### 环境变量：允许全部
      - ##### 文件系统：仅允许读/写代码文件所在目录和其下级目录。
      - ##### 网络访问：允许联网，但禁止访问本机
      :::

      ```bash
      # 建议分步执行以下命令
      apt-get update && apt-get install -y unzip
      curl -fsSL https://deno.land/install.sh | sh # 失败时请自行解决网络环境等问题
      bash
      ln -sf $(which deno) /usr/local/bin/deno
      ```
      > 建议采用官方默认提供的安装方法，另外如果你通过其它方法安装那么需要在处理 `PATH` 时设置 `/usr/local/bin` 的软链接（参考最后一行示例命令）

      <Link className="button button--secondary" href="https://deno.com">Deno 官网</Link>

      </TabItem>

      <TabItem value="bun" label={(
        <>
          <Icon size={24} style={{ verticalAlign: '0.2rem' }}>vscode-icons:file-type-bun</Icon>
          &nbsp;
          Bun
        </>
      )}>

      [Bun](https://bun.sh) 是一个现代的 JavaScript 和 TypeScript 运行时环境，可以替代默认的 Node.js 和 ts-node，特点是速度快、与 Node.js 的API兼容性高。

      ```bash
      # 建议分步执行以下命令
      apt-get update && apt-get install -y unzip
      curl -fsSL https://bun.sh/install | bash # 失败时请自行解决网络环境等问题
      bash
      ln -sf $(which bun) /usr/local/bin/bun
      ```
      > 建议采用官方默认提供的安装方法，另外如果你通过其它方法安装那么需要在处理 `PATH` 时设置 `/usr/local/bin` 的软链接（参考最后一行示例命令）

      <Link className="button button--secondary" href="https://bun.sh">Bun 官网</Link>

      </TabItem>
    </Tabs>

  </TabItem>

  <TabItem value="python" label={(
    <>
      <Icon size={18} style={{ verticalAlign: '-0.1rem' }}>logos:python</Icon>
      &nbsp;
      Python
    </>
  )}>

  ```bash
  apt-get update && apt-get install -y python3 python3-pip
  ```
  :::warning
  已预装，底层功能依赖请勿卸载，否则会导致项目无法正常运行
  :::

  若想安装指定版本请自行搜索相关教程，重装后需要执行 `pip3 install yq --no-cache-dir --break-system-packages` 安装 `yq` 依赖库（底层功能需要）

  <Link className="button button--secondary" href="https://www.python.org">Python 官网</Link>

  </TabItem>

  <TabItem value="go" label={(
    <>
      <Icon size={14} style={{ verticalAlign: '-0.3rem' }}>logos:go</Icon>
      &nbsp;
      Go
    </>
  )}>

  ```bash
  apt-get update && apt-get install -y go
  ```

  <Link className="button button--secondary" href="https://golang.org">Go 官网</Link>

  </TabItem>

  <TabItem value="lua" label={(
    <>
    <Icon size={18} style={{ verticalAlign: '-0.1rem' }}>logos:lua</Icon>
    &nbsp;
    Lua
    </>
  )}>

  ```bash
  apt-get update && apt-get install -y lua5.4 luarocks
  ```

  <Link className="button button--secondary" href="https://www.lua.org">Lua 官网</Link>

  </TabItem>

  <TabItem value="ruby" label={(
    <>
      <Icon size={16} style={{ verticalAlign: '-0.15rem' }}>logos:ruby</Icon>
      &nbsp;
      Ruby
    </>
  )}>

  ```bash
  apt-get update && apt-get install -y ruby
  ```

  <Link className="button button--secondary" href="https://www.ruby-lang.org">Ruby 官网</Link>

  </TabItem>

  <TabItem value="rust" label={(
    <>
      <Icon size={16} style={{ verticalAlign: '-0.15rem' }}>logos:rust</Icon>
      &nbsp;
      Rust
    </>
  )}>

  ```bash
  # 建议分步执行以下命令
  curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh # 失败时请自行解决网络环境等问题
  bash
  ln -sf $(which rustc) /usr/local/bin/rustc
  ln -sf $(which cargo) /usr/local/bin/cargo
  cargo install cargo-script # 失败时请自行解决网络环境等问题
  ```
  > 建议采用官方默认提供的安装方法，因为通过 `apt` 包管理工具安装的版本较低，另外如果你通过其它方法安装那么需要在处理 `PATH` 时设置 `/usr/local/bin` 的软链接

  <Link className="button button--secondary" href="https://www.rust-lang.org">Rust 官网</Link>

  </TabItem>

  <TabItem value="perl" label={(
    <>
      <Icon size={18} style={{ verticalAlign: '-0.1rem' }}>vscode-icons:file-type-perl</Icon>
      &nbsp;
      Perl
    </>
  )}>

  ```bash
  apt-get update && apt-get install -y perl
  ```
  :::warning
  已预装，底层功能依赖请勿卸载，否则会导致项目无法正常运行
  :::

  <Link className="button button--secondary" href="https://www.perl.org">Perl 官网</Link>

  </TabItem>

  <TabItem value="c" label={(
    <>
      <Icon size={18} style={{ verticalAlign: '-0.1rem' }}>vscode-icons:file-type-c</Icon>
      &nbsp;
      C
    </>
  )}>

  ```bash
  apt-get update && apt-get install -y gcc
  ```
  :::warning
  已预装，底层功能依赖请勿卸载，否则会导致项目无法正常运行
  :::

  </TabItem>
</Tabs>


## 解决依赖

<Tabs>
  <TabItem value="js&ts" label={(
    <>
      <Icon size={18} style={{ verticalAlign: '-0.1rem' }}>skill-icons:javascript</Icon>
      &nbsp;
      JavaScript
      &nbsp;
      /
      &nbsp;
      <Icon size={18} style={{ verticalAlign: '-0.1rem' }}>skill-icons:typescript</Icon>
      &nbsp;
      TypeScript
    </>
  )} default>

  适用文件类型 `.js` `.mjs` `.cjs` 和 `.ts`

  ```bash
  npm install -g <xxx>
  ```
  :::tip
  当运行报错提示 `need module xxx` 类似字样说明缺少代码运行所需的依赖，对应 `xxx` 的位置就是缺失的依赖名称  
  如果依赖名称中开头为 `/` 则表示本地模块文件，否则一般为 <Icon size="18">logos\:npm-icon</Icon> [NPM](https://www.npmjs.com) 上的第三方库
  :::

  默认命令 `npm install <xxx>` 安装的依赖库是相对位置的，可以解决代码使用不同版本依赖库的问题  
  使用 `-g` 命令选项代表全局安装即不需要解决目录关系，因为一般来说这样安装更省事

  当然，你也可以使用 `pnpm` 或 `yarn` 等包管理工具，使用 `Bun` 时建议使用官方的 `bun install` 命令

  </TabItem>

  <TabItem value="py" label={(
    <>
      <Icon size={18} style={{ verticalAlign: '-0.1rem' }}>logos:python</Icon>
      &nbsp;
      Python
    </>
  )}>

  适用文件类型 `.py`

  ```bash
  pip3 install <xxx> --no-cache-dir --break-system-packages
  ```

  </TabItem>

  <TabItem value="go" label={(
    <>
      <Icon size={14} style={{ verticalAlign: '-0.3rem' }}>logos:go</Icon>
      &nbsp;
      Go
    </>
  )}>

  适用文件类型 `.go`

  ```bash
  go get -u xxx
  ```

  </TabItem>

  <TabItem value="lua" label={(
    <>
    <Icon size={18} style={{ verticalAlign: '-0.1rem' }}>logos:lua</Icon>
    &nbsp;
    Lua
    </>
  )}>

  适用文件类型 `.lua`

  ```bash
  luarocks install <xxx>
  ```

  </TabItem>

  <TabItem value="rb" label={(
    <>
      <Icon size={16} style={{ verticalAlign: '-0.15rem' }}>logos:ruby</Icon>
      &nbsp;
      Ruby
    </>
  )}>

  适用文件类型 `.rb`

  ```bash
  gem install <xxx>
  ```

  </TabItem>

  <TabItem value="rs" label={(
    <>
      <Icon size={16} style={{ verticalAlign: '-0.15rem' }}>logos:rust</Icon>
      &nbsp;
      Rust
    </>
  )}>

  适用文件类型 `.rs`

  1. 在 `Cargo.toml` 文件中添加依赖：

  ```toml
  [dependencies]
  <xxx> = "<version>"
  ```

  2. 运行以下命令安装依赖：

  ```bash
  cargo build
  ```

  或者仅安装依赖而不构建项目：

  ```bash
  cargo check
  ```

  </TabItem>

  <TabItem value="pl" label={(
    <>
      <Icon size={18} style={{ verticalAlign: '-0.15rem' }}>vscode-icons:file-type-perl</Icon>
      &nbsp;
      Perl
    </>
  )}>

  适用文件类型 `.pl` `.pm`，建议使用 `cpanm`，安装命令 `cpan App::cpanminus`

  ```bash
  cpanm <xxx>
  ```

  </TabItem>
</Tabs>
