import{az as q,aq as E,T as d,a5 as u,G as Ue,r as Be,ag as ce,J as Ne,A as fe,h as Me,cc as Se,S as y,W as t,F as e,bv as qe,at as de,V as l,bw as Ve,bx as je,b0 as Oe,aQ as Ie,ar as $,ba as Pe,bb as Ge,aN as m,as as i,bi as He,cd as Xe,aG as pe,a7 as Je,ce as Qe,ab as A,ak as We,cf as Ye,av as Ze,aL as Ke,ax as et,aZ as tt,aY as lt,a9 as me,aw as ot,cg as nt,a3 as _e,a4 as ge,b9 as at,bt as st,b6 as rt,bu as it}from"./vendor-ca0e89fa.js";import{_ as ut,e as ct,c as ft}from"./app-3114b03b.js";import{a as dt,_ as pt}from"./app-16c35b8c.js";import{_ as mt,a as _t}from"./app-78ff20ac.js";import{v as ye}from"./app-766af676.js";import{e as gt,b as yt,c as vt}from"./app-2733701f.js";import{S as bt}from"./app-62c35e01.js";import{u as ve}from"./app-67d12428.js";import{u as ht}from"./app-40fcbbd5.js";import{d as kt,b as wt,j as xt,e as Ct}from"./app-dbd4b5f0.js";import{a as Tt,F as zt}from"./app-f44d7ba5.js";import"./app-80666950.js";import"./app-240cd649.js";import"./app-a04700e8.js";import"./app-52337bf4.js";import"./app-a38d7e6b.js";import"./vendor-6c6d1442.js";const Ft={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"};function Rt(U,h){return d(),E("svg",Ft,h[0]||(h[0]=[u("path",{fill:"currentColor",d:"M15.9 18.45c1.35 0 2.45-1.1 2.45-2.45s-1.1-2.45-2.45-2.45c-1.36 0-2.45 1.1-2.45 2.45s1.09 2.45 2.45 2.45m5.2-1.77l1.48 1.16c.13.11.17.29.08.45l-1.4 2.42a.35.35 0 0 1-.43.15l-1.74-.7c-.36.28-.76.51-1.18.69l-.27 1.85c-.02.17-.17.3-.34.3h-2.8c-.18 0-.32-.13-.35-.3l-.26-1.85c-.43-.18-.82-.41-1.18-.69l-1.75.7c-.15.06-.34 0-.42-.15l-1.4-2.42a.35.35 0 0 1 .08-.45l1.48-1.16l-.05-.68l.05-.69l-1.48-1.15a.35.35 0 0 1-.08-.45l1.4-2.42c.08-.16.27-.22.42-.16l1.75.71c.36-.28.75-.52 1.18-.69l.26-1.86c.03-.16.17-.29.35-.29h2.8c.17 0 .32.13.34.29l.27 1.86c.42.17.82.41 1.18.69l1.74-.71c.17-.06.34 0 .43.16l1.4 2.42c.09.15.05.34-.08.45l-1.48 1.15l.05.69zM6.69 8.07c.87 0 1.57-.7 1.57-1.57s-.7-1.58-1.57-1.58A1.58 1.58 0 0 0 5.11 6.5c0 .87.71 1.57 1.58 1.57m3.34-1.13l.97.74c.07.07.09.19.03.29l-.9 1.56c-.05.1-.17.14-.27.1l-1.12-.45l-.74.44l-.19 1.19c-.02.11-.11.19-.22.19h-1.8c-.12 0-.21-.08-.23-.19L5.4 9.62l-.76-.44l-1.14.45c-.09.04-.2 0-.26-.1l-.9-1.56c-.06-.1-.03-.22.05-.29l.95-.74l-.03-.44l.03-.44l-.95-.74a.23.23 0 0 1-.05-.29l.9-1.56c.06-.1.17-.14.26-.1l1.13.45l.77-.44l.16-1.19c.02-.11.11-.19.23-.19h1.8c.11 0 .2.08.22.19L8 3.38l.74.44l1.12-.45c.1-.04.22 0 .27.1l.9 1.56c.06.1.04.22-.03.29l-.97.74l.03.44z"},null,-1)]))}const $t=q({name:"mdi-cogs",render:Rt}),Et={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"};function Dt(U,h){return d(),E("svg",Et,h[0]||(h[0]=[u("path",{fill:"currentColor",d:"m12 12.708l-5.246 5.246q-.14.14-.344.15t-.364-.15t-.16-.354t.16-.354L11.292 12L6.046 6.754q-.14-.14-.15-.344t.15-.364t.354-.16t.354.16L12 11.292l5.246-5.246q.14-.14.345-.15q.203-.01.363.15t.16.354t-.16.354L12.708 12l5.246 5.246q.14.14.15.345q.01.203-.15.363t-.354.16t-.354-.16z"},null,-1)]))}const Lt=q({name:"material-symbols-light-close-rounded",render:Dt}),At={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"};function Ut(U,h){return d(),E("svg",At,h[0]||(h[0]=[u("path",{fill:"currentColor",d:"M14 12h1.5v2.82l2.44 1.41l-.75 1.3L14 15.69zM4 2h14a2 2 0 0 1 2 2v6.1c1.24 1.26 2 2.99 2 4.9a7 7 0 0 1-7 7c-1.91 0-3.64-.76-4.9-2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2m0 13v3h4.67c-.43-.91-.67-1.93-.67-3zm0-7h6V5H4zm14 0V5h-6v3zM4 13h4.29c.34-1.15.97-2.18 1.81-3H4zm11-2.85A4.85 4.85 0 0 0 10.15 15c0 2.68 2.17 4.85 4.85 4.85A4.85 4.85 0 0 0 19.85 15c0-2.68-2.17-4.85-4.85-4.85"},null,-1)]))}const Bt=q({name:"mdi-timetable",render:Ut}),Nt={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"};function Mt(U,h){return d(),E("svg",Nt,h[0]||(h[0]=[u("path",{fill:"currentColor",d:"M13 2.03v2.02c4.39.54 7.5 4.53 6.96 8.92c-.46 3.64-3.32 6.53-6.96 6.96v2c5.5-.55 9.5-5.43 8.95-10.93c-.45-4.75-4.22-8.5-8.95-8.97m-2 .03c-1.95.19-3.81.94-5.33 2.2L7.1 5.74c1.12-.9 2.47-1.48 3.9-1.68zM4.26 5.67A9.9 9.9 0 0 0 2.05 11h2c.19-1.42.75-2.77 1.64-3.9zM2.06 13c.2 1.96.97 3.81 2.21 5.33l1.42-1.43A8 8 0 0 1 4.06 13zm5.04 5.37l-1.43 1.37A10 10 0 0 0 11 22v-2a8 8 0 0 1-3.9-1.63M12.5 7v5.25l4.5 2.67l-.75 1.23L11 13V7z"},null,-1)]))}const St=q({name:"mdi-progress-clock",render:Mt}),qt={style:{padding:"0 2px"}},Vt={class:"inline-container"},jt={class:"left-content",style:{width:"100%"}},Ot={class:"right-content"},It=Ue({__name:"editTask",emits:["ok"],setup(U,{expose:h,emit:be}){const he=be,{getIsMobile:G}=ht(),{message:V}=kt(),{t:n}=wt(),H={id:null,name:"",cron:"",shell:"",remark:"",active:1,type:"user",config:{before_task_shell:"",after_task_shell:"",log_directory:"",source_file:"",allow_concurrency:!1}},X=["before_task_shell","after_task_shell","log_directory","source_file","allow_concurrency"],f=Be({show:!1,showAdvancedConfig:!1,model:ce(H),formRef:null,sourceFileName:"",isTreeLoading:!1,directoryTreeData:[]}),{show:x,showAdvancedConfig:k,model:a,formRef:j,sourceFileName:D,isTreeLoading:B,directoryTreeData:N}=Ne(f),J=fe(),Q=fe(),W={active:{required:!0},name:{required:!0,message:n("page.cron.editTask.form.message.noName"),trigger:["input","blur"]},cron:{required:!0,validator(r,o){if(o){if(!ye(o))return new Error(n("page.cron.editTask.form.message.invalidCron"))}else return new Error(n("page.cron.editTask.form.message.noCron"));return!0},trigger:["input","blur"]},shell:{required:!0,message:n("page.cron.editTask.form.message.noShell"),trigger:["input","blur"]}};async function T(r){switch(r){case"genRandomCron":const o=Math.floor(Math.random()*24);let p=0;do p=Math.floor(Math.random()*60);while([0,1,2,3,30].includes(p));const _=`${p} ${o} * * *`;f.model.cron=_;break;case"openCronVisualization":J.value?.open({cron:f.model.cron,showSecond:f.model.cron.split(" ").length===6});break;case"showAdvancedConfig":k.value=!0,N.value=await Y();break;case"clearSelectCodeFile":f.model.config.source_file="",D.value="";break}}const F={onkeydown(r){if(r.key==="Enter")return V.warning(n("page.cron.editTask.form.message.no_enter")),!1}},b=Me(()=>{try{if(!ye(f.model.cron))return[];const r=[],o=Se.CronExpressionParser.parse(f.model.cron);for(let p=0;p<5;p++)r.push(xt(o.next().toDate()));return r}catch{return[]}});function O(){return new Promise(r=>{j.value?.validate(async o=>{if(!o)try{const{type:p,id:_,name:C,cron:L,shell:w,remark:v,active:c}=f.model;let z=!1;for(const M of X)f.model.config[M]&&(z=!0);let R="";z&&(R=JSON.stringify(f.model.config)),_?(await ct([{type:p,id:_,name:C,cron:L,shell:w,remark:v,active:c,config:R}]),V.success(n("page.cron.table.message.edit.ok"))):(await ft({type:p,name:C,cron:L,shell:w,remark:v,active:c,config:R}),V.success(n("page.cron.table.message.new.ok"))),he("ok"),r(!0),G&&(x.value=!1)}catch(p){throw new Error(p)}r(!1)}).catch(()=>{})})}async function ke(r){if(f.model=ce(H),Object.assign(f.model,r),f.showAdvancedConfig=!1,f.model.config={before_task_shell:"",after_task_shell:"",log_directory:"",source_file:"",allow_concurrency:!1},Object.keys(r).length!==0&&r.config){f.showAdvancedConfig=!0,N.value=await Y();let o;try{o=r.config;for(const p of X)o[p]&&(f.model.config[p]=o[p]);f.model.config.source_file&&(D.value=f.model.config.source_file.replace(/[\\/]$/,"").replace(/.*[\\/]/,""))}catch{}}f.show=!0}function we(r){f.model.cron=r}async function Y(){B.value=!0;const r=await gt({type:Tt.LOG,onlyDir:!0}),o=p=>{p.length&&p.forEach(_=>{_.type===zt.FOLDER&&(Object.assign(_,{key:_.path,label:_.title,prefix:()=>yt(_.title)}),!_.children.length||_.children.length===0?(Object.assign(_,{children:null}),_.prefix=()=>vt()):o(_.children))})};return o(r),B.value=!1,r}function Z(){try{Q.value?.open(f.model.config.source_file||"")}catch{}}function xe(r){D.value=r.label,f.model.config.source_file=r.key}function Ce(r){r.style.height="auto";const{height:o}=getComputedStyle(r);r.style.height="0",r.style.overflow="hidden",requestAnimationFrame(()=>{r.style.height=o,r.addEventListener("transitionend",()=>{r.style.height="auto"},{once:!0})})}function Te(r){const{height:o}=getComputedStyle(r);r.style.height=o,r.style.overflow="hidden",setTimeout(()=>r.style.height="0",0)}function ze(r){r.style.opacity="0",r.style.transform="scale(0.9)",requestAnimationFrame(()=>{requestAnimationFrame(()=>{r.style.transition="opacity 0.3s ease, transform 0.3s ease",r.style.opacity="1",r.style.transform="scale(1)"})})}function Fe(r){r.style.opacity="1",r.style.transform="scale(1)",requestAnimationFrame(()=>{r.style.transition="opacity 0.3s ease, transform 0.3s ease",r.style.opacity="0",r.style.transform="scale(0.9)"})}return h({open:ke}),(r,o)=>{const p=mt,_=_t,C=ot,L=at,w=Ze,v=Oe,c=je,z=Ge,R=Pe,M=St,K=Ye,g=We,ee=Bt,Re=Qe,$e=Xe,te=He,I=Ie,le=dt,S=Ke,oe=ut,ne=tt,ae=Lt,se=lt,re=nt,P=et,ie=Ve,ue=$t,Ee=qe,De=rt,Le=it,Ae=st;return d(),E(pe,null,[e(G)?(d(),y(Ae,{key:1,show:e(x),"onUpdate:show":o[29]||(o[29]=s=>de(x)?x.value=s:null),height:"calc(var(--vh) * 100)",width:"100vw",placement:"right","auto-focus":!1,"mask-closable":!1},{default:l(()=>[t(Le,{closable:"","header-style":"height: 60px; padding: 16px 12px","body-content-style":"padding: 4px 12px","footer-style":"padding: 16px 24px"},{header:l(()=>[t(I,{style:{gap:"4px"}},{default:l(()=>[t(C,{size:26,color:"var(--app-primary-color)"},{default:l(()=>[e(a).id?(d(),y(p,{key:0})):(d(),y(_,{key:1}))]),_:1}),t(De,{style:{"padding-top":"5px",height:"100%","max-width":"260px"}},{tooltip:l(()=>[u("span",null,i(e(a).id?e(n)("page.cron.table.edit"):e(n)("page.cron.table.new")),1)]),default:l(()=>[u("span",qt,i(e(a).id?e(n)("page.cron.table.edit"):e(n)("page.cron.table.new")),1)]),_:1}),t(L,{size:"small",bordered:!1,style:{"margin-top":"3px"}},{default:l(()=>[m(i(e(a).type==="system"?e(n)("page.cron.type.system"):e(n)("page.cron.type.user")),1)]),_:1})]),_:1})]),footer:l(()=>[t(w,{justify:e(k)?"end":"space-between",style:{width:"100%"}},{default:l(()=>[_e(t(g,{secondary:"",type:"primary",focusable:!1,onClick:o[27]||(o[27]=s=>k.value=!e(k))},{icon:l(()=>[t(C,null,{default:l(()=>[t(ue)]),_:1})]),default:l(()=>[m(" "+i(e(n)("page.cron.editTask.advancedConfig")),1)]),_:1},512),[[ge,!e(k)]]),t(w,null,{default:l(()=>[t(g,{tertiary:"",focusable:!1,onClick:o[28]||(o[28]=s=>x.value=!1)},{default:l(()=>[m(i(e(n)("common.cancelText")),1)]),_:1}),t(g,{type:"primary",focusable:!1,onClick:O},{default:l(()=>[m(i(e(n)("common.okText")),1)]),_:1})]),_:1})]),_:1},8,["justify"])]),default:l(()=>[t(ie,{ref_key:"formRef",ref:j,model:e(a),rules:W,style:{"padding-top":"1em"}},{default:l(()=>[u("div",Vt,[u("div",jt,[t(c,{label:e(n)("page.cron.table.title.name"),path:"name"},{default:l(()=>[t(v,{value:e(a).name,"onUpdate:value":o[15]||(o[15]=s=>e(a).name=s),maxlength:"200",clearable:""},null,8,["value"])]),_:1},8,["label"])]),o[31]||(o[31]=u("div",{style:{flex:"0 0 8px"}},null,-1)),u("div",Ot,[t(c,{label:e(n)("page.cron.table.title.active"),path:"active"},{default:l(()=>[t(R,{value:e(a).active,"onUpdate:value":o[16]||(o[16]=s=>e(a).active=s),style:{height:"100%"},variant:"default-filled"},{default:l(()=>[t(z,{value:1},{default:l(()=>[m(i(e(n)("common.active")),1)]),_:1}),t(z,{value:0},{default:l(()=>[m(i(e(n)("common.inactive")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"])])]),t(c,{label:e(n)("page.cron.table.title.cron"),path:"cron"},{default:l(()=>[t(v,{value:e(a).cron,"onUpdate:value":o[17]||(o[17]=s=>e(a).cron=s),style:{"margin-right":"8px","font-family":"var(--app-font-family-mono)"},maxlength:"100",clearable:""},null,8,["value"]),t(w,{style:{"flex-flow":"row nowrap",gap:"4px"}},{default:l(()=>[t(S,{trigger:"hover",delay:500},{trigger:l(()=>[t(g,{strong:"",tertiary:"",style:{padding:"8px"},focusable:!1,onClick:o[18]||(o[18]=s=>T("openCronVisualization"))},{icon:l(()=>[t(le)]),_:1})]),default:l(()=>[u("span",null,i(e(n)("page.cron.editTask.visualCron")),1)]),_:1}),t(S,{trigger:"hover",delay:500},{trigger:l(()=>[t(g,{strong:"",tertiary:"",style:{padding:"8px"},focusable:!1,onClick:o[19]||(o[19]=s=>T("genRandomCron"))},{icon:l(()=>[t(oe)]),_:1})]),default:l(()=>[u("span",null,i(e(n)("page.cron.editTask.randomCron")),1)]),_:1})]),_:1})]),_:1},8,["label"]),e(b).length===5&&e(a).active?(d(),y(I,{key:0,justify:"end",class:"mt--22px",style:{height:"22px"}},{default:l(()=>[t(te,{trigger:"hover"},{trigger:l(()=>[t(A,{name:"fade",mode:"out-in",appear:""},{default:l(()=>[Date.parse(e(b)[0])-Date.now()<864e5?(d(),y(g,{key:0,text:"",focusable:!1,style:{height:"100%",color:"var(--app-text-color-3)"}},{icon:l(()=>[t(M)]),default:l(()=>[u("span",null,[t(K,{duration:Date.parse(e(b)[0])-Date.now()},null,8,["duration"]),o[32]||(o[32]=m(" (NEXT)"))])]),_:1})):(d(),y(g,{key:1,text:"",focusable:!1,style:{height:"100%",color:"var(--app-text-color-3)"}},{icon:l(()=>[t(ee)]),default:l(()=>[u("span",null,i(e(b)[0])+" (NEXT)",1)]),_:1}))]),_:1})]),default:l(()=>[u("span",null,[m(i(e(b)[0])+" ",1),o[33]||(o[33]=u("br",null,null,-1)),m(" "+i(e(b)[1])+" ",1),o[34]||(o[34]=u("br",null,null,-1)),m(" "+i(e(b)[2])+" ",1),o[35]||(o[35]=u("br",null,null,-1)),m(" "+i(e(b)[3])+" ",1),o[36]||(o[36]=u("br",null,null,-1)),m(" "+i(e(b)[4]),1)])]),_:1})]),_:1})):$("",!0),t(c,{label:e(n)("page.cron.table.title.shell"),path:"shell"},{default:l(()=>[t(v,{value:e(a).shell,"onUpdate:value":o[20]||(o[20]=s=>e(a).shell=s),type:"textarea",style:{"font-family":"var(--app-font-family-mono)"},autosize:{minRows:3},"input-props":F},null,8,["value"])]),_:1},8,["label"]),t(c,{label:e(n)("page.cron.table.title.remark"),path:"remark"},{default:l(()=>[t(v,{value:e(a).remark,"onUpdate:value":o[21]||(o[21]=s=>e(a).remark=s),type:"textarea",maxlength:200,autosize:{minRows:1}},null,8,["value"])]),_:1},8,["label"]),t(A,{name:"slide-drawer",onEnter:ze,onBeforeLeave:Fe},{default:l(()=>[e(k)?(d(),y(P,{key:0,bordered:!1,style:{"word-break":"unset"},"content-style":"padding: 0"},{default:l(()=>[t(c,{label:e(n)("page.cron.editTask.form.field.before_task_shell"),path:"config.before_task_shell"},{default:l(()=>[t(v,{value:e(a).config.before_task_shell,"onUpdate:value":o[22]||(o[22]=s=>e(a).config.before_task_shell=s),type:"textarea",style:{"font-family":"var(--app-font-family-mono)"},autosize:{minRows:1},"input-props":F},null,8,["value"])]),_:1},8,["label"]),t(c,{label:e(n)("page.cron.editTask.form.field.after_task_shell"),path:"config.after_task_shell"},{default:l(()=>[t(v,{value:e(a).config.after_task_shell,"onUpdate:value":o[23]||(o[23]=s=>e(a).config.after_task_shell=s),type:"textarea",style:{"font-family":"var(--app-font-family-mono)"},autosize:{minRows:1},"input-props":F},null,8,["value"])]),_:1},8,["label"]),t(c,{label:e(n)("page.cron.editTask.form.field.log_directory"),path:"config.log_directory"},{default:l(()=>[t(ne,{value:e(a).config.log_directory,"onUpdate:value":o[24]||(o[24]=s=>e(a).config.log_directory=s),clearable:"","consistent-menu-width":!1,loading:e(B),options:e(N),"on-update:expanded-keys":e(ve)},null,8,["value","loading","options","on-update:expanded-keys"])]),_:1},8,["label"]),t(c,{label:e(n)("page.cron.editTask.form.field.source_file"),path:"config.source_file"},{default:l(()=>[t(se,{style:{width:"100%"}},{default:l(()=>[t(g,{tertiary:"",type:e(a).config.source_file?"primary":"default",focusable:!1,style:me({flexGrow:"1",fontFamily:e(a).config.source_file?"var(--app-font-family-mono)":"var(--app-font-family)"}),onClick:Z},{default:l(()=>[m(i(e(a).config.source_file?e(D):e(n)("page.cron.editTask.form.sourceFileBtn")),1)]),_:1},8,["type","style"]),e(a).config.source_file?(d(),y(g,{key:0,tertiary:"",style:{padding:"8px"},focusable:!1,onClick:o[25]||(o[25]=s=>T("clearSelectCodeFile"))},{icon:l(()=>[t(C,{size:18,depth:3},{default:l(()=>[t(ae)]),_:1})]),_:1})):$("",!0)]),_:1})]),_:1},8,["label"]),t(c,{label:e(n)("page.cron.editTask.form.field.allow_concurrency"),path:"config.allow_concurrency"},{default:l(()=>[t(re,{value:e(a).config.allow_concurrency,"onUpdate:value":o[26]||(o[26]=s=>e(a).config.allow_concurrency=s)},null,8,["value"])]),_:1},8,["label"])]),_:1})):$("",!0)]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])):(d(),y(Ee,{key:0,show:e(x),"onUpdate:show":o[14]||(o[14]=s=>de(x)?x.value=s:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,style:{width:"528px"},"positive-text":e(n)("common.okText"),"negative-text":e(n)("common.cancelText"),"negative-button-props":{ghost:!1,tertiary:!0},onPositiveClick:O},{icon:l(()=>[t(C,{size:26},{default:l(()=>[e(a).id?(d(),y(p,{key:0})):(d(),y(_,{key:1}))]),_:1})]),header:l(()=>[t(w,{inline:"",wrap:!1,style:{gap:"6px"}},{default:l(()=>[u("span",null,i(e(a).id?e(n)("page.cron.table.edit"):e(n)("page.cron.table.new")),1),t(L,{size:"small",bordered:!1,style:{"margin-top":"3px"}},{default:l(()=>[m(i(e(a).type==="system"?e(n)("page.cron.type.system"):e(n)("page.cron.type.user")),1)]),_:1})]),_:1})]),action:l(()=>[t(A,{name:"fade",mode:"out-in",appear:""},{default:l(()=>[t(w,{justify:e(k)?"end":"space-between",style:{width:"100%"}},{default:l(()=>[_e(t(g,{secondary:"",type:"primary",size:"small",focusable:!1,onClick:o[12]||(o[12]=s=>T("showAdvancedConfig"))},{icon:l(()=>[t(C,null,{default:l(()=>[t(ue)]),_:1})]),default:l(()=>[m(" "+i(e(n)("page.cron.editTask.advancedConfig")),1)]),_:1},512),[[ge,!e(k)]]),t(w,{style:{gap:"6px"}},{default:l(()=>[t(g,{size:"small",tertiary:"",ghost:!1,focusable:!1,onClick:o[13]||(o[13]=s=>x.value=!1)},{default:l(()=>[m(i(e(n)("common.cancelText")),1)]),_:1}),t(g,{size:"small",type:"primary",focusable:!1,onClick:O},{default:l(()=>[m(i(e(n)("common.okText")),1)]),_:1})]),_:1})]),_:1},8,["justify"])]),_:1})]),default:l(()=>[t(P,{bordered:!1,style:{height:"100%","word-break":"unset"},"content-style":"padding: 0"},{default:l(()=>[t(ie,{ref_key:"formRef",ref:j,model:e(a),rules:W,"label-placement":"left","label-width":e(k)?"108px":"auto","require-mark-placement":"right-hanging",style:{"padding-top":"1em"}},{default:l(()=>[t(c,{label:e(n)("page.cron.table.title.name"),path:"name"},{default:l(()=>[t(v,{value:e(a).name,"onUpdate:value":o[0]||(o[0]=s=>e(a).name=s),maxlength:"200",clearable:""},null,8,["value"])]),_:1},8,["label"]),t(c,{label:e(n)("page.cron.table.title.active"),path:"active"},{default:l(()=>[t(I,{justify:"space-between",style:{width:"100%"}},{default:l(()=>[t(R,{value:e(a).active,"onUpdate:value":o[1]||(o[1]=s=>e(a).active=s),style:{height:"100%"},variant:"default-filled"},{default:l(()=>[t(z,{value:1},{default:l(()=>[m(i(e(n)("common.active")),1)]),_:1}),t(z,{value:0},{default:l(()=>[m(i(e(n)("common.inactive")),1)]),_:1})]),_:1},8,["value"]),e(b).length===5&&e(a).active?(d(),y(te,{key:0,trigger:"hover",placement:"bottom-end"},{trigger:l(()=>[t(A,{name:"fade",mode:"out-in",appear:""},{default:l(()=>[Date.parse(e(b)[0])-Date.now()<864e5?(d(),y(g,{key:0,text:"",focusable:!1,style:{height:"100%"}},{icon:l(()=>[t(M)]),default:l(()=>[u("span",null,[t(K,{duration:Date.parse(e(b)[0])-Date.now()},null,8,["duration"]),o[30]||(o[30]=m(" (NEXT)"))])]),_:1})):(d(),y(g,{key:1,text:"",focusable:!1,style:{height:"100%"}},{icon:l(()=>[t(ee)]),default:l(()=>[u("span",null,i(e(b)[0])+" (NEXT)",1)]),_:1}))]),_:1})]),default:l(()=>[t($e,null,{default:l(()=>[(d(),E(pe,null,Je(5,s=>t(Re,{key:s,title:e(b)[s-1]},null,8,["title"])),64))]),_:1})]),_:1})):$("",!0)]),_:1})]),_:1},8,["label"]),t(c,{label:e(n)("page.cron.table.title.cron"),path:"cron"},{default:l(()=>[t(v,{value:e(a).cron,"onUpdate:value":o[2]||(o[2]=s=>e(a).cron=s),style:{"margin-right":"8px","font-family":"var(--app-font-family-mono)"},maxlength:"100",clearable:""},null,8,["value"]),t(w,{style:{"flex-flow":"row nowrap",gap:"4px"}},{default:l(()=>[t(S,{trigger:"hover",delay:500},{trigger:l(()=>[t(g,{strong:"",tertiary:"",style:{padding:"8px"},focusable:!1,onClick:o[3]||(o[3]=s=>T("openCronVisualization"))},{icon:l(()=>[t(le)]),_:1})]),default:l(()=>[u("span",null,i(e(n)("page.cron.editTask.visualCron")),1)]),_:1}),t(S,{trigger:"hover",delay:500},{trigger:l(()=>[t(g,{strong:"",tertiary:"",style:{padding:"8px"},focusable:!1,onClick:o[4]||(o[4]=s=>T("genRandomCron"))},{icon:l(()=>[t(oe)]),_:1})]),default:l(()=>[u("span",null,i(e(n)("page.cron.editTask.randomCron")),1)]),_:1})]),_:1})]),_:1},8,["label"]),t(c,{label:e(n)("page.cron.table.title.shell"),path:"shell"},{default:l(()=>[t(v,{value:e(a).shell,"onUpdate:value":o[5]||(o[5]=s=>e(a).shell=s),type:"textarea",style:{"font-family":"var(--app-font-family-mono)"},autosize:{minRows:3},"input-props":F},null,8,["value"])]),_:1},8,["label"]),t(c,{label:e(n)("page.cron.table.title.remark"),path:"remark"},{default:l(()=>[t(v,{value:e(a).remark,"onUpdate:value":o[6]||(o[6]=s=>e(a).remark=s),type:"textarea",maxlength:200,autosize:{minRows:1}},null,8,["value"])]),_:1},8,["label"]),t(A,{name:"slide-modal",onEnter:Ce,onBeforeLeave:Te},{default:l(()=>[e(k)?(d(),y(P,{key:0,bordered:!1,style:{"word-break":"unset"},"content-style":"padding: 0"},{default:l(()=>[t(c,{label:e(n)("page.cron.editTask.form.field.before_task_shell"),path:"config.before_task_shell"},{default:l(()=>[t(v,{value:e(a).config.before_task_shell,"onUpdate:value":o[7]||(o[7]=s=>e(a).config.before_task_shell=s),type:"textarea",style:{"font-family":"var(--app-font-family-mono)"},autosize:{minRows:1},"input-props":F},null,8,["value"])]),_:1},8,["label"]),t(c,{label:e(n)("page.cron.editTask.form.field.after_task_shell"),path:"config.after_task_shell"},{default:l(()=>[t(v,{value:e(a).config.after_task_shell,"onUpdate:value":o[8]||(o[8]=s=>e(a).config.after_task_shell=s),type:"textarea",style:{"font-family":"var(--app-font-family-mono)"},autosize:{minRows:1},"input-props":F},null,8,["value"])]),_:1},8,["label"]),t(c,{label:e(n)("page.cron.editTask.form.field.log_directory"),path:"config.log_directory"},{default:l(()=>[t(ne,{value:e(a).config.log_directory,"onUpdate:value":o[9]||(o[9]=s=>e(a).config.log_directory=s),clearable:"","consistent-menu-width":!1,loading:e(B),options:e(N),"on-update:expanded-keys":e(ve)},null,8,["value","loading","options","on-update:expanded-keys"])]),_:1},8,["label"]),t(c,{label:e(n)("page.cron.editTask.form.field.source_file"),path:"config.source_file",style:{width:"100%"}},{default:l(()=>[t(se,{style:{width:"100%"}},{default:l(()=>[t(g,{tertiary:"",type:e(a).config.source_file?"primary":"default",focusable:!1,style:me({flexGrow:"1",fontFamily:e(a).config.source_file?"var(--app-font-family-mono)":"var(--app-font-family)"}),onClick:Z},{default:l(()=>[m(i(e(a).config.source_file?e(D):e(n)("page.cron.editTask.form.sourceFileBtn")),1)]),_:1},8,["type","style"]),e(a).config.source_file?(d(),y(g,{key:0,tertiary:"",style:{padding:"8px"},focusable:!1,onClick:o[10]||(o[10]=s=>T("clearSelectCodeFile"))},{icon:l(()=>[t(C,{size:18,depth:3},{default:l(()=>[t(ae)]),_:1})]),_:1})):$("",!0)]),_:1})]),_:1},8,["label"]),t(c,{label:e(n)("page.cron.editTask.form.field.allow_concurrency"),path:"config.allow_concurrency"},{default:l(()=>[t(re,{value:e(a).config.allow_concurrency,"onUpdate:value":o[11]||(o[11]=s=>e(a).config.allow_concurrency=s),round:!1},null,8,["value"])]),_:1},8,["label"])]),_:1})):$("",!0)]),_:1})]),_:1},8,["model","label-width"])]),_:1})]),_:1},8,["show","positive-text","negative-text"])),t(pt,{ref_key:"cronVisualizationRef",ref:J,onOnConfirm:we},null,512),t(e(bt),{ref_key:"selectCodeFileRef",ref:Q,onOnConfirmSelect:xe},null,512)],64)}}}),rl=Ct(It,[["__scopeId","data-v-55d2d628"]]);export{rl as default};
