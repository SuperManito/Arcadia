import{aN as q,a6 as d,aG as L,al as u,G as Ae,r as Be,aw as ce,J as Me,y as fe,h as Ne,F as e,a7 as y,a8 as l,a9 as t,aH as r,aT as m,aj as de,ak as pe,aq as U,aS as me,an as Se,aI as R,ap as _e,aJ as ge,aU as qe,bn as je,aL as Ve,be as Oe,bJ as Ie,bp as Ge,bq as Pe,cs as He,aA as Xe,ct as Je,bt as Ke,aX as Qe,b6 as We,bl as Ye,bc as Ze,cu as et,aM as tt,bK as lt,bL as at,ba as nt,bF as ot,bG as st,cv as it,cw as rt}from"./vendor-c495fdf6.js";import{e as ut,c as ct,_ as ft}from"./app-09bbb1a2.js";import{_ as dt,a as pt}from"./app-656eaa54.js";import{_ as mt,a as _t}from"./app-64acad92.js";import{v as ye}from"./app-fdf750e2.js";import{e as gt,c as yt,d as vt}from"./app-c86a1b95.js";import{S as bt}from"./app-cc6bd9f0.js";import{u as ve}from"./app-0f24c8a0.js";import{u as ht}from"./app-25ce29fa.js";import{d as kt,b as wt,j as xt,e as Ct}from"./app-b60428ff.js";import{a as Tt,F as zt}from"./app-30b30e0d.js";import"./app-72ae05ca.js";import"./app-6e808beb.js";import"./app-f217d8bf.js";import"./app-9e208ef5.js";import"./vendor-8fb801c2.js";const Ft={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"};function $t(A,h){return d(),L("svg",Ft,h[0]||(h[0]=[u("path",{fill:"currentColor",d:"M15.9 18.45c1.35 0 2.45-1.1 2.45-2.45s-1.1-2.45-2.45-2.45c-1.36 0-2.45 1.1-2.45 2.45s1.09 2.45 2.45 2.45m5.2-1.77l1.48 1.16c.13.11.17.29.08.45l-1.4 2.42a.35.35 0 0 1-.43.15l-1.74-.7c-.36.28-.76.51-1.18.69l-.27 1.85c-.02.17-.17.3-.34.3h-2.8c-.18 0-.32-.13-.35-.3l-.26-1.85c-.43-.18-.82-.41-1.18-.69l-1.75.7c-.15.06-.34 0-.42-.15l-1.4-2.42a.35.35 0 0 1 .08-.45l1.48-1.16l-.05-.68l.05-.69l-1.48-1.15a.35.35 0 0 1-.08-.45l1.4-2.42c.08-.16.27-.22.42-.16l1.75.71c.36-.28.75-.52 1.18-.69l.26-1.86c.03-.16.17-.29.35-.29h2.8c.17 0 .32.13.34.29l.27 1.86c.42.17.82.41 1.18.69l1.74-.71c.17-.06.34 0 .43.16l1.4 2.42c.09.15.05.34-.08.45l-1.48 1.15l.05.69zM6.69 8.07c.87 0 1.57-.7 1.57-1.57s-.7-1.58-1.57-1.58A1.58 1.58 0 0 0 5.11 6.5c0 .87.71 1.57 1.58 1.57m3.34-1.13l.97.74c.07.07.09.19.03.29l-.9 1.56c-.05.1-.17.14-.27.1l-1.12-.45l-.74.44l-.19 1.19c-.02.11-.11.19-.22.19h-1.8c-.12 0-.21-.08-.23-.19L5.4 9.62l-.76-.44l-1.14.45c-.09.04-.2 0-.26-.1l-.9-1.56c-.06-.1-.03-.22.05-.29l.95-.74l-.03-.44l.03-.44l-.95-.74a.23.23 0 0 1-.05-.29l.9-1.56c.06-.1.17-.14.26-.1l1.13.45l.77-.44l.16-1.19c.02-.11.11-.19.23-.19h1.8c.11 0 .2.08.22.19L8 3.38l.74.44l1.12-.45c.1-.04.22 0 .27.1l.9 1.56c.06.1.04.22-.03.29l-.97.74l.03.44z"},null,-1)]))}const Rt=q({name:"mdi-cogs",render:$t}),Lt={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"};function Dt(A,h){return d(),L("svg",Lt,h[0]||(h[0]=[u("path",{fill:"currentColor",d:"m12 12.708l-5.246 5.246q-.14.14-.344.15t-.364-.15t-.16-.354t.16-.354L11.292 12L6.046 6.754q-.14-.14-.15-.344t.15-.364t.354-.16t.354.16L12 11.292l5.246-5.246q.14-.14.345-.15q.203-.01.363.15t.16.354t-.16.354L12.708 12l5.246 5.246q.14.14.15.345q.01.203-.15.363t-.354.16t-.354-.16z"},null,-1)]))}const Et=q({name:"material-symbols-light-close-rounded",render:Dt}),Ut={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"};function At(A,h){return d(),L("svg",Ut,h[0]||(h[0]=[u("path",{fill:"currentColor",d:"M14 12h1.5v2.82l2.44 1.41l-.75 1.3L14 15.69zM4 2h14a2 2 0 0 1 2 2v6.1c1.24 1.26 2 2.99 2 4.9a7 7 0 0 1-7 7c-1.91 0-3.64-.76-4.9-2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2m0 13v3h4.67c-.43-.91-.67-1.93-.67-3zm0-7h6V5H4zm14 0V5h-6v3zM4 13h4.29c.34-1.15.97-2.18 1.81-3H4zm11-2.85A4.85 4.85 0 0 0 10.15 15c0 2.68 2.17 4.85 4.85 4.85A4.85 4.85 0 0 0 19.85 15c0-2.68-2.17-4.85-4.85-4.85"},null,-1)]))}const Bt=q({name:"mdi-timetable",render:At}),Mt={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"};function Nt(A,h){return d(),L("svg",Mt,h[0]||(h[0]=[u("path",{fill:"currentColor",d:"M13 2.03v2.02c4.39.54 7.5 4.53 6.96 8.92c-.46 3.64-3.32 6.53-6.96 6.96v2c5.5-.55 9.5-5.43 8.95-10.93c-.45-4.75-4.22-8.5-8.95-8.97m-2 .03c-1.95.19-3.81.94-5.33 2.2L7.1 5.74c1.12-.9 2.47-1.48 3.9-1.68zM4.26 5.67A9.9 9.9 0 0 0 2.05 11h2c.19-1.42.75-2.77 1.64-3.9zM2.06 13c.2 1.96.97 3.81 2.21 5.33l1.42-1.43A8 8 0 0 1 4.06 13zm5.04 5.37l-1.43 1.37A10 10 0 0 0 11 22v-2a8 8 0 0 1-3.9-1.63M12.5 7v5.25l4.5 2.67l-.75 1.23L11 13V7z"},null,-1)]))}const St=q({name:"mdi-progress-clock",render:Nt}),qt={style:{padding:"0 2px"}},jt={class:"inline-container"},Vt={class:"left-content",style:{width:"100%"}},Ot={class:"right-content"},It=Ae({__name:"editTask",emits:["ok"],setup(A,{expose:h,emit:be}){const he=be,{getIsMobile:P}=ht(),{message:j}=kt(),{t:n}=wt(),H={id:null,name:"",cron:"",shell:"",remark:"",active:1,type:"user",config:{before_task_shell:"",after_task_shell:"",log_directory:"",source_file:"",allow_concurrency:!1}},X=["before_task_shell","after_task_shell","log_directory","source_file","allow_concurrency"],f=Be({show:!1,showAdvancedConfig:!1,model:ce(H),formRef:null,sourceFileName:"",isTreeLoading:!1,directoryTreeData:[]}),{show:x,showAdvancedConfig:k,model:o,formRef:V,sourceFileName:D,isTreeLoading:B,directoryTreeData:M}=Me(f),J=fe(),K=fe(),Q={active:{required:!0},name:{required:!0,message:n("page.cron.editTask.form.message.noName"),trigger:["input","blur"]},cron:{required:!0,validator(i,a){if(a){if(!ye(a))return new Error(n("page.cron.editTask.form.message.invalidCron"))}else return new Error(n("page.cron.editTask.form.message.noCron"));return!0},trigger:["input","blur"]},shell:{required:!0,message:n("page.cron.editTask.form.message.noShell"),trigger:["input","blur"]}};async function T(i){switch(i){case"genRandomCron":const a=Math.floor(Math.random()*24);let p=0;do p=Math.floor(Math.random()*60);while([0,1,2,3,30].includes(p));const _=`${p} ${a} * * *`;f.model.cron=_;break;case"openCronVisualization":J.value?.open({cron:f.model.cron,showSecond:f.model.cron.split(" ").length===6});break;case"showAdvancedConfig":k.value=!0,M.value=await W();break;case"clearSelectCodeFile":f.model.config.source_file="",D.value="";break}}const F={onkeydown(i){if(i.key==="Enter")return j.warning(n("page.cron.editTask.form.message.no_enter")),!1}},b=Ne(()=>{try{if(!ye(f.model.cron))return[];const i=[],a=it.parseExpression(f.model.cron);for(let p=0;p<5;p++)i.push(xt(a.next().toDate()));return i}catch{return[]}});function O(){return new Promise(i=>{V.value?.validate(async a=>{if(!a)try{const{type:p,id:_,name:C,cron:E,shell:w,remark:v,active:c}=f.model;let z=!1;for(const N of X)f.model.config[N]&&(z=!0);let $="";z&&($=JSON.stringify(f.model.config)),_?(await ut([{type:p,id:_,name:C,cron:E,shell:w,remark:v,active:c,config:$}]),j.success(n("page.cron.table.message.edit.ok"))):(await ct({type:p,name:C,cron:E,shell:w,remark:v,active:c,config:$}),j.success(n("page.cron.table.message.new.ok"))),he("ok"),i(!0),P&&(x.value=!1)}catch(p){throw new Error(p)}i(!1)}).catch(()=>{})})}async function ke(i){if(f.model=ce(H),Object.assign(f.model,i),f.showAdvancedConfig=!1,f.model.config={before_task_shell:"",after_task_shell:"",log_directory:"",source_file:"",allow_concurrency:!1},Object.keys(i).length!==0&&i.config){f.showAdvancedConfig=!0,M.value=await W();let a;try{a=i.config;for(const p of X)a[p]&&(f.model.config[p]=a[p]);f.model.config.source_file&&(D.value=f.model.config.source_file.replace(/[\\/]$/,"").replace(/.*[\\/]/,""))}catch{}}f.show=!0}function we(i){f.model.cron=i}async function W(){B.value=!0;const i=await gt({type:Tt.LOG,onlyDir:!0}),a=p=>{p.length&&p.forEach(_=>{_.type===zt.FOLDER&&(Object.assign(_,{key:_.path,label:_.title,prefix:()=>yt(_.title)}),!_.children.length||_.children.length===0?(Object.assign(_,{children:null}),_.prefix=()=>vt()):a(_.children))})};return a(i),B.value=!1,i}function Y(){try{K.value?.open(f.model.config.source_file||"")}catch{}}function xe(i){D.value=i.label,f.model.config.source_file=i.key}function Ce(i){i.style.height="auto";const{height:a}=getComputedStyle(i);i.style.height="0",i.style.overflow="hidden",requestAnimationFrame(()=>{i.style.height=a,i.addEventListener("transitionend",()=>{i.style.height="auto"},{once:!0})})}function Te(i){const{height:a}=getComputedStyle(i);i.style.height=a,i.style.overflow="hidden",setTimeout(()=>i.style.height="0",0)}function ze(i){i.style.opacity="0",i.style.transform="scale(0.9)",requestAnimationFrame(()=>{requestAnimationFrame(()=>{i.style.transition="opacity 0.3s ease, transform 0.3s ease",i.style.opacity="1",i.style.transform="scale(1)"})})}function Fe(i){i.style.opacity="1",i.style.transform="scale(1)",requestAnimationFrame(()=>{i.style.transition="opacity 0.3s ease, transform 0.3s ease",i.style.opacity="0",i.style.transform="scale(0.9)"})}return h({open:ke}),(i,a)=>{const p=mt,_=_t,C=qe,E=je,w=Ve,v=Oe,c=Ie,z=Ge,$=Pe,N=St,Z=He,g=Xe,ee=Bt,$e=rt,Re=Je,te=Ke,I=Qe,le=pt,S=We,ae=ft,ne=Ye,oe=Et,se=Ze,ie=et,G=tt,re=lt,ue=Rt,Le=at,De=nt,Ee=ot,Ue=st;return d(),L(me,null,[e(P)?(d(),y(Ue,{key:1,show:e(x),"onUpdate:show":a[29]||(a[29]=s=>ge(x)?x.value=s:null),height:"calc(var(--vh) * 100)",width:"100vw",placement:"right","auto-focus":!1,"mask-closable":!1},{default:l(()=>[t(Ee,{closable:"","header-style":"height: 60px; padding: 16px 12px","body-content-style":"padding: 4px 12px","footer-style":"padding: 16px 24px"},{header:l(()=>[t(I,{style:{gap:"4px"}},{default:l(()=>[t(C,{size:26,color:"var(--app-primary-color)"},{default:l(()=>[e(o).id?(d(),y(p,{key:0,style:{"vertical-align":"0"}})):(d(),y(_,{key:1,style:{"vertical-align":"0"}}))]),_:1}),t(De,{style:{"padding-top":"5px",height:"100%","max-width":"260px"}},{tooltip:l(()=>[u("span",null,r(e(o).id?e(n)("page.cron.table.edit"):e(n)("page.cron.table.new")),1)]),default:l(()=>[u("span",qt,r(e(o).id?e(n)("page.cron.table.edit"):e(n)("page.cron.table.new")),1)]),_:1}),t(E,{size:"small",bordered:!1,style:{"margin-top":"3px"}},{default:l(()=>[m(r(e(o).type==="system"?e(n)("page.cron.type.system"):e(n)("page.cron.type.user")),1)]),_:1})]),_:1})]),footer:l(()=>[t(w,{justify:e(k)?"end":"space-between",style:{width:"100%"}},{default:l(()=>[de(t(g,{secondary:"",type:"primary",focusable:!1,onClick:a[27]||(a[27]=s=>k.value=!e(k))},{icon:l(()=>[t(C,null,{default:l(()=>[t(ue,{style:{"vertical-align":"baseline"}})]),_:1})]),default:l(()=>[m(" "+r(e(n)("page.cron.editTask.advancedConfig")),1)]),_:1},512),[[pe,!e(k)]]),t(w,null,{default:l(()=>[t(g,{tertiary:"",focusable:!1,onClick:a[28]||(a[28]=s=>x.value=!1)},{default:l(()=>[m(r(e(n)("common.cancelText")),1)]),_:1}),t(g,{type:"primary",focusable:!1,onClick:O},{default:l(()=>[m(r(e(n)("common.okText")),1)]),_:1})]),_:1})]),_:1},8,["justify"])]),default:l(()=>[t(re,{ref_key:"formRef",ref:V,model:e(o),rules:Q,style:{"padding-top":"1em"}},{default:l(()=>[u("div",jt,[u("div",Vt,[t(c,{label:e(n)("page.cron.table.title.name"),path:"name"},{default:l(()=>[t(v,{value:e(o).name,"onUpdate:value":a[15]||(a[15]=s=>e(o).name=s),maxlength:"200",clearable:""},null,8,["value"])]),_:1},8,["label"])]),a[31]||(a[31]=u("div",{style:{flex:"0 0 8px"}},null,-1)),u("div",Ot,[t(c,{label:e(n)("page.cron.table.title.active"),path:"active"},{default:l(()=>[t($,{value:e(o).active,"onUpdate:value":a[16]||(a[16]=s=>e(o).active=s),style:{height:"100%"},variant:"default-filled"},{default:l(()=>[t(z,{value:1},{default:l(()=>[m(r(e(n)("common.active")),1)]),_:1}),t(z,{value:0},{default:l(()=>[m(r(e(n)("common.inactive")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"])])]),t(c,{label:e(n)("page.cron.table.title.cron"),path:"cron"},{default:l(()=>[t(v,{value:e(o).cron,"onUpdate:value":a[17]||(a[17]=s=>e(o).cron=s),style:{"margin-right":"8px","font-family":"var(--app-font-family-mono)"},maxlength:"100",clearable:""},null,8,["value"]),t(w,{style:{"flex-flow":"row nowrap",gap:"4px"}},{default:l(()=>[t(S,{trigger:"hover",delay:500},{trigger:l(()=>[t(g,{strong:"",tertiary:"",style:{padding:"8px"},focusable:!1,onClick:a[18]||(a[18]=s=>T("openCronVisualization"))},{icon:l(()=>[t(le)]),_:1})]),default:l(()=>[u("span",null,r(e(n)("page.cron.editTask.visualCron")),1)]),_:1}),t(S,{trigger:"hover",delay:500},{trigger:l(()=>[t(g,{strong:"",tertiary:"",style:{padding:"8px"},focusable:!1,onClick:a[19]||(a[19]=s=>T("genRandomCron"))},{icon:l(()=>[t(ae)]),_:1})]),default:l(()=>[u("span",null,r(e(n)("page.cron.editTask.randomCron")),1)]),_:1})]),_:1})]),_:1},8,["label"]),e(b).length===5&&e(o).active?(d(),y(I,{key:0,justify:"end",class:"mt--22px",style:{height:"22px"}},{default:l(()=>[t(te,{trigger:"hover"},{trigger:l(()=>[t(U,{name:"fade",mode:"out-in",appear:""},{default:l(()=>[Date.parse(e(b)[0])-Date.now()<864e5?(d(),y(g,{key:0,text:"",focusable:!1,style:{height:"100%",color:"var(--app-text-color-3)"}},{icon:l(()=>[t(N)]),default:l(()=>[u("span",null,[t(Z,{duration:Date.parse(e(b)[0])-Date.now()},null,8,["duration"]),a[32]||(a[32]=m(" (NEXT)"))])]),_:1})):(d(),y(g,{key:1,text:"",focusable:!1,style:{height:"100%",color:"var(--app-text-color-3)"}},{icon:l(()=>[t(ee)]),default:l(()=>[u("span",null,r(e(b)[0])+" (NEXT)",1)]),_:1}))]),_:1})]),default:l(()=>[u("span",null,[m(r(e(b)[0])+" ",1),a[33]||(a[33]=u("br",null,null,-1)),m(" "+r(e(b)[1])+" ",1),a[34]||(a[34]=u("br",null,null,-1)),m(" "+r(e(b)[2])+" ",1),a[35]||(a[35]=u("br",null,null,-1)),m(" "+r(e(b)[3])+" ",1),a[36]||(a[36]=u("br",null,null,-1)),m(" "+r(e(b)[4]),1)])]),_:1})]),_:1})):R("",!0),t(c,{label:e(n)("page.cron.table.title.shell"),path:"shell"},{default:l(()=>[t(v,{value:e(o).shell,"onUpdate:value":a[20]||(a[20]=s=>e(o).shell=s),type:"textarea",style:{"font-family":"var(--app-font-family-mono)"},autosize:{minRows:3},"input-props":F},null,8,["value"])]),_:1},8,["label"]),t(c,{label:e(n)("page.cron.table.title.remark"),path:"remark"},{default:l(()=>[t(v,{value:e(o).remark,"onUpdate:value":a[21]||(a[21]=s=>e(o).remark=s),type:"textarea",maxlength:200,autosize:{minRows:1}},null,8,["value"])]),_:1},8,["label"]),t(U,{name:"slide-drawer",onEnter:ze,onBeforeLeave:Fe},{default:l(()=>[e(k)?(d(),y(G,{key:0,bordered:!1,style:{"word-break":"unset"},"content-style":"padding: 0"},{default:l(()=>[t(c,{label:e(n)("page.cron.editTask.form.field.before_task_shell"),path:"config.before_task_shell"},{default:l(()=>[t(v,{value:e(o).config.before_task_shell,"onUpdate:value":a[22]||(a[22]=s=>e(o).config.before_task_shell=s),type:"textarea",style:{"font-family":"var(--app-font-family-mono)"},autosize:{minRows:1},"input-props":F},null,8,["value"])]),_:1},8,["label"]),t(c,{label:e(n)("page.cron.editTask.form.field.after_task_shell"),path:"config.after_task_shell"},{default:l(()=>[t(v,{value:e(o).config.after_task_shell,"onUpdate:value":a[23]||(a[23]=s=>e(o).config.after_task_shell=s),type:"textarea",style:{"font-family":"var(--app-font-family-mono)"},autosize:{minRows:1},"input-props":F},null,8,["value"])]),_:1},8,["label"]),t(c,{label:e(n)("page.cron.editTask.form.field.log_directory"),path:"config.log_directory"},{default:l(()=>[t(ne,{value:e(o).config.log_directory,"onUpdate:value":a[24]||(a[24]=s=>e(o).config.log_directory=s),clearable:"","consistent-menu-width":!1,loading:e(B),options:e(M),"on-update:expanded-keys":e(ve)},null,8,["value","loading","options","on-update:expanded-keys"])]),_:1},8,["label"]),t(c,{label:e(n)("page.cron.editTask.form.field.source_file"),path:"config.source_file"},{default:l(()=>[t(se,{style:{width:"100%"}},{default:l(()=>[t(g,{tertiary:"",type:e(o).config.source_file?"primary":"default",focusable:!1,style:_e({flexGrow:"1",fontFamily:e(o).config.source_file?"var(--app-font-family-mono)":"var(--app-font-family)"}),onClick:Y},{default:l(()=>[m(r(e(o).config.source_file?e(D):e(n)("page.cron.editTask.form.sourceFileBtn")),1)]),_:1},8,["type","style"]),e(o).config.source_file?(d(),y(g,{key:0,tertiary:"",style:{padding:"8px"},focusable:!1,onClick:a[25]||(a[25]=s=>T("clearSelectCodeFile"))},{icon:l(()=>[t(C,{size:18,depth:3},{default:l(()=>[t(oe)]),_:1})]),_:1})):R("",!0)]),_:1})]),_:1},8,["label"]),t(c,{label:e(n)("page.cron.editTask.form.field.allow_concurrency"),path:"config.allow_concurrency"},{default:l(()=>[t(ie,{value:e(o).config.allow_concurrency,"onUpdate:value":a[26]||(a[26]=s=>e(o).config.allow_concurrency=s)},null,8,["value"])]),_:1},8,["label"])]),_:1})):R("",!0)]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])):(d(),y(Le,{key:0,show:e(x),"onUpdate:show":a[14]||(a[14]=s=>ge(x)?x.value=s:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,style:{width:"528px"},"positive-text":e(n)("common.okText"),"negative-text":e(n)("common.cancelText"),"negative-button-props":{ghost:!1,tertiary:!0},onPositiveClick:O},{icon:l(()=>[t(C,{size:26},{default:l(()=>[e(o).id?(d(),y(p,{key:0,style:{"vertical-align":"baseline"}})):(d(),y(_,{key:1,style:{"vertical-align":"baseline"}}))]),_:1})]),header:l(()=>[t(w,{inline:"",wrap:!1,style:{gap:"6px"}},{default:l(()=>[u("span",null,r(e(o).id?e(n)("page.cron.table.edit"):e(n)("page.cron.table.new")),1),t(E,{size:"small",bordered:!1,style:{"margin-top":"3px"}},{default:l(()=>[m(r(e(o).type==="system"?e(n)("page.cron.type.system"):e(n)("page.cron.type.user")),1)]),_:1})]),_:1})]),action:l(()=>[t(U,{name:"fade",mode:"out-in",appear:""},{default:l(()=>[t(w,{justify:e(k)?"end":"space-between",style:{width:"100%"}},{default:l(()=>[de(t(g,{secondary:"",type:"primary",size:"small",focusable:!1,onClick:a[12]||(a[12]=s=>T("showAdvancedConfig"))},{icon:l(()=>[t(C,null,{default:l(()=>[t(ue,{style:{"vertical-align":"baseline"}})]),_:1})]),default:l(()=>[m(" "+r(e(n)("page.cron.editTask.advancedConfig")),1)]),_:1},512),[[pe,!e(k)]]),t(w,null,{default:l(()=>[t(g,{size:"small",tertiary:"",ghost:!1,focusable:!1,onClick:a[13]||(a[13]=s=>x.value=!1)},{default:l(()=>[m(r(e(n)("common.cancelText")),1)]),_:1}),t(g,{size:"small",type:"primary",focusable:!1,onClick:O},{default:l(()=>[m(r(e(n)("common.okText")),1)]),_:1})]),_:1})]),_:1},8,["justify"])]),_:1})]),default:l(()=>[t(G,{bordered:!1,style:{height:"100%","word-break":"unset"},"content-style":"padding: 0"},{default:l(()=>[t(re,{ref_key:"formRef",ref:V,model:e(o),rules:Q,"label-placement":"left","label-width":e(k)?"108px":"auto","require-mark-placement":"right-hanging",style:{"padding-top":"1em"}},{default:l(()=>[t(c,{label:e(n)("page.cron.table.title.name"),path:"name"},{default:l(()=>[t(v,{value:e(o).name,"onUpdate:value":a[0]||(a[0]=s=>e(o).name=s),maxlength:"200",clearable:""},null,8,["value"])]),_:1},8,["label"]),t(c,{label:e(n)("page.cron.table.title.active"),path:"active"},{default:l(()=>[t(I,{justify:"space-between",style:{width:"100%"}},{default:l(()=>[t($,{value:e(o).active,"onUpdate:value":a[1]||(a[1]=s=>e(o).active=s),style:{height:"100%"},variant:"default-filled"},{default:l(()=>[t(z,{value:1},{default:l(()=>[m(r(e(n)("common.active")),1)]),_:1}),t(z,{value:0},{default:l(()=>[m(r(e(n)("common.inactive")),1)]),_:1})]),_:1},8,["value"]),e(b).length===5&&e(o).active?(d(),y(te,{key:0,trigger:"hover",placement:"bottom-end"},{trigger:l(()=>[t(U,{name:"fade",mode:"out-in",appear:""},{default:l(()=>[Date.parse(e(b)[0])-Date.now()<864e5?(d(),y(g,{key:0,text:"",focusable:!1,style:{height:"100%"}},{icon:l(()=>[t(N)]),default:l(()=>[u("span",null,[t(Z,{duration:Date.parse(e(b)[0])-Date.now()},null,8,["duration"]),a[30]||(a[30]=m(" (NEXT)"))])]),_:1})):(d(),y(g,{key:1,text:"",focusable:!1,style:{height:"100%"}},{icon:l(()=>[t(ee)]),default:l(()=>[u("span",null,r(e(b)[0])+" (NEXT)",1)]),_:1}))]),_:1})]),default:l(()=>[t(Re,null,{default:l(()=>[(d(),L(me,null,Se(5,s=>t($e,{key:s,title:e(b)[s-1]},null,8,["title"])),64))]),_:1})]),_:1})):R("",!0)]),_:1})]),_:1},8,["label"]),t(c,{label:e(n)("page.cron.table.title.cron"),path:"cron"},{default:l(()=>[t(v,{value:e(o).cron,"onUpdate:value":a[2]||(a[2]=s=>e(o).cron=s),style:{"margin-right":"8px","font-family":"var(--app-font-family-mono)"},maxlength:"100",clearable:""},null,8,["value"]),t(w,{style:{"flex-flow":"row nowrap",gap:"4px"}},{default:l(()=>[t(S,{trigger:"hover",delay:500},{trigger:l(()=>[t(g,{strong:"",tertiary:"",style:{padding:"8px"},focusable:!1,onClick:a[3]||(a[3]=s=>T("openCronVisualization"))},{icon:l(()=>[t(le)]),_:1})]),default:l(()=>[u("span",null,r(e(n)("page.cron.editTask.visualCron")),1)]),_:1}),t(S,{trigger:"hover",delay:500},{trigger:l(()=>[t(g,{strong:"",tertiary:"",style:{padding:"8px"},focusable:!1,onClick:a[4]||(a[4]=s=>T("genRandomCron"))},{icon:l(()=>[t(ae)]),_:1})]),default:l(()=>[u("span",null,r(e(n)("page.cron.editTask.randomCron")),1)]),_:1})]),_:1})]),_:1},8,["label"]),t(c,{label:e(n)("page.cron.table.title.shell"),path:"shell"},{default:l(()=>[t(v,{value:e(o).shell,"onUpdate:value":a[5]||(a[5]=s=>e(o).shell=s),type:"textarea",style:{"font-family":"var(--app-font-family-mono)"},autosize:{minRows:3},"input-props":F},null,8,["value"])]),_:1},8,["label"]),t(c,{label:e(n)("page.cron.table.title.remark"),path:"remark"},{default:l(()=>[t(v,{value:e(o).remark,"onUpdate:value":a[6]||(a[6]=s=>e(o).remark=s),type:"textarea",maxlength:200,autosize:{minRows:1}},null,8,["value"])]),_:1},8,["label"]),t(U,{name:"slide-modal",onEnter:Ce,onBeforeLeave:Te},{default:l(()=>[e(k)?(d(),y(G,{key:0,bordered:!1,style:{"word-break":"unset"},"content-style":"padding: 0"},{default:l(()=>[t(c,{label:e(n)("page.cron.editTask.form.field.before_task_shell"),path:"config.before_task_shell"},{default:l(()=>[t(v,{value:e(o).config.before_task_shell,"onUpdate:value":a[7]||(a[7]=s=>e(o).config.before_task_shell=s),type:"textarea",style:{"font-family":"var(--app-font-family-mono)"},autosize:{minRows:1},"input-props":F},null,8,["value"])]),_:1},8,["label"]),t(c,{label:e(n)("page.cron.editTask.form.field.after_task_shell"),path:"config.after_task_shell"},{default:l(()=>[t(v,{value:e(o).config.after_task_shell,"onUpdate:value":a[8]||(a[8]=s=>e(o).config.after_task_shell=s),type:"textarea",style:{"font-family":"var(--app-font-family-mono)"},autosize:{minRows:1},"input-props":F},null,8,["value"])]),_:1},8,["label"]),t(c,{label:e(n)("page.cron.editTask.form.field.log_directory"),path:"config.log_directory"},{default:l(()=>[t(ne,{value:e(o).config.log_directory,"onUpdate:value":a[9]||(a[9]=s=>e(o).config.log_directory=s),clearable:"","consistent-menu-width":!1,loading:e(B),options:e(M),"on-update:expanded-keys":e(ve)},null,8,["value","loading","options","on-update:expanded-keys"])]),_:1},8,["label"]),t(c,{label:e(n)("page.cron.editTask.form.field.source_file"),path:"config.source_file",style:{width:"100%"}},{default:l(()=>[t(se,{style:{width:"100%"}},{default:l(()=>[t(g,{tertiary:"",type:e(o).config.source_file?"primary":"default",focusable:!1,style:_e({flexGrow:"1",fontFamily:e(o).config.source_file?"var(--app-font-family-mono)":"var(--app-font-family)"}),onClick:Y},{default:l(()=>[m(r(e(o).config.source_file?e(D):e(n)("page.cron.editTask.form.sourceFileBtn")),1)]),_:1},8,["type","style"]),e(o).config.source_file?(d(),y(g,{key:0,tertiary:"",style:{padding:"8px"},focusable:!1,onClick:a[10]||(a[10]=s=>T("clearSelectCodeFile"))},{icon:l(()=>[t(C,{size:18,depth:3},{default:l(()=>[t(oe)]),_:1})]),_:1})):R("",!0)]),_:1})]),_:1},8,["label"]),t(c,{label:e(n)("page.cron.editTask.form.field.allow_concurrency"),path:"config.allow_concurrency"},{default:l(()=>[t(ie,{value:e(o).config.allow_concurrency,"onUpdate:value":a[11]||(a[11]=s=>e(o).config.allow_concurrency=s),round:!1},null,8,["value"])]),_:1},8,["label"])]),_:1})):R("",!0)]),_:1})]),_:1},8,["model","label-width"])]),_:1})]),_:1},8,["show","positive-text","negative-text"])),t(dt,{ref_key:"cronVisualizationRef",ref:J,onOnConfirm:we},null,512),t(e(bt),{ref_key:"selectCodeFileRef",ref:K,onOnConfirmSelect:xe},null,512)],64)}}}),sl=Ct(It,[["__scopeId","data-v-c651a239"]]);export{sl as default};
