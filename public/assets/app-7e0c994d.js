import{_ as Ie}from"./app-e7833723.js";import{M as Be,_ as Ne,a as Ve}from"./app-de2955b8.js";import{aN as V,a6 as s,aG as k,al as M,aO as Me,G as Pe,y as g,aP as Fe,aQ as De,aR as He,a7 as c,a8 as o,a9 as l,aq as G,F as t,aJ as Ue,an as Ae,aS as Oe,aT as L,aH as R,ap as J,aI as I,at as B,aE as We,aU as Q,aV as je,aW as Ke,aX as qe,aA as X,aY as Ge,aM as Je,aZ as Qe,a_ as Xe,a$ as Ye,b0 as Ze,b1 as en,b2 as Y,b3 as Z,b4 as nn,b5 as tn,b6 as on,b7 as ln,b8 as an,b9 as sn}from"./vendor-c495fdf6.js";import{d as rn,b as cn,_ as un,e as pn}from"./app-b60428ff.js";import{g as dn,f as _n,s as gn,_ as fn}from"./app-bef5b8ef.js";import{s as mn,g as vn}from"./app-c86a1b95.js";import{I as N}from"./app-f217d8bf.js";import{S as yn}from"./app-cc6bd9f0.js";import{u as hn}from"./app-25ce29fa.js";import{u as kn}from"./app-d8fe7d78.js";import{u as bn}from"./app-d82b1e23.js";import"./app-ea00c288.js";import"./app-6e808beb.js";import"./app-72ae05ca.js";import"./vendor-8fb801c2.js";import"./app-33d5aac1.js";import"./app-9e208ef5.js";import"./app-0f24c8a0.js";import"./app-30b30e0d.js";const xn={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"};function wn(C,f){return s(),k("svg",xn,f[0]||(f[0]=[M("path",{fill:"currentColor",d:"M13 19.3v-6.7l6-3.4V13c.7 0 1.4.1 2 .4V7.5c0-.4-.2-.7-.5-.9l-7.9-4.4c-.2-.1-.4-.2-.6-.2s-.4.1-.6.2L3.5 6.6c-.3.2-.5.5-.5.9v9c0 .4.2.7.5.9l7.9 4.4c.2.1.4.2.6.2s.4-.1.6-.2l.9-.5c-.3-.6-.4-1.3-.5-2M12 4.2l6 3.3l-2 1.1l-5.9-3.4zm-1 15.1l-6-3.4V9.2l6 3.4zm1-8.5L6 7.5l2-1.2l6 3.5zm8 4.2v3h3v2h-3v3h-2v-3h-3v-2h3v-3z"},null,-1)]))}const Rn=V({name:"mdi-package-variant-closed-plus",render:wn}),Cn={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"};function zn(C,f){return s(),k("svg",Cn,f[0]||(f[0]=[M("path",{fill:"currentColor",d:"M8.27 3L3 8.27v7.46L8.27 21h7.46C17.5 19.24 21 15.73 21 15.73V8.27L15.73 3M9.1 5h5.8L19 9.1v5.8L14.9 19H9.1L5 14.9V9.1m6 5.9h2v2h-2zm0-8h2v6h-2z"},null,-1)]))}const $n=V({name:"mdi-alert-octagon-outline",render:zn}),Sn={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"};function En(C,f){return s(),k("svg",Sn,f[0]||(f[0]=[Me('<g stroke="currentColor"><circle cx="12" cy="12" r="9.5" fill="none" stroke-linecap="round" stroke-width="3"><animate attributeName="stroke-dasharray" calcMode="spline" dur="1.5s" keySplines="0.42,0,0.58,1;0.42,0,0.58,1;0.42,0,0.58,1" keyTimes="0;0.475;0.95;1" repeatCount="indefinite" values="0 150;42 150;42 150;42 150"></animate><animate attributeName="stroke-dashoffset" calcMode="spline" dur="1.5s" keySplines="0.42,0,0.58,1;0.42,0,0.58,1;0.42,0,0.58,1" keyTimes="0;0.475;0.95;1" repeatCount="indefinite" values="0;-16;-59;-59"></animate></circle><animateTransform attributeName="transform" dur="2s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"></animateTransform></g>',1)]))}const Tn=V({name:"svg-spinners-ring-resize",render:En}),Ln={key:1},In={key:1},Bn=Pe({__name:"index",setup(C){const{message:f}=rn(),{getIsMobile:m}=hn(),{t:_}=cn(),ee=g("fade-slide");kn(ee);const P=g(),v=g({}),d=g({});let z=null;const ne=g(""),F=g(m.value?14:16),u=g([]),y=g({}),h=g(""),x=g(!1),p=g(null);function te(e){switch(e.item.label){case"1":_e();break}}async function D(){try{P.value?.open()}catch{}}function oe(e){if(!p.value)return;const n=p.value.key;e!==n&&(y.value[n].content=t(v.value)[`editor-${n}`].getValue())}function $(e){u.value.forEach(n=>{n.key===e&&(n.log.runEnd&&!n.log.isRunning&&(n.log.runEnd=!1),n.log.hasNew=!1,h.value=e,p.value=n,delete p.value.children)}),setTimeout(de,800)}function le(e){u.value.forEach((n,r)=>{n.key===e&&(u.value.splice(r,1),delete y.value[n.key],delete v.value[`editor-${n.key}`],u.value.length>0?h.value===e&&$(u.value[u.value.length-1].key):(U("content"),H(n.key)))})}function ae(e){[u.value[e.currentIndex],u.value[e.targetIndex]]=[u.value[e.targetIndex],u.value[e.currentIndex]]}function ie(e){oe(e),$(e)}function se(e){le(e.value)}function re(){return B(N,{size:24,icon:p.value.log.isRunning?"mdi:bug-stop-outline":"mdi:bug-play-outline",style:"margin-top: 4px"},{})}function ce(){return B(N,{size:22,icon:"tabler:settings-code",style:"margin-top: 5px"},{})}function ue(){return B(N,{size:22,icon:"ph:sliders-horizontal-bold",style:"margin-top: 5px"},{})}async function pe(e){u.value.find(r=>r.key===e.key)||(await ge(e.key,e.language),u.value.push({...e,log:{content:"",newContent:"",id:"",runEnd:!1,isRunning:!1,hasNew:!1,env:[],option:[],isLogReachBottom:!0}})),$(e.key)}const S=Fe(e=>{const n=p.value;if(d.value&&d.value[`log-${n.key}`]){const r=d.value[`log-${n.key}`].$el.clientHeight,i=e.target.scrollTop,w=e.target.scrollHeight;n.log.isLogReachBottom=r+i>=w-10}},500);function de(){Y().then(()=>{const e=p.value;if(d.value&&d.value[`log-${e.key}`]&&d.value[`log-${e.key}`].scrollbarRef?.containerRef){const n=d.value[`log-${e.key}`].scrollbarRef?.containerRef;n.removeEventListener("scroll",S),n.addEventListener("scroll",S)}})}async function _e(){const e=p.value;let n;if(e.log.isRunning)await gn({path:e.key}),e.log.isRunning=!1;else try{n=bn(e.key,e.log.option.concat([{key:"--no-log",value:""}]),e.log.env,!1);const r=e.key,i=t(v.value)[`editor-${e.key}`].getValue();await mn({content:i,path:r}),y.value[r]&&(y.value[r].content=i),e.log.content="",e.log.isRunning=!0,e.log.id=await _n({cmd:n}),e.log.runEnd=!0}catch{}finally{}}async function ge(e,n){ne.value=n||"plaintext",x.value=!0;try{const r=await vn({path:encodeURIComponent(e)});x.value=!1,r?y.value[e]={content:r,language:n}:(y.value[e]={content:"",language:n},f.info(_("page.code.fileContentIsEmptyMsg")))}catch{U("content")}finally{x.value=!1}}function H(e){v.value[`editor-${e}`]&&(v.value[`editor-${e}`].dispose(),delete t(v.value)[`editor-${e}`])}function U(e){switch(e){case"content":p.value=null,h.value="";break}}function A({code:e,result:n}){const r=p.value;!r||!r.log||(u.value.forEach(i=>{n.runId===i.log.id&&(i.log.content+=n.log||"",i.log.isRunning=!!e,n.over&&(i.log.isRunning=!1,i.log.id=""),i.key!==r.key&&(i.log.hasNew=!0))}),We(()=>{const i=p.value;i.log.content&&Y().then(()=>{i.log.isLogReachBottom&&d.value&&d.value[`log-${i.key}`]&&d.value[`log-${i.key}`].scrollTo({position:"bottom",silent:!0})})}))}return De(()=>{z=dn(),z?.off("runLog").on("runLog",A)}),He(()=>{if(u.value.length>0&&u.value.forEach(e=>{H(e.key)}),d.value)for(const e in d.value){const n=d.value[e];n&&n.scrollbarRef?.containerRef&&n.scrollbarRef.containerRef.removeEventListener("scroll",S)}z?.off("runLog",A)}),(e,n)=>{const r=Tn,i=Q,w=fn,O=nn,W=tn,fe=on,me=un,ve=ln,ye=$n,j=je,he=an,ke=sn,be=Ke,xe=Rn,we=qe,Re=X,Ce=Ge,E=Je,T=Qe,K=Xe,q=Ye,ze=Ze,$e=Ne,Se=Q,Ee=X,Te=en,Le=Ie;return s(),c(Le,{"content-full":"","no-header":""},{default:o(()=>[l(E,{bordered:!t(m),class:"tab-panel",style:{height:"100%","word-break":"unset"},"content-style":"padding: 0; height: 100%"},{default:o(()=>[l(Ce,{"global-config":{animation:{exclude:["ripple"]}}},{default:o(()=>[l(G,{name:"fade",mode:"out-in",appear:""},{default:o(()=>[t(u).length>0?(s(),c(be,{key:0,value:t(h),"onUpdate:value":n[0]||(n[0]=a=>Ue(h)?h.value=a:null),"drag-sort":"",style:{height:"100%",width:"100%","border-radius":"6px"},theme:"card",addable:t(u).length>0,onDragSort:ae,onChange:ie,onAdd:n[1]||(n[1]=a=>D()),onRemove:se},{default:o(()=>[(s(!0),k(Oe,null,Ae(t(u),a=>(s(),c(ke,{key:a.key,value:a.key,removable:"",style:{height:"100%",width:"100%",padding:"0"},"destroy-on-hide":!1},{label:o(()=>[t(m)?(s(),c(W,{key:1,style:{gap:"4px"}},{default:o(()=>[a.log.isRunning?(s(),c(i,{key:0,size:16},{default:o(()=>[l(r,{style:{"vertical-align":"middle"}})]),_:1})):(s(),k("div",In,[a.log.runEnd?(s(),c(i,{key:0,size:16},{default:o(()=>[l(w,{style:{color:"var(--app-success-color)","vertical-align":"middle"}})]),_:1})):(s(),c(i,{key:1,size:16},{default:o(()=>[(s(),c(Z(a.prefix),{style:{"vertical-align":"middle"}}))]),_:2},1024))])),L(" "+R(a.label)+" ",1),a.log.hasNew?(s(),c(O,{key:2,dot:"",offset:[2,-1]})):I("",!0)]),_:2},1024)):(s(),c(fe,{key:0,placement:"top-start",trigger:"hover",animated:!1,"show-arrow":!1,delay:1e3,style:{"border-radius":"6px",padding:"2px 6px","font-size":"10px","margin-bottom":"-1em"}},{trigger:o(()=>[l(W,{style:{gap:"4px"}},{default:o(()=>[a.log.isRunning?(s(),c(i,{key:0,size:16},{default:o(()=>[l(r,{style:{"vertical-align":"middle"}})]),_:1})):(s(),k("div",Ln,[a.log.runEnd?(s(),c(i,{key:0,size:16},{default:o(()=>[l(w,{style:{color:"var(--app-success-color)","vertical-align":"middle"}})]),_:1})):(s(),c(i,{key:1,size:16},{default:o(()=>[(s(),c(Z(a.prefix),{style:{"vertical-align":"middle"}}))]),_:2},1024))])),L(" "+R(a.label)+" ",1),a.log.hasNew?(s(),c(O,{key:2,dot:"",offset:[2,-1]})):I("",!0)]),_:2},1024)]),default:o(()=>[M("span",null,R(a.key),1)]),_:2},1024))]),default:o(()=>[l(G,{name:"fade",mode:"out-in",appear:""},{default:o(()=>[l(he,{direction:t(m)?"vertical":"horizontal","default-size":.7,max:1,min:0},{1:o(()=>[l(t(Ve),{ref_for:!0,ref:b=>t(v)[`editor-${a.key}`]=b,style:{height:"100%",padding:"0","z-index":"999999"},value:{content:t(y)[a.key].content,language:t(y)[a.key].language},"font-size":t(F)},null,8,["value","font-size"]),l(me,{show:t(x)},null,8,["show"])]),2:o(()=>[a.log.content?(s(),c(ve,{key:0,ref_for:!0,ref:b=>t(d)[`log-${a.key}`]=b,log:a.log.content,"font-size":t(F),"line-height":1.5,language:"naive-log",style:J({padding:t(m)?"1em 0.6em":"1em 0 1em 1.6em",width:"100%",height:"100%"})},null,8,["log","font-size","style"])):(s(),c(j,{key:1,class:"min-h-200px flex-jc-ac h-full",size:"huge","show-description":!0,description:t(_)("page.code.noLog")},{icon:o(()=>[l(i,null,{default:o(()=>[l(ye)]),_:1})]),_:1},8,["description"]))]),_:2},1032,["direction"])]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["value","addable"])):(s(),c(j,{key:1,class:"min-h-200px flex-jc-ac h-full",size:"huge","show-icon":!1,"show-description":!1},{extra:o(()=>[l(Re,{block:"",strong:"",size:"large",type:"primary",secondary:"",focusable:!1,style:{"border-radius":"6px",height:"160px",width:"160px"},onClick:n[2]||(n[2]=a=>D())},{default:o(()=>[l(we,{vertical:"",style:{gap:"20px"}},{default:o(()=>[l(i,{size:60},{default:o(()=>[l(xe,{style:{"vertical-align":"baseline"}})]),_:1}),L(" "+R(t(_)("page.code.createWorkspace")),1)]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1},8,["bordered"]),t(h)?(s(),c(Te,{key:0,class:"sticky-tool",type:"compact",shape:"round",style:J(t(m)?"right: 14px; bottom: 14px":"right: 24px; bottom: 24px"),"on-click":te},{default:o(()=>[l(T,{icon:re,label:"1",popup:t(p).log.isRunning?t(_)("page.code.stopBtn"):t(_)("page.code.runBtn")},null,8,["popup"]),l(T,{icon:ce,label:"2","popup-props":{trigger:t(m)?"click":"hover",placement:t(m)?"top":"left-bottom",overlayInnerStyle:{padding:"0"}}},{popup:o(()=>[l(E,{bordered:!1,style:{width:"100%",height:"100%"},"content-style":"width: 100%; height: 100%; padding: 12px"},{default:o(()=>[l(ze,{type:"segment",style:{"min-width":"260px"},animated:""},{default:o(()=>[l(q,{name:"1",tab:t(_)("page.code.optionConfig")},{default:o(()=>[l(K,{value:t(p).log.option,"onUpdate:value":n[3]||(n[3]=a=>t(p).log.option=a),preset:"pair","show-sort-button":"","key-placeholder":t(_)("file.run.paramKeyPlaceholder"),"value-placeholder":t(_)("file.run.paramValuePlaceholder")},null,8,["value","key-placeholder","value-placeholder"])]),_:1},8,["tab"]),l(q,{name:"2",tab:t(_)("page.code.envConfig")},{default:o(()=>[l(K,{value:t(p).log.env,"onUpdate:value":n[4]||(n[4]=a=>t(p).log.env=a),preset:"pair","show-sort-button":"","key-placeholder":t(_)("file.run.paramKeyPlaceholder"),"value-placeholder":t(_)("file.run.paramValuePlaceholder")},null,8,["value","key-placeholder","value-placeholder"])]),_:1},8,["tab"])]),_:1})]),_:1})]),_:1},8,["popup-props"]),l(T,{icon:ue,label:"3","popup-props":{trigger:t(m)?"click":"hover",placement:"left-bottom",overlayInnerStyle:{padding:"0"}}},{popup:o(()=>[l(E,{bordered:!1,style:{width:"100%",height:"100%"},"content-style":"width: 100%; height: 100%; padding: 8px"},{default:o(()=>[l(t(Be),{popover:!1,editor:t(p)?t(v)[`editor-${t(p).key}`]:null},{trigger:o(({show:a,toggleShow:b})=>[l(Ee,{strong:"",quaternary:"",size:"small",type:a?"primary":"tertiary",style:{padding:"6px"},focusable:!1,onClick:b},{default:o(()=>[l(Se,{size:"18"},{default:o(()=>[l($e,{style:{"vertical-align":"baseline"}})]),_:1})]),_:2},1032,["type","onClick"])]),_:1},8,["editor"])]),_:1})]),_:1},8,["popup-props"])]),_:1},8,["style"])):I("",!0),l(t(yn),{ref_key:"selectCodeFileRef",ref:P,onOnConfirmSelect:pe},null,512)]),_:1})}}}),Zn=pn(Bn,[["__scopeId","data-v-2ddde058"]]);export{Zn as default};
