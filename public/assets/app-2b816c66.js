import{_ as Te}from"./app-564c9d98.js";import{az as P,aq as k,T as i,a5 as M,aA as Ee,G as Ie,A as v,aB as Be,aC as Le,aD as Ne,S as p,V as o,F as n,ao as Pe,W as l,ar as B,ax as Me,aE as Ve,ab as J,aF as De,at as Fe,aG as Ae,a7 as He,aH as Ue,aI as Oe,aJ as We,a9 as Q,aK as Ke,aw as y,aL as je,as as z,aM as qe,aN as L,aO as X,aP as Ge,ak as Y,aQ as Je,aR as Qe,aS as Xe,aT as Ye,aU as Ze,aV as en,ad as x,aW as Z}from"./vendor-ca0e89fa.js";import{b as nn,d as tn,_ as on,e as ln}from"./app-dbd4b5f0.js";import{g as an,r as N,_ as sn,I as rn,f as cn,s as un}from"./app-98c02d27.js";import{I as pn}from"./app-277a848f.js";import{_ as dn,C as gn,a as ee}from"./app-3a6dce02.js";import{_ as _n}from"./app-d5f17470.js";import{s as fn,g as mn}from"./app-2733701f.js";import{S as vn}from"./app-62c35e01.js";import{u as yn}from"./app-40fcbbd5.js";import{u as hn}from"./app-29b727ba.js";import{u as kn}from"./app-80f155ef.js";import"./app-240cd649.js";import"./vendor-6c6d1442.js";import"./app-80666950.js";import"./app-f0aa7dbe.js";import"./app-64262975.js";import"./app-c16619b4.js";import"./app-a04700e8.js";import"./app-52337bf4.js";import"./app-a38d7e6b.js";import"./app-67d12428.js";import"./app-f44d7ba5.js";const bn={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"};function xn(S,f){return i(),k("svg",bn,f[0]||(f[0]=[M("path",{fill:"currentColor",d:"M13 19.3v-6.7l6-3.4V13c.7 0 1.4.1 2 .4V7.5c0-.4-.2-.7-.5-.9l-7.9-4.4c-.2-.1-.4-.2-.6-.2s-.4.1-.6.2L3.5 6.6c-.3.2-.5.5-.5.9v9c0 .4.2.7.5.9l7.9 4.4c.2.1.4.2.6.2s.4-.1.6-.2l.9-.5c-.3-.6-.4-1.3-.5-2M12 4.2l6 3.3l-2 1.1l-5.9-3.4zm-1 15.1l-6-3.4V9.2l6 3.4zm1-8.5L6 7.5l2-1.2l6 3.5zm8 4.2v3h3v2h-3v3h-2v-3h-3v-2h3v-3z"},null,-1)]))}const wn=P({name:"mdi-package-variant-closed-plus",render:xn}),Cn={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"};function Rn(S,f){return i(),k("svg",Cn,f[0]||(f[0]=[M("path",{fill:"currentColor",d:"M8.27 3L3 8.27v7.46L8.27 21h7.46C17.5 19.24 21 15.73 21 15.73V8.27L15.73 3M9.1 5h5.8L19 9.1v5.8L14.9 19H9.1L5 14.9V9.1m6 5.9h2v2h-2zm0-8h2v6h-2z"},null,-1)]))}const zn=P({name:"mdi-alert-octagon-outline",render:Rn}),Sn={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"};function $n(S,f){return i(),k("svg",Sn,f[0]||(f[0]=[Ee('<g stroke="currentColor"><circle cx="12" cy="12" r="9.5" fill="none" stroke-linecap="round" stroke-width="3"><animate attributeName="stroke-dasharray" calcMode="spline" dur="1.5s" keySplines="0.42,0,0.58,1;0.42,0,0.58,1;0.42,0,0.58,1" keyTimes="0;0.475;0.95;1" repeatCount="indefinite" values="0 150;42 150;42 150;42 150"></animate><animate attributeName="stroke-dashoffset" calcMode="spline" dur="1.5s" keySplines="0.42,0,0.58,1;0.42,0,0.58,1;0.42,0,0.58,1" keyTimes="0;0.475;0.95;1" repeatCount="indefinite" values="0;-16;-59;-59"></animate></circle><animateTransform attributeName="transform" dur="2s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"></animateTransform></g>',1)]))}const Tn=P({name:"svg-spinners-ring-resize",render:$n}),En={key:1},In={key:1,style:{"font-size":"18px"}},Bn={key:1},Ln={key:1,style:{"font-size":"18px"}},Nn=Ie({__name:"index",setup(S){const{message:f}=tn(),{getIsMobile:h}=yn(),{t:d}=nn(),ne=v("fade-slide");hn(ne);const V=v(),m=v({}),g=v({});let $=null;const D=v(h.value?14:16),c=v([]),_=v({}),b=v(""),C=v(!1),u=v(null);function te(e){switch(e.item.label){case"1":case d("page.code.runBtn"):case d("page.code.stopBtn"):de();break}}async function F(){try{V.value?.open()}catch{}}function oe(e){if(!u.value)return;const t=u.value.key;e!==t&&(_.value[t].content=n(m.value)[`editor-${t}`].getValue(),_.value[t].state=n(m.value)[`editor-${t}`]?.getState())}function A(e){c.value.forEach(t=>{t.key===e&&(t.log.runEnd&&!t.log.isRunning&&(t.log.runEnd=!1),t.log.hasNew=!1,b.value=e,_.value[e].state&&setTimeout(()=>{n(m.value)[`editor-${e}`]?.restoreState(_.value[e].state)},500),u.value=t,delete u.value.children)}),setTimeout(pe,800)}function le(e){c.value.forEach((t,s)=>{t.key===e&&(c.value.splice(s,1),delete _.value[t.key],delete m.value[`editor-${t.key}`],c.value.length>0?b.value===e&&A(c.value[c.value.length-1].key):(O("content"),U(t.key)))})}function ae(e){[c.value[e.currentIndex],c.value[e.targetIndex]]=[c.value[e.targetIndex],c.value[e.currentIndex]]}function H(e){oe(e),A(e)}function ie(e){le(e.value)}function se(){return x(y,{size:24,style:"margin-top: 4px"},{default:()=>x(u.value.log.isRunning?rn:pn)})}function re(){return x(y,{size:22,style:"margin-top: 5px"},{default:()=>x(_n)})}function ce(){return x(y,{size:22,style:"margin-top: 5px"},{default:()=>x(ee)})}async function ue(e){c.value.find(s=>s.key===e.key)||(await ge(e.key,e.language),c.value.push({...e,log:{content:"",newContent:"",id:"",runEnd:!1,isRunning:!1,hasNew:!1,env:[],option:[],isLogReachBottom:!0}})),H(e.key)}const T=Be(e=>{const t=u.value;if(g.value&&g.value[`log-${t.key}`]){const s=g.value[`log-${t.key}`].$el.clientHeight,r=e.target.scrollTop,R=e.target.scrollHeight;t.log.isLogReachBottom=s+r>=R-10}},500);function pe(){Z().then(()=>{const e=u.value;if(g.value&&g.value[`log-${e.key}`]&&g.value[`log-${e.key}`].scrollbarRef?.containerRef){const t=g.value[`log-${e.key}`].scrollbarRef?.containerRef;t.removeEventListener("scroll",T),t.addEventListener("scroll",T)}})}async function de(){const e=u.value;let t;if(e.log.isRunning)await un({path:e.key}),e.log.isRunning=!1;else try{t=kn(e.key,e.log.option.concat([{key:"--no-log",value:""}]),e.log.env,!1);const s=e.key,r=n(m.value)[`editor-${e.key}`].getValue();await fn({content:r,path:s}),_.value[s]&&(_.value[s].content=r),e.log.content="",e.log.isRunning=!0,e.log.id=await cn({cmd:t}),e.log.runEnd=!0}catch{}finally{}}async function ge(e,t){C.value=!0;try{const s=await mn({path:encodeURIComponent(e)});C.value=!1,s?_.value[e]={content:s,language:t,state:null}:(_.value[e]={content:"",language:t,state:null},f.info(d("page.code.fileContentIsEmptyMsg")))}catch{O("content")}finally{C.value=!1}}function U(e){m.value[`editor-${e}`]&&(m.value[`editor-${e}`].dispose(),delete n(m.value)[`editor-${e}`])}function O(e){switch(e){case"content":u.value=null,b.value="";break}}function W({code:e,result:t}){const s=u.value;!s||!s.log||(c.value.forEach(r=>{t.runId===r.log.id&&(r.log.content+=t.log||"",r.log.isRunning=!!e,t.over&&(r.log.isRunning=!1,r.log.id=""),r.key!==s.key&&(r.log.hasNew=!0))}),Pe(()=>{const r=u.value;r.log.content&&Z().then(()=>{r.log.isLogReachBottom&&g.value&&g.value[`log-${r.key}`]&&g.value[`log-${r.key}`].scrollTo({position:"bottom",silent:!0})})}))}return Le(()=>{$=an(),$?.off(N).on(N,W)}),Ne(()=>{if(c.value.length>0&&c.value.forEach(e=>{U(e.key)}),g.value)for(const e in g.value){const t=g.value[e];t&&t.scrollbarRef?.containerRef&&t.scrollbarRef.containerRef.removeEventListener("scroll",T)}$?.off(N,W)}),(e,t)=>{const s=Tn,r=sn,R=Ge,K=qe,_e=je,fe=on,me=We,ve=zn,j=Ke,ye=Oe,he=Ue,ke=De,be=wn,xe=Je,we=Y,Ce=Ve,E=Me,I=Xe,q=en,G=Ze,Re=Ye,ze=Y,Se=Qe,$e=Te;return i(),p($e,{"content-full":"","no-header":""},{default:o(()=>[l(E,{bordered:!n(h),class:"tab-panel",style:{height:"100%","word-break":"unset"},"content-style":"padding: 0; height: 100%"},{default:o(()=>[l(Ce,{"global-config":{animation:{exclude:["ripple"]}}},{default:o(()=>[l(J,{name:"fade",mode:"out-in",appear:""},{default:o(()=>[n(c).length>0?(i(),p(ke,{key:0,value:n(b),"onUpdate:value":t[0]||(t[0]=a=>Fe(b)?b.value=a:null),"drag-sort":"",style:{height:"100%",width:"100%","border-radius":"6px"},theme:"card",addable:n(c).length>0,onDragSort:ae,onChange:H,onAdd:t[1]||(t[1]=a=>F()),onRemove:ie},{default:o(()=>[(i(!0),k(Ae,null,He(n(c),a=>(i(),p(he,{key:a.key,value:a.key,removable:"",style:{height:"100%",width:"100%",padding:"0"},"destroy-on-hide":!1},{label:o(()=>[n(h)?(i(),p(K,{key:1,style:{gap:"4px"}},{default:o(()=>[a.log.isRunning?(i(),p(n(y),{key:0,size:16},{default:o(()=>[l(s,{style:{"vertical-align":"middle"}})]),_:1})):(i(),k("div",Bn,[a.log.runEnd?(i(),p(n(y),{key:0,size:16},{default:o(()=>[l(r,{style:{color:"var(--app-success-color)","vertical-align":"middle"}})]),_:1})):(i(),k("div",Ln,[(i(),p(X(a.prefix),{style:{"vertical-align":"-0.15em"}}))]))])),L(" "+z(a.label)+" ",1),a.log.hasNew?(i(),p(R,{key:2,dot:"",offset:[2,-1]})):B("",!0)]),_:2},1024)):(i(),p(_e,{key:0,placement:"top-start",trigger:"hover",animated:!1,"show-arrow":!1,delay:1e3,style:{"border-radius":"6px",padding:"2px 6px","font-size":"10px","margin-bottom":"-1em"}},{trigger:o(()=>[l(K,{style:{gap:"4px"}},{default:o(()=>[a.log.isRunning?(i(),p(n(y),{key:0,size:16},{default:o(()=>[l(s,{style:{"vertical-align":"middle"}})]),_:1})):(i(),k("div",En,[a.log.runEnd?(i(),p(n(y),{key:0,size:16},{default:o(()=>[l(r,{style:{color:"var(--app-success-color)","vertical-align":"middle"}})]),_:1})):(i(),k("div",In,[(i(),p(X(a.prefix),{style:{"vertical-align":"-0.15em"}}))]))])),L(" "+z(a.label)+" ",1),a.log.hasNew?(i(),p(R,{key:2,dot:"",offset:[2,-1]})):B("",!0)]),_:2},1024)]),default:o(()=>[M("span",null,z(a.key),1)]),_:2},1024))]),default:o(()=>[l(J,{name:"fade",mode:"out-in",appear:""},{default:o(()=>[l(ye,{direction:n(h)?"vertical":"horizontal","default-size":.7,max:1,min:0},{1:o(()=>[l(n(dn),{ref_for:!0,ref:w=>n(m)[`editor-${a.key}`]=w,style:{height:"calc(-32px + 100%)",padding:"0","z-index":"999999"},value:{content:n(_)[a.key].content,language:n(_)[a.key].language},"font-size":n(D),"mobile-keyboard-control-widgt-props":{bottom:230}},null,8,["value","font-size"]),l(fe,{show:n(C)},null,8,["show"])]),2:o(()=>[a.log.content?(i(),p(me,{key:0,ref_for:!0,ref:w=>n(g)[`log-${a.key}`]=w,log:a.log.content,"font-size":n(D),"line-height":1.5,language:"naive-log",style:Q({padding:n(h)?"1em 0.6em":"1em 0 1em 1.6em",width:"100%",height:"calc(-32px + 100%)"})},null,8,["log","font-size","style"])):(i(),p(j,{key:1,class:"min-h-200px flex-jc-ac h-full",size:"huge","show-description":!0,description:n(d)("page.code.noLog")},{icon:o(()=>[l(n(y),null,{default:o(()=>[l(ve)]),_:1})]),_:1},8,["description"]))]),_:2},1032,["direction"])]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["value","addable"])):(i(),p(j,{key:1,class:"min-h-200px flex-jc-ac h-full",size:"huge","show-icon":!1,"show-description":!1},{extra:o(()=>[l(we,{block:"",strong:"",size:"large",type:"primary",secondary:"",focusable:!1,style:{"border-radius":"6px",height:"160px",width:"160px"},onClick:t[2]||(t[2]=a=>F())},{default:o(()=>[l(xe,{vertical:"",style:{gap:"20px"}},{default:o(()=>[l(n(y),{size:60},{default:o(()=>[l(be)]),_:1}),L(" "+z(n(d)("page.code.createWorkspace")),1)]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1},8,["bordered"]),n(b)?(i(),p(Se,{key:0,class:"sticky-tool",type:n(h)?"compact":void 0,style:Q({right:n(h)?"10px":"28px",bottom:n(h)?"10px":"30px",borderRadius:"1em"}),onClick:te},{default:o(()=>[l(I,{icon:se,label:n(u).log.isRunning?n(d)("page.code.stopBtn"):n(d)("page.code.runBtn")},null,8,["label"]),l(I,{icon:re,label:n(d)("page.code.debugStickyConfig"),"popup-props":{trigger:"click",placement:"left-bottom",overlayInnerStyle:{padding:"0"}}},{popup:o(()=>[l(E,{bordered:!1,style:{width:"100%",height:"100%"},"content-style":"width: 100%; height: 100%; padding: 12px"},{default:o(()=>[l(Re,{type:"segment",style:{"min-width":"260px"},animated:""},{default:o(()=>[l(G,{name:"1",tab:n(d)("page.code.optionConfig")},{default:o(()=>[l(q,{value:n(u).log.option,"onUpdate:value":t[3]||(t[3]=a=>n(u).log.option=a),preset:"pair","show-sort-button":"","key-placeholder":n(d)("file.run.paramKeyPlaceholder"),"value-placeholder":n(d)("file.run.paramValuePlaceholder")},null,8,["value","key-placeholder","value-placeholder"])]),_:1},8,["tab"]),l(G,{name:"2",tab:n(d)("page.code.envConfig")},{default:o(()=>[l(q,{value:n(u).log.env,"onUpdate:value":t[4]||(t[4]=a=>n(u).log.env=a),preset:"pair","show-sort-button":"","key-placeholder":n(d)("file.run.paramKeyPlaceholder"),"value-placeholder":n(d)("file.run.paramValuePlaceholder")},null,8,["value","key-placeholder","value-placeholder"])]),_:1},8,["tab"])]),_:1})]),_:1})]),_:1},8,["label"]),l(I,{icon:ce,label:n(d)("page.code.debugStickyEditorToolbox"),"popup-props":{trigger:"click",placement:"left-bottom",overlayInnerStyle:{padding:"0"}}},{popup:o(()=>[l(E,{bordered:!1,style:{width:"100%",height:"100%"},"content-style":"width: 100%; height: 100%; padding: 8px"},{default:o(()=>[l(n(gn),{popover:!1,editor:n(m)[`editor-${n(u).key}`]},{trigger:o(({show:a,toggleShow:w})=>[l(ze,{strong:"",quaternary:"",size:"small",type:a?"primary":"tertiary",style:{padding:"6px"},focusable:!1,onClick:w},{default:o(()=>[l(n(y),{size:"18"},{default:o(()=>[l(n(ee))]),_:1})]),_:2},1032,["type","onClick"])]),_:1},8,["editor"])]),_:1})]),_:1},8,["label"])]),_:1},8,["type","style"])):B("",!0),l(n(vn),{ref_key:"selectCodeFileRef",ref:V,onOnConfirmSelect:ue},null,512)]),_:1})}}}),lt=ln(Nn,[["__scopeId","data-v-87d30c8a"]]);export{lt as default};
