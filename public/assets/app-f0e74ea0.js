import{h as ue,n as xe,o as be,d as _e,c as fe,i as me,p as we}from"./app-0e26742b.js";import{k as ke,f as Ce,l as Te,m as $e}from"./app-651c98d4.js";import{u as E,g as re}from"./app-477705b9.js";import{u as J}from"./app-3da0bfa2.js";import{d as Q,b as K,e as Ie}from"./app-d0ea65e6.js";import{G as X,r as Y,J as Z,F as e,a3 as T,a4 as $,a5 as t,a6 as a,ak as W,aQ as x,ah as b,aD as d,al as G,aF as F,a$ as ee,aP as z,ap as M,aR as te,aw as ae,bu as ze,bv as Pe,bB as Se,bg as ce,ba as ve,bC as Ne,aI as ye,bD as oe,b6 as le,aH as de,bx as ne,by as se,av as Ue,b5 as De,bE as Re,bF as Fe}from"./vendor-d56b0496.js";const Me={style:{"vertical-align":"-5px",padding:"0 2px"}},Be=X({__name:"Create",emits:["onCreated"],setup(ie,{expose:B,emit:O}){const A=O,{getIsMobile:L}=J(),i=Y({show:!1,loading:!1,data:{type:1,name:"",dir:""},directoryTreeData:[],currentTreeSelectOption:null}),{show:c,loading:p,data:l,directoryTreeData:r,currentTreeSelectOption:y}=Z(i),{message:I}=Q(),{t:o}=K();async function j(_){_&&(y.value=_,l.value.dir=_.key),c.value=!0,p.value=!0,r.value=await re(),p.value=!1}function U(_,n,s){switch(s.action){case"select":s.node&&(y.value=s.node,l.value.dir=s.node.key);break;case"delete":case"clear":case"unselect":y.value=null,l.value.dir="";break}}function g(){return M(x,{style:"vertical-align: 0"},{default:()=>M(ue)})}async function P(){try{await ke(l.value),I.success(o("file.create.success")),A("onCreated",l.value),v()}catch{}finally{k()}}function v(){c.value=!1,k()}function k(){r.value=[],y.value=null,l.value={type:1,name:"",dir:""}}return B({open:j}),(_,n)=>{const s=xe,m=te,u=ae,f=ze,w=be,S=Pe,h=Se,D=ce,R=ve,N=Ne,q=ye,V=oe,pe=le,H=de,ge=ne,he=se;return e(L)?(T(),$(he,{key:1,show:e(c),"onUpdate:show":n[8]||(n[8]=C=>F(c)?c.value=C:null),height:"100%",placement:"bottom","auto-focus":!1,onAfterLeave:v},{default:t(()=>[a(ge,{closable:"","header-style":"padding: 16px 12px","body-content-style":"padding: 4px 12px","footer-style":"padding: 16px 24px"},{header:t(()=>[a(m,{style:{gap:"4px"}},{default:t(()=>[a(e(x),{size:26,color:"var(--app-primary-color)"},{default:t(()=>[(T(),$(ee(e(ue))))]),_:1}),a(pe,{style:{height:"100%","max-width":"190px"}},{tooltip:t(()=>[b("span",null,d(e(o)("file.create.title")),1)]),default:t(()=>[b("span",Me,d(e(o)("file.create.title")),1)]),_:1})]),_:1})]),footer:t(()=>[a(H,{inline:"",wrap:!1,justify:"space-between",style:{gap:"0px",width:"100%"}},{default:t(()=>[a(u,{tertiary:"",focusable:!1,style:{width:"50%","border-radius":"8px","margin-left":"-4px"},onClick:v},{default:t(()=>[z(d(e(o)("common.cancelText")),1)]),_:1}),a(u,{secondary:"",type:"primary",focusable:!1,disabled:!e(y)||!e(l).name,style:{width:"50%","border-radius":"8px","margin-left":"8px"},onClick:n[7]||(n[7]=C=>P())},{default:t(()=>[z(d(e(o)("common.okText")),1)]),_:1},8,["disabled"])]),_:1})]),default:t(()=>[a(q,{bordered:!1,style:{height:"100%","word-break":"unset"},"content-style":"padding: 0"},{default:t(()=>[a(N,{model:e(l),"label-placement":"left",style:{"padding-top":"1em"}},{default:t(()=>[a(h,{label:e(o)("file.create.form.type"),"show-label":!1,path:"type",style:{"padding-bottom":"5px"}},{default:t(()=>[a(S,{"x-gap":"24px",cols:2},{default:t(()=>[a(f,null,{default:t(()=>[a(u,{secondary:"",block:"",strong:"",focusable:!1,class:W(["type-card select-none",[e(l).type===1?"selected":""]]),style:{height:"140px",width:"140px"},onClick:n[4]||(n[4]=C=>e(l).type=1)},{default:t(()=>[a(m,{vertical:""},{default:t(()=>[a(e(x),{size:48,color:e(l).type===1?"var(--app-primary-color)":void 0},{default:t(()=>[a(s,{style:{"vertical-align":"baseline"}})]),_:1},8,["color"]),b("strong",{style:G({fontSize:"16px",fontWeight:"550",color:e(l).type===1?"var(--app-primary-color)":void 0})},d(e(o)("file.create.form.typeFile")),5)]),_:1})]),_:1},8,["class"])]),_:1}),a(f,null,{default:t(()=>[a(u,{secondary:"",block:"",strong:"",focusable:!1,class:W(["type-card select-none",[e(l).type===0?"selected":""]]),style:{height:"140px",width:"140px"},onClick:n[5]||(n[5]=C=>e(l).type=0)},{default:t(()=>[a(m,{vertical:""},{default:t(()=>[a(e(x),{size:48,color:e(l).type===0?"var(--app-primary-color)":void 0},{default:t(()=>[a(w,{style:{"vertical-align":"baseline"}})]),_:1},8,["color"]),b("strong",{style:G({fontSize:"16px",fontWeight:"550",color:e(l).type===0?"var(--app-primary-color)":void 0})},d(e(o)("file.create.form.typeFolder")),5)]),_:1})]),_:1},8,["class"])]),_:1})]),_:1})]),_:1},8,["label"]),a(h,{label:e(o)("file.create.form.path"),path:"dir"},{default:t(()=>[a(D,{size:"large","default-value":e(y)?.key,clearable:"","show-path":!0,separator:" / ","consistent-menu-width":!1,loading:e(p),options:e(r),"on-update:expanded-keys":e(E),"on-update:value":U},null,8,["default-value","loading","options","on-update:expanded-keys"])]),_:1},8,["label"]),a(h,{label:e(o)("file.create.form.name"),path:"name"},{default:t(()=>[a(R,{value:e(l).name,"onUpdate:value":n[6]||(n[6]=C=>e(l).name=C),clearable:"",size:"large",placeholder:e(o)("file.create.form.namePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1})]),_:1},8,["show"])):(T(),$(V,{key:0,show:e(c),"onUpdate:show":n[3]||(n[3]=C=>F(c)?c.value=C:null),preset:"dialog","auto-focus":!1,icon:g,title:e(o)("file.create.title"),"positive-text":e(o)("common.okText"),"negative-text":e(o)("common.cancelText"),"positive-button-props":{disabled:!e(y)||!e(l).name},"negative-button-props":{ghost:!1,tertiary:!0},"on-close":v,"on-mask-click":v,onNegativeClick:v,onPositiveClick:P},{default:t(()=>[a(q,{bordered:!1,style:{height:"100%","word-break":"unset"},"content-style":"padding: 0"},{default:t(()=>[a(N,{model:e(l),"label-placement":"left",style:{"padding-top":"1em"}},{default:t(()=>[a(h,{label:e(o)("file.create.form.type"),"show-label":!1,path:"type",style:{"padding-bottom":"5px"}},{default:t(()=>[a(S,{"x-gap":"32px",cols:2},{default:t(()=>[a(f,null,{default:t(()=>[a(u,{secondary:"",block:"",strong:"",focusable:!1,class:W(["type-card select-none",[e(l).type===1?"selected":""]]),style:{height:"180px",width:"180px"},onClick:n[0]||(n[0]=C=>e(l).type=1)},{default:t(()=>[a(m,{vertical:""},{default:t(()=>[a(e(x),{size:64,color:e(l).type===1?"var(--app-primary-color)":void 0},{default:t(()=>[a(s,{style:{"vertical-align":"baseline"}})]),_:1},8,["color"]),b("strong",{style:G({fontSize:"18px",color:e(l).type===1?"var(--app-primary-color)":void 0})},d(e(o)("file.create.form.typeFile")),5)]),_:1})]),_:1},8,["class"])]),_:1}),a(f,null,{default:t(()=>[a(u,{secondary:"",block:"",strong:"",focusable:!1,class:W(["type-card select-none",[e(l).type===0?"selected":""]]),style:{height:"180px",width:"180px"},onClick:n[1]||(n[1]=C=>e(l).type=0)},{default:t(()=>[a(m,{vertical:""},{default:t(()=>[a(e(x),{size:64,color:e(l).type===0?"var(--app-primary-color)":void 0},{default:t(()=>[a(w,{style:{"vertical-align":"baseline"}})]),_:1},8,["color"]),b("strong",{style:G({fontSize:"18px",color:e(l).type===0?"var(--app-primary-color)":void 0})},d(e(o)("file.create.form.typeFolder")),5)]),_:1})]),_:1},8,["class"])]),_:1})]),_:1})]),_:1},8,["label"]),a(h,{label:e(o)("file.create.form.path"),path:"dir"},{default:t(()=>[a(D,{"default-value":e(y)?.key,clearable:"","show-path":!0,separator:" / ","consistent-menu-width":!1,loading:e(p),options:e(r),"on-update:expanded-keys":e(E),"on-update:value":U},null,8,["default-value","loading","options","on-update:expanded-keys"])]),_:1},8,["label"]),a(h,{label:e(o)("file.create.form.name"),path:"name"},{default:t(()=>[a(R,{value:e(l).name,"onUpdate:value":n[2]||(n[2]=C=>e(l).name=C),clearable:"",placeholder:e(o)("file.create.form.namePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["show","title","positive-text","negative-text","positive-button-props"]))}}}),Qe=Ie(Be,[["__scopeId","data-v-ed663c04"]]),Oe={style:{"vertical-align":"-5px",padding:"0 2px"}},Ke=X({__name:"Move",emits:["onMoved"],setup(ie,{expose:B,emit:O}){const A=O,L=Y({show:!1,loading:!1,originPath:"",originName:"",targetPath:"",targetName:"",directoryTreeData:[],currentTreeSelectOption:null}),{show:i,loading:c,originPath:p,originName:l,targetPath:r,targetName:y,directoryTreeData:I,currentTreeSelectOption:o}=Z(L),{getIsMobile:j}=J(),{message:U}=Q(),{t:g}=K();async function P(m,u){m&&u&&(l.value=m,p.value=u,i.value=!0,c.value=!0,I.value=await re(),c.value=!1)}function v(m,u,f){switch(f.action){case"select":f.node&&(o.value=f.node);break;case"delete":case"clear":case"unselect":o.value=null;break}}function k(){return M(x,{style:"vertical-align: 0"},{default:()=>M(_e)})}async function _(){try{r.value=`${o.value?o.value.key:""}${p.value.includes("\\")?"\\":"/"}${l.value}`,y.value=l.value,await Ce({path:p.value,newPath:r.value}),U.success(g("file.move.success")),A("onMoved",{origin:{path:p.value,name:l.value},target:{path:r.value,name:y.value}})}catch{}finally{s()}}function n(){i.value=!1,s()}function s(){I.value=[],o.value=null}return B({open:P}),(m,u)=>{const f=ce,w=oe,S=le,h=te,D=ae,R=de,N=ne,q=se;return e(j)?(T(),$(q,{key:1,show:e(i),"onUpdate:show":u[1]||(u[1]=V=>F(i)?i.value=V:null),height:"180px",style:{width:"100%",margin:"0 auto","border-radius":"1em 1em 0 0"},placement:"bottom","auto-focus":!1,onAfterLeave:n},{default:t(()=>[a(N,{closable:"","header-style":"border-bottom: none; padding: 16px 12px","body-content-style":"padding: 4px 12px","footer-style":"border-top: none; padding: 16px 24px"},{header:t(()=>[a(h,{style:{gap:"4px"}},{default:t(()=>[a(e(x),{size:26,color:"var(--app-primary-color)"},{default:t(()=>[(T(),$(ee(e(_e))))]),_:1}),a(S,{style:{height:"100%","max-width":"190px"}},{tooltip:t(()=>[b("span",null,d(e(g)("file.move.title")),1)]),default:t(()=>[b("span",Oe,d(e(g)("file.move.title")),1)]),_:1})]),_:1})]),footer:t(()=>[a(R,{inline:"",wrap:!1,justify:"space-between",style:{gap:"0px",width:"100%"}},{default:t(()=>[a(D,{tertiary:"",focusable:!1,style:{width:"50%","border-radius":"8px","margin-left":"-4px"},onClick:n},{default:t(()=>[z(d(e(g)("common.cancelText")),1)]),_:1}),a(D,{secondary:"",type:"primary",focusable:!1,disabled:!e(o),style:{width:"50%","border-radius":"8px","margin-left":"8px"},onClick:_},{default:t(()=>[z(d(e(g)("common.okText")),1)]),_:1},8,["disabled"])]),_:1})]),default:t(()=>[a(f,{clearable:"",size:"large","show-path":!0,separator:"/","consistent-menu-width":!1,loading:e(c),options:e(I),"on-update:expanded-keys":e(E),"on-update:value":v},null,8,["loading","options","on-update:expanded-keys"])]),_:1})]),_:1},8,["show"])):(T(),$(w,{key:0,show:e(i),"onUpdate:show":u[0]||(u[0]=V=>F(i)?i.value=V:null),preset:"dialog","auto-focus":!1,icon:k,title:e(g)("file.move.title"),"positive-text":e(g)("common.okText"),"positive-button-props":{disabled:!e(o)},"negative-text":e(g)("common.cancelText"),"negative-button-props":{ghost:!1,tertiary:!0},"on-close":n,"on-mask-click":n,onNegativeClick:n,onPositiveClick:_},{default:t(()=>[a(f,{clearable:"","show-path":!0,separator:"/",style:{"margin-top":"4px"},"consistent-menu-width":!1,loading:e(c),options:e(I),"on-update:expanded-keys":e(E),"on-update:value":v},null,8,["loading","options","on-update:expanded-keys"])]),_:1},8,["show","title","positive-text","positive-button-props","negative-text"]))}}}),Ae={style:{"vertical-align":"-5px",padding:"0 2px"}},Xe=X({__name:"Rename",emits:["onRenamed"],setup(ie,{expose:B,emit:O}){const A=O,L=Y({show:!1,name:"",path:"",renameInput:"",inputInstRef:null}),{show:i,name:c,path:p,renameInput:l,inputInstRef:r}=Z(L),{getIsMobile:y}=J(),{message:I}=Q(),{t:o}=K();function j(n,s){n&&(p.value=n,c.value=s||"",i.value=!0,setTimeout(()=>{r.value?.focus()},500))}function U(){return M(x,{style:"vertical-align: 0"},{default:()=>M(fe)})}async function g(){try{await Te({path:p.value,name:l.value}),I.success(o("file.rename.success")),A("onRenamed",{origin:{path:p.value,name:c.value},target:{path:p.value.replace(new RegExp(`${c.value}$`),l.value),name:l.value}})}catch{}finally{_()}}function P(n){l.value=n}function v(n){return!["<",">","?","*","/"].some(s=>n.includes(s))}function k(){i.value=!1,_()}function _(){l.value=""}return B({open:j}),(n,s)=>{const m=ve,u=oe,f=le,w=te,S=ae,h=de,D=ne,R=se;return e(y)?(T(),$(R,{key:1,show:e(i),"onUpdate:show":s[1]||(s[1]=N=>F(i)?i.value=N:null),height:"180px",style:{width:"100%",margin:"0 auto","border-radius":"1em 1em 0 0"},placement:"bottom","auto-focus":!1,onAfterLeave:k},{default:t(()=>[a(D,{closable:"","header-style":"border-bottom: none; padding: 16px 12px","body-content-style":"padding: 4px 12px","footer-style":"border-top: none; padding: 16px 24px"},{header:t(()=>[a(w,{style:{gap:"4px"}},{default:t(()=>[a(e(x),{size:26,color:"var(--app-primary-color)"},{default:t(()=>[(T(),$(ee(e(fe))))]),_:1}),a(f,{style:{height:"100%","max-width":"190px"}},{tooltip:t(()=>[b("span",null,d(e(o)("file.rename.title")),1)]),default:t(()=>[b("span",Ae,d(e(o)("file.rename.title")),1)]),_:1})]),_:1})]),footer:t(()=>[a(h,{inline:"",wrap:!1,justify:"space-between",style:{gap:"0px",width:"100%"}},{default:t(()=>[a(S,{tertiary:"",focusable:!1,style:{width:"50%","border-radius":"8px","margin-left":"-4px"},onClick:k},{default:t(()=>[z(d(e(o)("common.cancelText")),1)]),_:1}),a(S,{secondary:"",type:"primary",focusable:!1,disabled:!e(l),style:{width:"50%","border-radius":"8px","margin-left":"8px"},onClick:g},{default:t(()=>[z(d(e(o)("common.okText")),1)]),_:1},8,["disabled"])]),_:1})]),default:t(()=>[a(m,{ref_key:"inputInstRef",ref:r,clearable:"",size:"large","default-value":e(c),"allow-input":v,onInput:P},null,8,["default-value"])]),_:1})]),_:1},8,["show"])):(T(),$(u,{key:0,show:e(i),"onUpdate:show":s[0]||(s[0]=N=>F(i)?i.value=N:null),preset:"dialog","auto-focus":!1,icon:U,title:e(o)("file.rename.title"),"positive-text":e(o)("common.okText"),"negative-text":e(o)("common.cancelText"),"positive-button-props":{disabled:!e(l)},"negative-button-props":{ghost:!1,tertiary:!0},"on-close":k,"on-mask-click":k,onNegativeClick:k,onPositiveClick:g},{default:t(()=>[a(m,{ref_key:"inputInstRef",ref:r,clearable:"",style:{"margin-top":"4px"},"default-value":e(c),"allow-input":v,onInput:P},null,8,["default-value"])]),_:1},8,["show","title","positive-text","negative-text","positive-button-props"]))}}}),Le={style:{"margin-bottom":"12px"}},je={style:{"vertical-align":"-5px",padding:"0 2px"}},Ve={style:{"margin-bottom":"12px"}},Ye=X({__name:"Upload",emits:["onUploaded"],setup(ie,{expose:B,emit:O}){const A=O,L=Y({show:!1,loading:!1,uploadDir:"",directoryTreeData:[],currentTreeSelectOption:null}),{show:i,loading:c,uploadDir:p,directoryTreeData:l,currentTreeSelectOption:r}=Z(L),{getIsMobile:y}=J(),{message:I}=Q(),{t:o}=K();async function j(_){_&&(r.value=_,p.value=_.key),i.value=!0,c.value=!0,l.value=await re(),c.value=!1}function U(_,n,s){switch(s.action){case"select":s.node&&(r.value=s.node,p.value=s.node.key);break;case"delete":case"clear":case"unselect":r.value=null,p.value="";break}}function g(){return M(x,{style:"vertical-align: 0"},{default:()=>M(me)})}function P({file:_,onFinish:n,onError:s,onProgress:m}){const u=_.name,f=new FormData;f.append("file",_.file),$e({params:f,path:r.value?.key,onUploadProgress:({progress:w})=>{m({percent:Math.ceil((w||0)*100)})}}).then(()=>{I.success(`${u} ${o("file.upload.success")}`),A("onUploaded",p.value),n()}).catch(w=>{I.error(w.message,{keepAliveOnHover:!0}),s()})}function v(){i.value=!1,k()}function k(){l.value=[],r.value=null,p.value=""}return B({open:j}),(_,n)=>{const s=ce,m=Ue,u=we,f=De,w=Re,S=Fe,h=te,D=oe,R=le,N=ye,q=ae,V=ne,pe=se;return e(y)?(T(),$(pe,{key:1,show:e(i),"onUpdate:show":n[1]||(n[1]=H=>F(i)?i.value=H:null),height:"100%",placement:"bottom","auto-focus":!1,onAfterLeave:v},{default:t(()=>[a(V,{closable:"","header-style":"padding: 16px 12px","body-content-style":"padding: 4px 12px","footer-style":"padding: 16px 24px"},{header:t(()=>[a(h,{style:{gap:"4px"}},{default:t(()=>[a(e(x),{size:26,color:"var(--app-primary-color)"},{default:t(()=>[(T(),$(ee(e(me))))]),_:1}),a(R,{style:{height:"100%","max-width":"190px"}},{tooltip:t(()=>[b("span",null,d(!e(r)&&!e(p)?e(o)("file.upload.needSelect"):e(o)("file.upload.title")),1)]),default:t(()=>[b("span",je,d(!e(r)&&!e(p)?e(o)("file.upload.needSelect"):e(o)("file.upload.title")),1)]),_:1})]),_:1})]),footer:t(()=>[a(q,{block:"",strong:"",secondary:"",type:"primary",focusable:!1,onClick:v},{default:t(()=>[z(d(e(o)("component.modal.close")),1)]),_:1})]),default:t(()=>[a(N,{bordered:!1,style:{height:"100%","word-break":"unset"},"content-style":"padding: 0"},{default:t(()=>[a(h,{vertical:""},{default:t(()=>[a(s,{size:"large","default-value":e(r)?.key,clearable:"","show-path":!0,separator:"/",style:{"margin-top":"5px"},placeholder:e(o)("file.upload.selectPlaceholder"),"consistent-menu-width":!1,loading:e(c),options:e(l),"on-update:expanded-keys":e(E),"on-update:value":U},null,8,["default-value","placeholder","loading","options","on-update:expanded-keys"]),a(m,{type:"info",closable:""},{default:t(()=>[z(d(e(o)("file.upload.info")),1)]),_:1}),a(S,{multiple:"","directory-dnd":"",disabled:!e(r)&&!e(p),"custom-request":P},{default:t(()=>[a(w,null,{default:t(()=>[b("div",Ve,[a(e(x),{size:"48",depth:3},{default:t(()=>[a(u)]),_:1})]),a(f,{style:{"font-size":"16px"}},{default:t(()=>[z(d(e(o)("file.upload.draggerText")),1)]),_:1})]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])):(T(),$(D,{key:0,show:e(i),"onUpdate:show":n[0]||(n[0]=H=>F(i)?i.value=H:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:g,title:!e(r)&&!e(p)?e(o)("file.upload.needSelect"):e(o)("file.upload.title"),"on-close":v,"on-mask-click":v},{default:t(()=>[a(h,{vertical:""},{default:t(()=>[a(s,{"default-value":e(r)?.key,clearable:"","show-path":!0,separator:"/",style:{"margin-top":"5px"},placeholder:e(o)("file.upload.selectPlaceholder"),"consistent-menu-width":!1,loading:e(c),options:e(l),"on-update:expanded-keys":e(E),"on-update:value":U},null,8,["default-value","placeholder","loading","options","on-update:expanded-keys"]),a(m,{type:"info",closable:""},{default:t(()=>[z(d(e(o)("file.upload.info")),1)]),_:1}),a(S,{multiple:"","directory-dnd":"",disabled:!e(r)&&!e(p),"custom-request":P},{default:t(()=>[a(w,null,{default:t(()=>[b("div",Le,[a(e(x),{size:"48",depth:3},{default:t(()=>[a(u)]),_:1})]),a(f,{style:{"font-size":"16px"}},{default:t(()=>[z(d(e(o)("file.upload.draggerText")),1)]),_:1})]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1},8,["show","title"]))}}});export{Qe as F,Xe as _,Ye as a,Ke as b};
