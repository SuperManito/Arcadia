import{_ as Z}from"./search2-line-Cm_Nf99E.js";import{a as ee,_ as te,d as ne}from"./index-BW0Kz9QR.js";import{a7 as C,aK as oe,av as m,I as ae,A as k,r as le,K as se,u as e,a8 as P,a9 as o,aa as n,aT as h,aG as b,aL as v,aS as R,am as s,b3 as ie,bd as ce,be as pe,an as re,aM as de,bj as ue,b9 as _e,aU as fe,ap as he,aE as me,bE as ge,bF as xe}from"./vendor-CVUNLYN4.js";import{u as be}from"./useAppInject-Dal6O7k8.js";import{a as ve}from"./file-BQviJjRi.js";import{f as w,a as T,b as ye,c as ke}from"./index-wCKpV3TT.js";import{f as we}from"./folderEmpty-BCYceZjA.js";import{f as j}from"./filePrefix-TZsSBMTw.js";const Te={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},Ce=m("path",{fill:"currentColor",d:"M14 2H6a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h12c1.11 0 2-.89 2-2V8zm4 18H6V4h7v5h5zm-8.46-4.35l2.09 2.09L10.35 19L7 15.65l3.35-3.35l1.28 1.26zm7.46 0L13.65 19l-1.27-1.26l2.09-2.09l-2.09-2.09l1.27-1.26z"},null,-1),Fe=[Ce];function Ie(U,F){return C(),oe("svg",Te,[...Fe])}const Ee={name:"mdi-file-code-outline",render:Ie},$e={class:"pb-1 mr-3"},ze={style:{"vertical-align":"-4px",padding:"0 2px"}},Le={class:"mr-2 mb-2"},Ne=ae({__name:"selectFile",emits:["onConfirmSelect"],setup(U,{expose:F,emit:V}){const A=V,{t:d}=ee(),{getIsMobile:K}=be(),y=k([]),I=k([]),_=k(""),l=le({show:!1,loading:!1,path:"",option:{}}),{show:f,loading:E,path:g,option:$}=se(l),M=async()=>{l.loading=!0,l.show=!0;const i=await ve({}),a=await G(i);y.value=a,l.loading=!1},z=()=>{l.show=!1,A("onConfirmSelect",l.option),l.path="",l.option={}},L=(i,a,c)=>{if(!c.node)return;const t=c.node,p=t.title;switch(c.action){case"expand":t.prefix=()=>s(h,null,{default:()=>s(w.open[p]||ye)});break;case"collapse":t.prefix=()=>s(h,null,{default:()=>s(w.close[p]||T)});break}},H=i=>s(ie,{placement:"left",delay:1500,duration:500,showArrow:!1,overlap:!0,style:{width:"max-content",fontSize:"12px",right:"26px"}},{trigger:()=>i.option.label,default:()=>i.option.key}),N=async(i,a,c)=>{if(c.action!=="select"){l.path="",l.option={};return}const t=c.node;if(t.isDir||t.disabled){l.path="",l.option={};return}l.path=t.key,l.option=t},B=({option:i})=>i.children?"toggleExpand":"default",G=async i=>{const a=c=>{c.length&&c.forEach(t=>{if(t.type===0)Object.assign(t,{key:t.path,label:t.title,isDir:!0,canRun:!1,disabled:!1,icon:()=>s(T),prefix:()=>s(h,null,{default:()=>s(w.close[t.title]||T)})}),a(t.children),t.children.length||(Object.assign(t,{children:null}),t.prefix=()=>s(h,null,{default:()=>s(we)}));else{const p=t.name;if(p){const x=p.substring(p.lastIndexOf(".")+1),r=ke[x]||{};Object.assign(t,{key:t.path,label:p,isDir:!1,language:r.language||"plaintext",canRun:r.canRun||!1,disabled:r.disabled||!r.language||!r.canRun||!1,icon:()=>s(r.icon||j),prefix:()=>s(h,null,{default:()=>s(r.icon||j)})})}}})};return a(i),i};return F({open:M}),(i,a)=>{const c=Ee,t=te,p=Z,x=ce,r=pe,D=re,S=de,q=ue,J=_e,Q=fe,O=he,W=me,X=ge,Y=xe;return e(K)?(C(),P(Y,{key:1,show:e(f),"onUpdate:show":a[5]||(a[5]=u=>b(f)?f.value=u:null),height:"calc(var(--vh) * 100)",width:"100vw",placement:"right","auto-focus":!1,"mask-closable":!1},{default:o(()=>[n(X,{"header-style":"height: 60px; padding: 16px 12px","body-content-style":"padding: 0; overscroll-behavior: none","footer-style":"padding: 16px 24px"},{header:o(()=>[n(Q,{style:{gap:"4px"}},{default:o(()=>[n(e(h),{size:24,color:"var(--app-primary-color)"},{default:o(()=>[n(c,{style:{"vertical-align":"0"}})]),_:1}),n(J,{style:{height:"100%","max-width":"260px"}},{tooltip:o(()=>[m("span",null,v(e(d)("page.code.selectFileTitle")),1)]),default:o(()=>[m("span",ze,v(e(d)("page.code.selectFileTitle")),1)]),_:1})]),_:1})]),footer:o(()=>[n(W,null,{default:o(()=>[n(O,{tertiary:"",focusable:!1,onClick:a[4]||(a[4]=u=>(f.value=!1,g.value="",$.value={}))},{default:o(()=>[R(v(e(d)("common.cancelText")),1)]),_:1}),n(O,{type:"primary",disabled:!e(g),focusable:!1,onClick:z},{default:o(()=>[R(v(e(d)("common.okText")),1)]),_:1},8,["disabled"])]),_:1})]),default:o(()=>[n(t,{show:e(E)},null,8,["show"]),n(S,{bordered:!1,class:"tree-container",style:{height:"calc(100% - 32px)","word-break":"unset"},"content-style":"display: flex; flex-direction: column; height: 100%; padding: 0.8em 0 0 0.5rem"},{default:o(()=>[m("div",Le,[n(x,{value:e(_),"onUpdate:value":a[3]||(a[3]=u=>b(_)?_.value=u:null),clearable:"",placeholder:e(d)("page.code.searchInputPlaceholder")},{prefix:o(()=>[n(p)]),_:1},8,["value","placeholder"])]),n(D,{"x-scrollable":"",class:"flex-1 pr-2",style:{height:"100%"}},{default:o(()=>[n(r,{"expand-on-click":"","block-line":"",animated:!1,style:{"font-size":"15px"},"show-irrelevant-nodes":!1,pattern:e(_),data:e(y),"default-expanded-keys":e(I),"override-default-node-click-behavior":B,"on-update:expanded-keys":L,"on-update:selected-keys":N},null,8,["pattern","data","default-expanded-keys"])]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])):(C(),P(q,{key:0,show:e(f),"onUpdate:show":a[1]||(a[1]=u=>b(f)?f.value=u:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,title:e(d)("page.code.selectFileTitle"),"positive-text":e(d)("common.okText"),"negative-text":e(d)("common.cancelText"),"positive-button-props":{disabled:!e(g)},"negative-button-props":{ghost:!1,tertiary:!0},style:{width:"600px"},onPositiveClick:z,onNegativeClick:a[2]||(a[2]=u=>(g.value="",$.value={}))},{icon:o(()=>[n(e(h),{size:28},{default:o(()=>[n(c,{style:{"vertical-align":"baseline"}})]),_:1})]),default:o(()=>[n(t,{show:e(E)},null,8,["show"]),n(S,{bordered:!1,class:"tree-container",style:{height:"480px","word-break":"unset"},"content-style":"height: 100%; padding: 1em 0 0 0; "},{default:o(()=>[m("div",$e,[n(x,{value:e(_),"onUpdate:value":a[0]||(a[0]=u=>b(_)?_.value=u:null),clearable:"",style:{"margin-bottom":".5em"},placeholder:e(d)("page.code.searchInputPlaceholder")},{prefix:o(()=>[n(p)]),_:1},8,["value","placeholder"])]),n(D,{"x-scrollable":"",class:"flex-1 pr-3",style:{height:"420px"}},{default:o(()=>[n(r,{"expand-on-click":"","block-line":"",style:{height:"100%"},"show-irrelevant-nodes":!1,pattern:e(_),data:e(y),"default-expanded-keys":e(I),"override-default-node-click-behavior":B,"render-label":H,"on-update:expanded-keys":L,"on-update:selected-keys":N},null,8,["pattern","data","default-expanded-keys"])]),_:1})]),_:1})]),_:1},8,["show","title","positive-text","negative-text","positive-button-props"]))}}}),Ve=ne(Ne,[["__scopeId","data-v-81d84d95"]]);export{Ve as default};
