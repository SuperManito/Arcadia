const __vite__fileDeps=["./UserDropdown-GNfR-yMl.js","./vendor-DM0AKlTY.js","./vendor-CLyFf5IJ.css","./index-C5WsbIcI.js","./index-nvS2JY3H.css","./Breadcrumb-BEgnCNCI.js","./Icon-xQFpegxF.js","./propTypes-BWpnk_hf.js","./index-DfTbOoWp.js","./useDesign-CEKApMBV.js","./DarkModeToggle-BYoAfxIf.js","./wb-sunny-outline-BqUvWuxW.js","./LocalePicker-Bu-c5pGT.js","./language-CDGU1W59.js","./useLocale-dxhRIZfv.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{a7 as c,aK as F,av as I,aN as ft,I as A,A as P,r as Ie,ai as at,K as mt,aO as Zt,h as m,aP as _t,aI as qt,B as re,aQ as Yt,u as t,a8 as v,a9 as d,aa as p,aL as K,aF as B,aS as oe,aA as Ee,az as q,aG as Ae,aT as Jt,ap as Qt,b3 as ht,aB as vt,b7 as en,aU as tn,b4 as nn,aV as on,aE as sn,bj as an,b9 as rn,bE as yt,bF as bt,O as me,an as St,bQ as Ce,G as se,ay as V,bY as _e,bZ as rt,b_ as ln,C as cn,b$ as un,c0 as dn,bJ as lt,_ as Le,b1 as Ne,c1 as pn,c2 as it,y as ve,c3 as gn,c4 as Ct,c5 as ct,c6 as fn,c7 as mn,c8 as Lt,c9 as _n,am as de,o as hn,bS as We,bP as wt,a6 as U,ca as vn,cb as kt,at as je,au as Tt,cc as yn,aJ as bn,aR as he,t as Mt,cd as Sn,ax as Rt,ce as Cn,bW as Ln,cf as wn,bg as kn,bi as Tn,cg as Mn,ch as ut,ci as Rn,ba as $n,bz as En,a_ as xn}from"./vendor-DM0AKlTY.js";import{g as In,s as On,_ as Bn,f as Pn}from"./socket-DjmPamSi.js";import{_ as Fn,a as Hn}from"./fullscreen-CPornDEJ.js";import{u as ae,c as An,d as Nn}from"./useAppInject-BpVc4Z3r.js";import{a as ye,n as pe,q as Dn,r as $t,t as J,e as Oe,P as zn,v as Un,w as Vn,d as le,h as ge,x as ue,y as Gn,z as Et,A as Ke,B as xt,C as Wn,D as Xe,F as Ze,G as jn,M as ee,H as It,I as Kn,J as Be,R as Ot,K as Bt,L as fe,N as Pt,O as Pe,m as Xn,Q as Zn,_ as qn,S as Ft,U as Yn,V as Jn,W as Me,X as Re}from"./index-C5WsbIcI.js";import{i as Qn,g as eo}from"./index-Ddm3CTAd.js";import{u as Q}from"./useDesign-CEKApMBV.js";import{p as G}from"./propTypes-BWpnk_hf.js";import{I as De}from"./Icon-xQFpegxF.js";import{u as to}from"./useBreakpoint-rfcbhKbi.js";import{u as no}from"./useLocale-dxhRIZfv.js";import{_ as oo,a as so,C as ao}from"./clickOutside-DMn9Tffw.js";import ro from"./index-BHmfOU2k.js";import{u as lo}from"./useTransition-Dfer0qTM.js";import{u as io}from"./layoutContentResize-DXQmnyeq.js";import{F as co}from"./index-Dqr32fbh.js";import{u as uo}from"./useRunLog-_8RhRATB.js";const po={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},go=I("path",{fill:"currentColor",d:"M19 7h-2.81c-.45-.8-1.07-1.5-1.82-2L16 3.41L14.59 2l-2.17 2.17a6 6 0 0 0-2.83 0L7.41 2L6 3.41L7.62 5c-.75.5-1.36 1.21-1.81 2H3v2h2.09c-.06.33-.09.66-.09 1v1H3v2h2v1c0 .34.03.67.09 1H3v2h2.81A6 6 0 0 0 13 19.65V19c0-.57.09-1.14.25-1.69c-.66.45-1.45.69-2.25.69c-2.21 0-4-1.79-4-4v-4c0-2.21 1.79-4 4-4s4 1.79 4 4v4c0 .19 0 .39-.05.58c.59-.54 1.29-.96 2.05-1.23V13h2v-2h-2v-1c0-.34-.03-.67-.09-1H19zm-6 2v2H9V9zm0 4v2H9v-2zm3 3h6v6h-6z"},null,-1),fo=[go];function mo(e,n){return c(),F("svg",po,[...fo])}const _o={name:"mdi-bug-stop-outline",render:mo},ho={style:{display:"inline-block"},viewBox:"0 0 48 48",width:"1em",height:"1em"},vo=I("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"4"},[I("path",{d:"M21 6H9a3 3 0 0 0-3 3v22a3 3 0 0 0 3 3h30a3 3 0 0 0 3-3V21M24 34v8"}),I("path",{d:"m32 6l-4 4l4 4m6-8l4 4l-4 4M14 42h20"})],-1),yo=[vo];function bo(e,n){return c(),F("svg",ho,[...yo])}const So={name:"icon-park-outline-code-computer",render:bo},Co={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},Lo=I("path",{fill:"currentColor",d:"M22.54 21.12L20.41 19l2.13-2.12l-1.42-1.42L19 17.59l-2.12-2.13l-1.42 1.42L17.59 19l-2.13 2.12l1.42 1.42L19 20.41l2.12 2.13M6 2a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h7.81c-.36-.62-.61-1.3-.73-2H6V4h7v5h5v4.08c.33-.05.67-.08 1-.08c.34 0 .67.03 1 .08V8l-6-6M8 12v2h8v-2m-8 4v2h5v-2Z"},null,-1),wo=[Lo];function ko(e,n){return c(),F("svg",Co,[...wo])}const To={name:"mdi-file-document-remove-outline",render:ko},Mo={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},Ro=ft('<g stroke="currentColor" stroke-linecap="round" stroke-width="2"><path fill="currentColor" fill-opacity="0" stroke-dasharray="60" stroke-dashoffset="60" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.5s" values="60;0"></animate><animate fill="freeze" attributeName="fill-opacity" begin="0.8s" dur="0.15s" values="0;0.3"></animate></path><path fill="none" stroke-dasharray="8" stroke-dashoffset="8" d="M12 12L16 16M12 12L8 8M12 12L8 16M12 12L16 8"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.2s" values="8;0"></animate></path></g>',1),$o=[Ro];function Eo(e,n){return c(),F("svg",Mo,[...$o])}const xo={name:"line-md-close-circle-twotone",render:Eo},Io={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},Oo=ft('<g stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path fill="currentColor" fill-opacity="0" stroke-dasharray="60" stroke-dashoffset="60" d="M12 3L21 20H3L12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.5s" values="60;0"></animate><animate fill="freeze" attributeName="fill-opacity" begin="1.2s" dur="0.15s" values="0;0.3"></animate></path><path fill="none" stroke-dasharray="6" stroke-dashoffset="6" d="M12 10V14"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.2s" values="6;0"></animate></path></g><circle cx="12" cy="17" r="1" fill="currentColor" fill-opacity="0"><animate fill="freeze" attributeName="fill-opacity" begin="0.8s" dur="0.4s" values="0;1"></animate></circle>',2),Bo=[Oo];function Po(e,n){return c(),F("svg",Io,[...Bo])}const Fo={name:"line-md-alert-twotone",render:Po},Ho={style:{"vertical-align":"-4px",padding:"0 2px"}},Ao=A({__name:"index",setup(e,{expose:n}){const{getIsMobile:s}=ae(),{t:o}=ye(),a=P(null);let g=null,r=null;const u={show:!1,title:o("component.runLog.title"),cmd:"",runId:"",logRef:"",runTimes:0,isLogOverOk:!1,isLogOverFail:!1,isLogOverExit:!1,isLogReachBottom:!0,isStopping:!1,isLogEmpty:!1,showFullScreen:!1},l=Ie(at(u)),{show:f,title:i,logRef:_,runTimes:h,isLogOverOk:y,isLogOverFail:w,isLogOverExit:C,isStopping:k,isLogEmpty:M,showFullScreen:$}=mt(l),N=async x=>{l.runId=await Pn({cmd:x})},E=async x=>{switch(x){case"cmdStop":if(!l.cmd)return;l.isStopping=!0;const S=eo(l.cmd);try{const W=await On({path:S});l.isLogOverOk=!1,l.isLogOverFail=!1,l.isLogOverExit=!0,_.value+=`
${W}
`}catch{l.isStopping=!1}break;case"close":l.show=!1,r&&clearInterval(r),r=null;break;case"fullScreen":l.showFullScreen=!l.showFullScreen;break}},b=Zt(x=>{const S=a.value;if(!S)return;const W=S.$el.clientHeight,j=x.target.scrollTop,z=x.target.scrollHeight;l.isLogReachBottom=W+j>=z-10},300),L=m(()=>l.isLogOverOk||l.isLogOverFail||l.isLogOverExit?o("component.modal.close"):""),O=m(()=>Qn(l.cmd)),D=({code:x,result:S})=>{S.runId===l.runId&&(S.over&&(clearInterval(r),_.value||(M.value=!0)),_.value+=S.log||"",x?!l.isStopping&&(l.isLogOverOk=S.over):!l.isStopping&&(l.isLogOverFail=S.over))},R=(x={cmd:""})=>{l.showFullScreen=!1,Object.assign(l,at(u),x,{show:!0}),re().then(()=>setTimeout(()=>N(l.cmd),500)),r||(r=setInterval(()=>{h.value+=.1},100)),g?.off("runLog").on("runLog",D),re().then(()=>{const S=a.value.scrollbarRef?.containerRef;S&&(S.removeEventListener("scroll",b),S.addEventListener("scroll",b))})};return _t(()=>{g=In(),qt(()=>{l.logRef&&re(()=>{l.isLogReachBottom&&a.value?.scrollTo({position:"bottom",silent:!0})})})}),Yt(()=>{if(a.value){const x=a.value?.scrollbarRef?.containerRef;x&&x.removeEventListener("scroll",b)}g?.off("runLog",D)}),n({open:R}),(x,S)=>{const W=Fn,j=Hn,z=Jt,Y=Qt,Fe=ht,ke=vt,ie=Bn,Te=Fo,T=xo,H=en,X=tn,be=nn,ce=To,te=on,nt=So,ot=_o,st=sn,Wt=an,jt=rn,Kt=yt,Xt=bt;return t(s)?(c(),v(Xt,{key:1,show:t(f),"onUpdate:show":S[8]||(S[8]=ne=>Ae(f)?f.value=ne:null),height:"calc(var(--vh) * 100)",placement:"bottom","auto-focus":!1,"mask-closable":!1},{default:d(()=>[p(Kt,{closable:!t(O),"header-style":"height: 60px; padding: 16px 12px","body-content-style":"padding: 4px 12px","footer-style":"padding: 16px 24px"},{header:d(()=>[p(X,null,{default:d(()=>[!t(y)&&!t(w)&&!t(C)?(c(),v(ke,{key:0,size:26,style:{"vertical-align":"-0.05em"}})):(c(),v(z,{key:1,size:26},{default:d(()=>[t(y)?(c(),v(ie,{key:0,style:{color:"var(--app-success-color)","vertical-align":"0"}})):t(C)?(c(),v(Te,{key:1,style:{color:"var(--app-warning-color)","vertical-align":"0"}})):t(w)?(c(),v(T,{key:2,style:{color:"var(--app-error-color)","vertical-align":"0"}})):B("",!0)]),_:1})),p(jt,{style:{height:"100%","max-width":"260px"}},{tooltip:d(()=>[I("span",null,K(t(i)),1)]),default:d(()=>[I("span",Ho,K(t(i)),1)]),_:1}),t(h)!==0?(c(),v(H,{key:2,depth:3,style:{"font-size":"12px","vertical-align":"-4px"}},{default:d(()=>[oe(K(`${t(h).toFixed(1)}s`),1)]),_:1})):B("",!0)]),_:1})]),footer:d(()=>[p(Ee,{name:"fade",mode:"out-in",appear:""},{default:d(()=>[!t(y)&&!t(w)&&!t(C)?(c(),v(st,{key:0},{default:d(()=>[p(Y,{secondary:"",focusable:!1,onClick:S[5]||(S[5]=ne=>E("close"))},{icon:d(()=>[p(z,null,{default:d(()=>[p(nt,{style:{"vertical-align":"baseline"}})]),_:1})]),default:d(()=>[oe(" "+K(t(o)("component.runLog.runBackground")),1)]),_:1}),t(O)?(c(),v(Y,{key:0,secondary:"",focusable:!1,loading:t(k),onClick:S[6]||(S[6]=ne=>E("cmdStop"))},{icon:d(()=>[p(z,null,{default:d(()=>[p(ot,{style:{"vertical-align":"baseline"}})]),_:1})]),default:d(()=>[oe(" "+K(t(o)("component.runLog.terminate")),1)]),_:1},8,["loading"])):B("",!0)]),_:1})):t(L)?(c(),v(Y,{key:1,type:t(C)?"warning":t(w)?"error":"primary",focusable:!1,onClick:S[7]||(S[7]=ne=>E("close"))},{default:d(()=>[oe(K(t(L)),1)]),_:1},8,["type"])):B("",!0)]),_:1})]),default:d(()=>[t(M)?(c(),v(te,{key:1,class:"flex-jc-ac",style:{height:"400px"},size:"huge",description:t(o)("component.runLog.emptyTitle")},{icon:d(()=>[p(z,null,{default:d(()=>[p(ce)]),_:1})]),_:1},8,["description"])):(c(),v(be,{key:0,ref_key:"logInstRef",ref:a,log:t(_),"font-size":14,"line-height":1.5,language:"naive-log",style:{width:"100%",height:"100%"}},null,8,["log"]))]),_:1},8,["closable"])]),_:1},8,["show"])):(c(),v(Wt,{key:0,show:t(f),"onUpdate:show":S[4]||(S[4]=ne=>Ae(f)?f.value=ne:null),preset:"dialog","auto-focus":!1,"close-on-esc":!1,"mask-closable":!1,style:q({width:t($)?"calc(-20px + 100vw)":"600px"})},{close:d(()=>[p(Fe,{"show-arrow":!1,trigger:"hover",delay:500},{trigger:d(()=>[p(Y,{size:"tiny",quaternary:"",focusable:!1,style:{padding:"4px"},onClick:S[0]||(S[0]=ne=>E("fullScreen"))},{icon:d(()=>[p(z,{size:20,depth:2},{default:d(()=>[t($)?(c(),v(j,{key:1,style:{"vertical-align":"baseline"}})):(c(),v(W,{key:0,style:{"vertical-align":"baseline"}}))]),_:1})]),_:1})]),default:d(()=>[I("span",null,K(t($)?t(o)("layout.header.tooltipExitFull"):t(o)("layout.header.tooltipEntryFull")),1)]),_:1})]),icon:d(()=>[!t(y)&&!t(w)&&!t(C)?(c(),v(ke,{key:0,size:24,style:{"vertical-align":"-0.05em","padding-right":"1em"}})):B("",!0),p(z,null,{default:d(()=>[t(y)?(c(),v(ie,{key:0,style:{color:"var(--app-success-color)","vertical-align":"0"}})):t(C)?(c(),v(Te,{key:1,style:{color:"var(--app-warning-color)","vertical-align":"0"}})):t(w)?(c(),v(T,{key:2,style:{color:"var(--app-error-color)","vertical-align":"0"}})):B("",!0)]),_:1})]),header:d(()=>[p(X,null,{default:d(()=>[oe(K(t(i))+" ",1),t(h)!==0?(c(),v(H,{key:0,depth:3,style:{"font-size":"12px","vertical-align":"baseline"}},{default:d(()=>[oe(K(`${t(h).toFixed(1)}s`),1)]),_:1})):B("",!0)]),_:1})]),action:d(()=>[p(Ee,{name:"fade",mode:"out-in",appear:""},{default:d(()=>[!t(y)&&!t(w)&&!t(C)?(c(),v(st,{key:0},{default:d(()=>[p(Y,{secondary:"",size:"small",focusable:!1,onClick:S[1]||(S[1]=ne=>E("close"))},{icon:d(()=>[p(z,null,{default:d(()=>[p(nt,{style:{"vertical-align":"baseline"}})]),_:1})]),default:d(()=>[oe(" "+K(t(o)("component.runLog.runBackground")),1)]),_:1}),t(O)?(c(),v(Y,{key:0,secondary:"",size:"small",focusable:!1,loading:t(k),onClick:S[2]||(S[2]=ne=>E("cmdStop"))},{icon:d(()=>[p(z,null,{default:d(()=>[p(ot,{style:{"vertical-align":"baseline"}})]),_:1})]),default:d(()=>[oe(" "+K(t(o)("component.runLog.terminate")),1)]),_:1},8,["loading"])):B("",!0)]),_:1})):t(L)?(c(),v(Y,{key:1,size:"small",type:t(C)?"warning":t(w)?"error":"primary",focusable:!1,onClick:S[3]||(S[3]=ne=>E("close"))},{default:d(()=>[oe(K(t(L)),1)]),_:1},8,["type"])):B("",!0)]),_:1})]),default:d(()=>[t(M)?(c(),v(te,{key:1,class:"flex-jc-ac",style:q([{height:"600px"},{height:t($)?"calc(-160px + 100vh)":"600px"}]),size:"huge",description:t(o)("component.runLog.emptyTitle")},{icon:d(()=>[p(z,null,{default:d(()=>[p(ce)]),_:1})]),_:1},8,["style","description"])):(c(),v(be,{key:0,ref_key:"logInstRef",ref:a,log:t(_),"font-size":15,"line-height":1.5,language:"naive-log",style:q({paddingTop:"1em",width:"100%",height:t($)?"calc(-160px + 100vh)":"600px"})},null,8,["log","style"]))]),_:1},8,["show","style"]))}}}),Ht=A({__name:"ScrollContainer",props:{inverted:{type:Boolean}},setup(e){const n=e,{color:s,colorHover:o}=pe("Scrollbar",!0),a=m(()=>n.inverted?{color:s,colorHover:o}:void 0);return(g,r)=>{const u=St;return c(),v(u,{"builtin-theme-overrides":t(a)},{default:d(()=>[me(g.$slots,"default")]),_:3},8,["builtin-theme-overrides"])}}}),No=/^(\d|\.)+$/,dt=/(\d|\.)+/;function Se(e,{c:n=1,offset:s=0,attachPx:o=!0}={}){if(typeof e=="number"){const a=(e+s)*n;return a===0?"0":`${a}px`}else if(typeof e=="string")if(No.test(e)){const a=(Number(e)+s)*n;return o?a===0?"0":`${a}px`:`${a}`}else{const a=dt.exec(e);return a?e.replace(dt,String((Number(a[0])+s)*n)):e}return e}const Do=""+new URL("logo-BFL6IUzU.png",import.meta.url).href,zo=["src"],qe=A({__name:"AppLogo",props:{logoSize:G.stringNumber.def(24),showTitle:G.bool.def(!0),titleSize:G.stringNumber.def(18),titleColor:G.string,collapsed:G.bool,collapsedShowTitle:G.bool.def(!1),isStatic:G.bool.def(!1),width:G.stringNumber,canGoHome:G.bool.def(!1)},setup(e){Ce(L=>({"1390b5f8":t(N)}));const n=e,{prefixCls:s}=Q("app-logo"),o=Dn(),{title:a}=$t(),{getMenuWidth:g,getMobileWidth:r,getMenuRootIndent:u,getCollapsed:l}=J(),{getIsMobile:f}=ae(),i=P(),_=P(),h=P(`inset(0px ${n.collapsed?100:0}% 0px 0px)`);se([i,_,()=>n.showTitle],()=>{y()});function y(){const L=_e(i),O=_e(_);if(!L||!O||!n.showTitle)return;const D=w(L,O);D();let R;rt(L,"transitionstart",()=>{if(R){R.resume();return}R=ln(D)}),rt(L,"transitionend",()=>{R&&R.pause()})}function w(...L){return()=>{const[O,D]=L,R=O.offsetWidth,x=D.offsetWidth,S=D.offsetLeft,j=x-R+S+16;h.value=`inset(0px ${cn(j,0,x+1)}px 0px 0px)`}}const C=Oe(),k=m(()=>{const{collapsed:L,collapsedShowTitle:O,isStatic:D,width:R,canGoHome:x}=n;return Object.assign({cursor:x?"pointer":"unset"},D?{}:{paddingLeft:L?"7px":`${u.value-4}px`,width:(L??l.value)&&!O?Se(Un):Se(R??f.value?r.value:g.value)})}),M=m(()=>({fontSize:Se(n.logoSize),transition:"font-size var(--app-transition-duration) var(--app-bezier)",zIndex:10,height:"24px",width:"24px",marginLeft:"6px"})),$=m(()=>{const{titleSize:L,titleColor:O}=n;return{fontSize:Se(L),lineHeight:1.3,...n.isStatic?{}:{clipPath:h.value},...O?{color:O}:{}}}),N=m(()=>n.collapsed?0:"100%"),E=m(()=>a);function b(){n.canGoHome&&C(o.getUserInfo.homePath||zn.BASE_HOME)}return(L,O)=>(c(),F("div",{ref_key:"wrapperEl",ref:i,class:"flex-ac ease-in-out-300",style:q(t(k)),onClick:b},[I("img",{src:t(Do),title:"Logo",style:q(t(M))},null,12,zo),p(Ee,{name:"fade-slide-right",mode:"out-in"},{default:d(()=>[e.showTitle&&!e.collapsed?(c(),F("div",{key:0,ref_key:"titleEl",ref:_,class:V(["font-segoe ml-3 font-semibold",[`${t(s)}__title`]]),style:q(t($))},K(t(E)),7)):B("",!0)]),_:1})],4))}});function we(e,n){n=n||{};const{size:s="small",delay:o=100,timeout:a=3e4,loading:g=!1,loadingComponent:r,retry:u=!0}=n;return un({loader:e,loadingComponent:g?p(vt,{size:s,style:"margin:1rem;"},null):r,timeout:a,delay:o,onError:u?(l,f,i,_)=>{l.message.match(/fetch/)&&_<=3?f():i()}:Vn})}const Uo=A({name:"FullScreen",setup(){const{t:e}=ye(),{toggle:n,isFullscreen:s}=dn();return{getTitle:m(()=>t(s)?e("layout.header.tooltipExitFull"):e("layout.header.tooltipEntryFull")),isFullscreen:s,toggle:n}}});function Vo(e,n,s,o,a,g){const r=oo,u=so,l=ht;return c(),v(l,{trigger:"hover",placement:"bottom",delay:1e3},{trigger:d(()=>[I("span",{class:"app-layout-header-anction-icon",style:{transition:".2s"},onClick:n[0]||(n[0]=(...f)=>e.toggle&&e.toggle(...f))},[e.isFullscreen?(c(),v(r,{key:0,viewBox:"64 64 896 896"})):(c(),v(u,{key:1,viewBox:"64 64 896 896"}))])]),default:d(()=>[oe(" "+K(e.getTitle),1)]),_:1})}const Go=le(Uo,[["render",Vo]]),Wo=we(()=>Le(()=>import("./UserDropdown-GNfR-yMl.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url),{loadingComponent:p("div",{class:"flex items-center space-x-2"},[p(lt,{height:"24px",circle:!0},null),p(lt,{text:!0,round:!0,class:"w-60px h-12px"},null)])}),jo=we(()=>Le(()=>import("./Breadcrumb-BEgnCNCI.js"),__vite__mapDeps([5,6,1,2,7,3,4]),import.meta.url));we(()=>Le(()=>import("./index-DfTbOoWp.js"),__vite__mapDeps([8,1,2,9,3,4]),import.meta.url));const Ko=we(()=>Le(()=>import("./DarkModeToggle-BYoAfxIf.js"),__vite__mapDeps([10,11,1,2,6,7,3,4]),import.meta.url)),Xo=we(()=>Le(()=>import("./LocalePicker-Bu-c5pGT.js"),__vite__mapDeps([12,13,1,2,14,3,4]),import.meta.url)),Zo=A({__name:"BarTrigger",props:{collapsed:G.bool.def(!1),onClick:{type:Function}},setup(e){const{siderToggleBarColor:n,siderToggleBarColorHover:s}=pe("Layout"),{siderToggleBarColor:o,siderToggleBarColorHover:a}=pe("Layout",!0),{getIsDarkMode:g}=ge(),r=m(()=>{const l=g.value;return{color:l?o:n,hoverColor:l?a:s}});Ce(()=>({"toggle-bar-color":r.value.color,"toggle-bar-color-hover":r.value.hoverColor}));const{prefixCls:u}=Q("layout-toggle-bar");return(l,f)=>(c(),F("div",{class:V([t(u),{collapsed:e.collapsed}]),onClick:f[0]||(f[0]=(...i)=>e.onClick&&e.onClick(...i))},[I("div",{class:V(`${t(u)}__top`)},null,2),I("div",{class:V(`${t(u)}__bottom`)},null,2)],2))}}),qo=I("i",{class:"icon"},[I("svg",{viewBox:"0 0 16 16",fill:"none",width:"1em",height:"1em",xmlns:"http://www.w3.org/2000/svg"},[I("path",{d:"M5.64645 3.14645C5.45118 3.34171 5.45118 3.65829 5.64645 3.85355L9.79289 8L5.64645 12.1464C5.45118 12.3417 5.45118 12.6583 5.64645 12.8536C5.84171 13.0488 6.15829 13.0488 6.35355 12.8536L10.8536 8.35355C11.0488 8.15829 11.0488 7.84171 10.8536 7.64645L6.35355 3.14645C6.15829 2.95118 5.84171 2.95118 5.64645 3.14645Z",fill:"currentColor"})])],-1),Yo=[qo],Jo=A({__name:"ButtonTrigger",props:{collapsed:G.bool.def(!1),onClick:{type:Function}},setup(e){const{siderToggleButtonColor:n,siderToggleButtonIconColor:s,siderToggleButtonBorder:o}=pe("Layout"),{siderToggleBarColor:a,siderToggleButtonIconColor:g,siderToggleButtonBorder:r}=pe("Layout",!0),{getIsDarkMode:u}=ge(),l=m(()=>{const i=u.value;return{bgColor:i?a:n,iconColor:i?g:s,border:i?r:o}});Ce(()=>{const i=l.value;return{"toggle-button-color":i.bgColor,"toggle-button-icon-color":i.iconColor,"toggle-button-border":i.border}});const{prefixCls:f}=Q("layout-toggle-button");return(i,_)=>(c(),F("div",{class:V([t(f),{collapsed:e.collapsed}]),onClick:_[0]||(_[0]=(...h)=>e.onClick&&e.onClick(...h))},Yo,2))}}),Qo={style:{display:"inline-block"},viewBox:"0 0 1024 1024",width:"1em",height:"1em"},es=I("path",{fill:"currentColor",d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8m-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8m0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8M115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8"},null,-1),ts=[es];function ns(e,n){return c(),F("svg",Qo,[...ts])}const os={name:"ant-design-menu-fold-outlined",render:ns},ss={style:{display:"inline-block"},viewBox:"0 0 1024 1024",width:"1em",height:"1em"},as=I("path",{fill:"currentColor",d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8m-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8m0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8M142.4 642.1L298.7 519a8.84 8.84 0 0 0 0-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0 0 14.4 7"},null,-1),rs=[as];function ls(e,n){return c(),F("svg",ss,[...rs])}const is={name:"ant-design-menu-unfold-outlined",render:ls},cs=A({__name:"HeaderTrigger",props:{collapsed:G.bool.def(!1),onClick:{type:Function}},setup(e){const{getIsMobile:n}=ae();return(s,o)=>{const a=is,g=os;return c(),F("span",{class:"app-layout-header-anction-icon",style:q(t(n)?"background-color: transparent !important":""),onClick:o[0]||(o[0]=(...r)=>e.onClick&&e.onClick(...r))},[e.collapsed?(c(),v(a,{key:0,viewBox:"64 64 896 896"})):(c(),v(g,{key:1,viewBox:"64 64 896 896"}))],4)}}}),At=A({__name:"index",props:{type:{default:ue.BAR},onClick:null},setup(e){const n=e,s=new Map;s.set(ue.BAR,Zo),s.set(ue.BUTTON,Jo),s.set(ue.HEADER,cs);const{toggleCollapsed:o}=J(),a=()=>{n?.onClick&&pn(n.onClick)?n.onClick():o()};return(g,r)=>e.type?(c(),v(Ne(t(s).get(e.type)),{key:0,style:{transition:".2s"},onClick:a})):B("",!0)}}),pt=Object.assign({}),ze=[];Object.keys(pt).forEach(e=>{const n=pt[e].default||{},s=Array.isArray(n)?[...n]:[n];ze.push(...s)});const Ye=()=>jn().getProjectConfig.permissionMode,us=()=>Ye()===Xe.BACK,ds=()=>Ye()===Xe.ROUTE_MAPPING,Je=()=>Ye()===Xe.ROLE,Ue=(e,n)=>e.filter(s=>(!n||!s.meta?.hideMenu)&&!s.hideMenu).map(s=>(s.children&&(s.children=Ue(s.children,n),s.children.length||Reflect.deleteProperty(s,"children")),s)),Nt=[];(()=>{ze.sort((e,n)=>(e.orderNo||0)-(n.orderNo||0));for(const e of ze)Nt.push(Gn(e))})();async function Qe(){const e=Ze();return us()?Ue(e.getBackMenuList,!0):ds()?Ue(e.getFrontMenuList):Nt}const Dt=async()=>{const e=await Qe();if(Je()){const n=Ke.getRoutes();return xt(e,et(n))}return e};async function xe(e){const n=await Qe();return(await Et(n,e))?.[0]}async function Ve(){const n=(await Qe()).map(s=>({...s,children:void 0}));if(Je()){const s=Ke.getRoutes();return n.filter(et(s))}return n}async function $e(e){const s=(await Dt()).find(o=>o.path===e);if(!s||!s.children||s?.meta?.hideChildrenInMenu)return[];if(Je()){const o=Ke.getRoutes();return xt(s.children,et(o))}return s.children}function et(e){return n=>!!e.find(o=>{if(Wn(n.path))return!0;if(o.meta?.carryParam)return it(o.path).test(n.path);const a=o.path===n.path;return a?o.meta?.ignoreAuth?!0:a||it(o.path).test(n.path):!1})}function ps(e,n,s){const o=P(),{currentRoute:a}=ve(),{getIsMobile:g}=ae(),r=Ze(),{setMenuSetting:u,getIsHorizontal:l,getSplit:f}=J(),i=gn(C,50),_=m(()=>t(e)!==ee.SECONDARY&&!t(l)),h=m(()=>{let M=t(f);const $=t(s);return Ct($)&&(M=$),!M||t(e)!==ee.SECONDARY}),y=m(()=>t(e)===ee.ROOT),w=m(()=>t(e)===ee.NONE||!t(f));se([()=>t(a).path,()=>t(n),()=>t(e)],async([M,$])=>{if(t(_)||t(g))return;const{meta:N}=t(a),E=N.currentActiveMenu;let b;$?b=$:(b=await xe(M),b||(b=await xe(E))),b&&i(b)},{immediate:!0}),se([()=>r.getLastBuildMenuTime,()=>r.getBackMenuList],()=>{k()},{immediate:!0}),se(()=>f.value,()=>{t(_)||k()});async function C(M){if(t(h)||t(g))return;const $=await $e(M);if(!$||!$.length){u({hidden:!0}),o.value=[];return}u({hidden:!1}),o.value=$}async function k(){if(t(w)||t(g)){o.value=await Dt();return}if(t(y)){const M=await Ve();o.value=M}}return{menusRef:o}}const He=It&&navigator.connection,zt=He&&!/([a-z]-)?2g/.test(He.effectiveType)&&!He.saveData,gt={};function gs(e){return It?document.createElement("link")?.relList?.supports(e):!1}function fs(e){return new Promise((n,s)=>{const o=document.createElement("link");o.rel="prefetch",o.href=e,o.addEventListener("load",n),o.addEventListener("error",s),document.head.appendChild(o)})}function Ut(e){return new Promise((n,s)=>{const o=new XMLHttpRequest;o.open("GET",e,o.withCredentials=!0),o.addEventListener("load",()=>{o.status===200?n():s()}),o.send()})}function ms(e){return Reflect.has(window,"fetch")?fetch(e,{credentials:"include"}):Ut(e)}const _s=gs("prefetch")?fs:Ut;function hs(e,n){if(!(!zt||gt[e]))return(n?ms:_s)(e).then(()=>{gt[e]=!0})}const vs=A({name:"PrefetchLink",props:{...ct.props,prefetch:{type:Boolean,default:!0},prefetchFiles:{type:Array},timeout:{type:Number,default:1e3}},setup(e,{slots:n}){const s=fn({to:e.to}),o=P(),a=P(!1),g=m(()=>hn(e,["prefetch","prefetchFiles","timeout"])),{stop:r,isSupported:u}=mn(o,async([{isIntersecting:i}])=>{i&&(await We(e.timeout),f())});Lt(o,()=>{e.prefetch&&t(u)&&zt&&(a.value=!0)}),_n(()=>{a.value=!1});function l(i){return i.matched.map(_=>Object.values(_.components)).flat().filter(_=>typeof _=="function")}function f(){const i=s.route.value;if(i.meta.__prefetched)return;i.meta.__prefetched=!0;const _=i.meta.prefetch;if(_){const y=l(i);for(const w of y)w();typeof _=="function"&&_(i)}const h=[...e.prefetchFiles||[],...i.meta.prefetchFiles||[]];if(h.length>0)for(const y of h)hs(y);r()}return()=>{const i=n.default&&n.default(s);return e.custom?(re(()=>{if(i){const _=i[0];if(Kn(_.type))throw new Error('[PrefetchLink Component] when "props.custom" is true, slot content must not be plain text');o.value=_e(_.el)}else console.warn('[PrefetchLink Component] when "props.custom" is true, must exist default slot')}),i):de(ct,{ref:_=>{o.value=_},...g.value},()=>i)}}}),ys=A({name:"LayoutMenu",props:{inverted:G.bool,parentPath:G.string,noCollapsed:G.bool,globalSplit:{type:Boolean,default:void 0},splitType:{type:Number,default:ee.NONE},menuMode:{type:[String],default:""}},setup(e){const n=P(null),{splitType:s,parentPath:o,globalSplit:a}=mt(e),{menusRef:g}=ps(s,o,a),{getMenuMode:r,getMenuIndent:u,getMenuRootIndent:l,getCollapsed:f,getAccordion:i,toggleCollapsed:_}=J(),{currentRoute:h}=ve(),y=Oe(),{t:w}=ye(),C=P([]),k=P(),M=R=>{console.log(R,"expand"),C.value=R},$=R=>{y(R),t(N)&&_()},{getIsMobile:N}=ae(),E=m(()=>t(N)?Be.VERTICAL:e.menuMode||t(r)),b=m(()=>s.value===ee.ROOT);return se([h,g],async([R,x])=>{const{name:S,path:W,meta:j}=R;if(S!==Ot&&(k.value=W,i.value&&x&&x.length>0)){const z=Et(x,W);if(b.value){const Y=await xe(W);k.value=Y}else j.currentActiveMenu?(k.value=j.currentActiveMenu,re(()=>{n.value?.showOption(j.currentActiveMenu)})):(z.length>=2&&z.pop(),C.value=z)}},{immediate:!0}),{getRealCollapsed:m(()=>e.noCollapsed||b.value?!1:f.value),getInverted:!1,menuValue:k,menuInstRef:n,menusRef:g,expandedKeys:C,handleUpdateExpandedKeys:M,handleUpdateValue:$,renderIcon:({meta:R})=>{const x=R?.icon;return x?de(De,{icon:x}):null},renderLabel:R=>de(vs,{to:R.path,custom:!1},{default:()=>de("span",null,{default:()=>w(R?.label??"")})}),getRealMenuMode:E,getMenuIndent:u,getMenuRootIndent:l}}});function bs(e,n,s,o,a,g){const r=wt;return c(),v(r,{ref:"menuInstRef",value:e.menuValue,"onUpdate:value":[n[0]||(n[0]=u=>e.menuValue=u),e.handleUpdateValue],mode:e.getRealMenuMode,"key-field":"path",collapsed:e.getRealCollapsed,inverted:e.getInverted,indent:e.getMenuIndent,"root-indent":e.getMenuRootIndent,options:e.menusRef,"expanded-keys":e.expandedKeys,"render-icon":e.renderIcon,"render-label":e.renderLabel,"onUpdate:expandedKeys":e.handleUpdateExpandedKeys},null,8,["value","mode","collapsed","inverted","indent","root-indent","options","expanded-keys","render-icon","render-label","onUpdate:expandedKeys","onUpdate:value"])}const tt=le(ys,[["render",bs]]);function Vt(){const e=Bt(),{getMenuMode:n,getSplit:s,getShowHeaderTrigger:o,getIsSidebarType:a,getIsMixSidebar:g}=J(),{getShowBreadCrumb:r,getShowLogo:u}=ge(),l=m(()=>e.getHeaderSetting.show),f=m(()=>e.getHeaderSetting.height),i=m(()=>t(n)!==Be.HORIZONTAL&&t(r)&&!t(s)),_=m(()=>t(u)&&!t(a)&&!t(g)),h=m(()=>t(i)||t(o));function y(w){e.setProjectConfig({headerSetting:w})}return{setHeaderSetting:y,getShowBread:i,getShowContent:h,getShowHeaderLogo:_,getShowHeader:l,getHeaderHeight:f}}const Ss=A({name:"LayoutHeader",components:{Trigger:At,LayoutBreadcrumb:jo,LayoutMenu:tt,FullScreen:Go,DarkModeToggle:Ko,LocalePicker:Xo,UserDropDown:Wo},props:{fixed:G.bool},setup(){const{prefixCls:e}=Q("layout-header"),{getIsMobile:n}=ae(),{smaller:s,sizeEnum:o}=to(),a=s(o.XXS),{getSplit:g,getCollapsed:r,getMenuInverted:u,getShowTopMenu:l,getIsSidebarType:f,getIsMixSidebar:i,getIsTopMenu:_,getTrigger:h}=J(),{getShowBread:y,getShowContent:w,getShowHeader:C}=Vt(),k=m(()=>h.value===ue.HEADER&&!_.value&&w.value&&!g.value),{getShowLocalePicker:M}=no(),$=m(()=>!(t(f)||t(i))),N=m(()=>g.value?ee.ROOT:ee.NONE),E=m(()=>Be.HORIZONTAL),b=m(()=>u.value&&(g.value||_.value));return{getShowHeader:C,getIsMobile:n,getShowLocalePicker:M,prefixCls:e,getShowBread:y,getShowContent:w,getShowLogo:$,getCollapsed:r,getShowTopMenu:l,getShowTrigger:k,TriggerEnum:ue,getSplitType:N,getMenuMode:E,getInverted:b,getIs2xs:a}}}),Cs={class:"flex-jb-ac h-full text-1.2em"},Ls={class:"flex-jb-ac h-full"},ws={key:0,class:"flex-ac h-full"},ks={key:0,ref:"scrollEl",class:"flex-jb-ac flex-1 min-w-0 px-2 relative h-full"},Ts={class:"flex-ac h-full"};function Ms(e,n,s,o,a,g){const r=qe,u=U("Trigger"),l=U("LayoutBreadcrumb"),f=U("LayoutMenu"),i=Ht,_=U("FullScreen"),h=U("LocalePicker"),y=U("DarkModeToggle"),w=U("UserDropDown"),C=vn;return e.getShowHeader?(c(),v(C,{key:0,bordered:!e.getIsMobile,class:V([e.prefixCls,{inverted:e.getInverted}]),inverted:e.getInverted},{default:d(()=>[I("div",Cs,[I("div",Ls,[e.getShowLogo?(c(),F("div",ws,[p(r,{collapsed:e.getCollapsed,"collapsed-show-title":"","title-color":e.getInverted?"white":void 0},null,8,["collapsed","title-color"])])):B("",!0),e.getShowTrigger||e.getIsMobile?(c(),v(u,{key:1,type:e.TriggerEnum.HEADER,collapsed:e.getCollapsed},null,8,["type","collapsed"])):B("",!0),e.getShowContent&&e.getShowBread?(c(),v(l,{key:2,class:V(e.getIsMobile?"":"ml-3")},null,8,["class"])):B("",!0)]),e.getShowTopMenu&&!e.getIsMobile?(c(),F("div",ks,[p(i,{"x-scrollable":"",inverted:e.getInverted,class:"absolute left-0 top-2px"},{default:d(()=>[p(f,{"menu-mode":e.getMenuMode,"split-type":e.getSplitType,inverted:e.getInverted},null,8,["menu-mode","split-type","inverted"])]),_:1},8,["inverted"])],512)):B("",!0),I("div",Ts,[e.getIsMobile?B("",!0):(c(),v(_,{key:0})),e.getShowLocalePicker?(c(),v(h,{key:1,"trigger-cls":"app-layout-header-anction-icon",reload:!0})):B("",!0),p(y),p(w)])])]),_:1},8,["bordered","class","inverted"])):B("",!0)}const Rs=le(Ss,[["render",Ms]]),$s={key:0},Ge=A({__name:"SiderWrapper",props:{inverted:{type:Boolean,default:void 0},trigger:{type:Boolean,default:!0},width:null},setup(e){const n=e,{prefixCls:s}=Q("layout-sideBar"),{getIsDarkMode:o}=ge(),{getMenuInverted:a,getTrigger:g,getCollapsed:r,getSplit:u}=J(),{getIsMobile:l}=ae(),f=m(()=>n.trigger&&(g.value!==ue.HEADER&&!t(l)||t(u))),i=P(null),{height:_}=kt(i),h=m(()=>({maxHeight:`${_.value}px`})),y=m(()=>Ct(n.inverted)?n.inverted:a.value),{siderColor:w,siderColorInverted:C,siderBorderColor:k,siderBorderColorInverted:M}=pe("Layout"),{siderColor:$,siderBorderColor:N}=pe("Layout",!0),E=m(()=>t(o)?$:t(y)?C:w),b=m(()=>t(o)?N:t(y)?M:k);Ce(()=>({"mix-sider-bg-color":t(E),"mix-sider-border-color":t(b)}));const L=m(()=>({width:Se(n.width)}));return(O,D)=>{const R=Ht;return c(),F("div",{class:V(t(s))},[I("div",{class:V(`${t(s)}_wrapper`)},[I("div",{class:"menu_wrapper",style:q(t(L))},[me(O.$slots,"header"),I("div",{ref_key:"scrollEl",ref:i,class:"menu"},[p(R,{style:q(t(h)),inverted:t(y)},{default:d(()=>[me(O.$slots,"default")]),_:3},8,["style","inverted"])],512),me(O.$slots,"trigger",{},()=>[t(f)?(c(),v(At,{key:0,collapsed:t(r),type:t(g)},null,8,["collapsed","type"])):B("",!0)])],4),O.$slots.secondaryMenu?(c(),F("div",$s,[me(O.$slots,"secondaryMenu")])):B("",!0)],2)],2)}}}),Es=A({__name:"LayoutSider",setup(e){const{prefixCls:n}=Q("layout-sideBar"),{getIsMobile:s}=ae(),{getCollapsed:o,getRealWidth:a,getMobileWidth:g,getMenuHidden:r,getMenuInverted:u,getIsSidebarType:l,getSplit:f}=J(),i=m(()=>f.value?ee.SECONDARY:ee.NONE),_=m(()=>f.value?Be.VERTICAL:null),h=m(()=>f.value?!r.value:!0),y=m(()=>u.value&&!f.value),w=m(()=>s.value?g.value:a.value);return(C,k)=>{const M=qe;return je((c(),v(Ge,{class:V(t(n)),width:t(w),inverted:t(y)},{header:d(()=>[t(l)?(c(),v(M,{key:0,class:"flex-ac h-64px",collapsed:t(o),"title-color":t(u)?"white":void 0},null,8,["collapsed","title-color"])):B("",!0)]),default:d(()=>[p(tt,{"menu-mode":t(_),"split-type":t(i),inverted:t(y)},null,8,["menu-mode","split-type","inverted"])]),_:1},8,["class","width","inverted"])),[[Tt,t(h)]])}}}),xs={class:"header_wrapper"},Is={class:"title font-segoe"},Os={name:"LayoutMixSider",directives:{clickOutside:ao}},Bs=A({...Os,setup(e){Ce(T=>({"3630a3d8":t(x),36152966:t(D)}));const n=P(),s=P(""),o=P(),a=P(!1),g=P(),r=Ie({borderLeftColor:"transparent",borderRightColor:"transparent",borderWidth:void 0}),u=P(null),{prefixCls:l}=Q("layout-mix-sider"),f=Oe(),{t:i}=ye(),{getIsDarkMode:_}=ge(),{getMenuWidth:h,getCloseMixSidebarOnChange:y,getMixSideTrigger:w,getMenuInverted:C,getMixSideFixed:k,mixSideHasChildrenRef:M,setMenuSetting:$,getIsMixSidebar:N,getCollapsed:E}=J(),{title:b}=$t(),L=Ze(),O=m(()=>({left:t(k)?0:`${t(R)}px`,position:t(k)?"static":"absolute",...r})),D=m(()=>t(_)||t(C)?"white":"var(--app-primary-color)");se(k,async T=>{const H=_e(g);if(H)if(T)H.style.transitionProperty="";else{await re();const X=getComputedStyle(H).transitionProperty;H.style.transitionProperty=`${X}, left`}}),se([k,a],([T,H])=>{r.borderLeftColor=T?"transparent":H?t(C)&&!t(_)?"rgb(18, 41, 64)":"var(--mix-sider-border-color)":"transparent",r.borderRightColor=T?"transparent":H?"var(--mix-sider-border-color)":"transparent",r.borderWidth=H?void 0:0},{immediate:!0}),se([o,k],([T,H])=>{M.value=!!(T&&T?.length>0);const X=H&&t(M);X&&(a.value=X)});const R=m(()=>t(E)?fe.COLLAPSED_WIDTH:fe.WIDTH),x=m(()=>t(E)?fe.LOGO_COLLAPSED_WRAPPER_HEIGHT:fe.LOGO_WRAPPER_HEIGHT),S=m(()=>t(E)?fe.LOGO_COLLAPSED_SIZE:fe.LOGO_SIZE),W=m(()=>t(k)?{}:{onMouseleave:Y});_t(async()=>{n.value=await Ve()}),se([()=>L.getLastBuildMenuTime,()=>L.getBackMenuList],async()=>{n.value=await Ve()},{immediate:!0}),Pt(T=>{u.value=T,z(!0),t(y)&&ie()});async function j(T,H=!1){const X=await $e(T);if(t(s)===T?(H?t(a)||(a.value=!0):t(a)?ie():a.value=!0,t(a)||z()):(a.value=!0,s.value=T),!X||X.length===0){H||f(T),o.value=[],ie();return}o.value=X}async function z(T=!1){const H=u.value?.path;if(H&&(s.value=await xe(H),t(N))){const ce=(n.value||[]).find(te=>te.path===t(s))?.path;if(ce){const te=await $e(ce);T&&(o.value=te,t(k)&&(a.value=te.length>0)),te.length===0&&(o.value=[])}}}function Y(){z(!0),ie()}function Fe(T){return t(w)==="hover"?{onMouseenter:()=>j(T.path,!0),onClick:async()=>{const H=await $e(T.path);T.path&&H&&H.length===0&&f(T.path)}}:{onClick:()=>j(T.path)}}function ke(){$({mixSideFixed:!t(k)})}function ie(){const T=t(o);t(k)?(!T||T.length===0)&&(a.value=!1):a.value=!1}const Te=T=>de("div",{class:"item_wrapper",...Fe(T)},[de(De,{useTranstion:!0,size:E.value?18:22,icon:T.icon||T.meta&&T.meta.icon}),de("p",{class:"item_label"},i(T?.label??""))]);return(T,H)=>{const X=qe,be=wt,ce=yn("click-outside");return je((c(),v(Ge,bn({class:[t(l),{mini:t(E)}],width:t(R)},t(W)),{header:d(()=>[p(X,{class:V(`${t(l)}-logo`),"logo-size":t(S),"show-title":!1,"is-static":""},null,8,["class","logo-size"])]),default:d(()=>[p(be,{value:t(s),"onUpdate:value":H[0]||(H[0]=te=>Ae(s)?s.value=te:null),indent:0,options:t(n),inverted:t(C),"key-field":"path",class:V(`${t(l)}-menu`),"render-icon":()=>null,"render-label":Te},null,8,["value","options","inverted","class"])]),secondaryMenu:d(()=>[p(Ge,{ref_key:"sideRef",ref:g,class:V(`${t(l)}-secondary-menu_wrapper`),style:q(t(O)),width:t(a)?t(h):0,trigger:!1},{header:d(()=>[I("div",xs,[I("span",Is,K(t(b)),1),p(De,{size:16,icon:t(k)?"ri:pushpin-2-fill":"ri:pushpin-2-line",color:t(C)||t(_)?"white":void 0,class:"pushpin",onClick:ke},null,8,["icon","color"])])]),default:d(()=>[p(tt,{inverted:t(C),"split-type":t(ee).SECONDARY,"parent-path":t(s),"global-split":"","no-collapsed":""},null,8,["inverted","split-type","parent-path"])]),_:1},8,["class","style","width"])]),_:1},16,["class","width"])),[[ce,Y]])}}}),Ps=A({name:"SiderWrapper",components:{Sider:Es,MixSider:Bs},setup(){const{prefixCls:e}=Q("layout-sider-wrapper"),{getIsMobile:n}=ae(),{setMenuSetting:s,getShowSidebar:o,getIsMixSidebar:a,getMobileWidth:g,getCollapsed:r}=J();function u(l){s({collapsed:!l})}return{prefixCls:e,getMobileWidth:g,getShowSidebar:o,getIsMobile:n,getIsMixSidebar:a,getCollapsed:r,handleChange:u}}});function Fs(e,n,s,o,a,g){const r=U("Sider"),u=yt,l=bt,f=U("MixSider");return e.getShowSidebar||e.getIsMobile?(c(),F(he,{key:0},[e.getIsMobile?(c(),v(l,{key:0,placement:"left",class:V(e.prefixCls),width:e.getMobileWidth,show:!e.getCollapsed,"onUpdate:show":e.handleChange},{default:d(()=>[p(u,{"body-content-style":"padding:0;"},{default:d(()=>[p(r)]),_:1})]),_:1},8,["class","width","show","onUpdate:show"])):e.getIsMixSidebar?(c(),v(f,{key:1})):(c(),v(r,{key:2}))],64)):B("",!0)}const Hs=le(Ps,[["render",Fs]]);function Gt(){const e=Bt(),n=m(()=>e.getMultiTabsSetting.show);function s(o){e.setProjectConfig({multiTabsSetting:o})}return{setMultipleTabSetting:s,getShowMultipleTab:n}}function As(){const e=ve(),{currentRoute:n}=e,{getShowMultipleTab:s}=Gt(),o=Pe(),a=m(()=>r(Mt(e.getRoutes()))||[]),g=m(()=>o.getTabList.reduce((f,i)=>(i.meta&&Reflect.has(i.meta,"frameSrc")&&f.push(i.name),f),[]));function r(f){let i=[];for(const _ of f){const{meta:{frameSrc:h}={},children:y}=_;h&&i.push(_),y&&y.length&&i.push(...r(y))}return i=Sn(i,"name"),i}function u(f){return f.name===t(n).name}function l(f){return t(s)?t(g).includes(f):e.currentRoute.value.name===f}return{hasRenderFrame:l,getFramePages:a,showIframe:u,getAllFramePages:r}}const Ns=A({name:"FrameLayout",components:{FramePage:ro},setup(){const{getFramePages:e,hasRenderFrame:n,showIframe:s}=As(),o=m(()=>t(e).length>0);return{getFramePages:e,hasRenderFrame:n,showIframe:s,showFrame:o}}}),Ds={key:0};function zs(e,n,s,o,a,g){const r=U("FramePage");return e.showFrame?(c(),F("div",Ds,[(c(!0),F(he,null,Rt(e.getFramePages,u=>(c(),F(he,{key:u.path},[u.meta?.frameSrc&&e.hasRenderFrame(u.name)?je((c(),v(r,{key:0,"frame-src":u.meta.frameSrc},null,8,["frame-src"])),[[Tt,e.showIframe(u)]]):B("",!0)],64))),128))])):B("",!0)}const Us=le(Ns,[["render",zs]]),Vs=A({name:"PageLayout",components:{FrameLayout:Us},setup(){const e=P("readly"),n=P("fade-slide"),{getCanEmbedIFramePage:s}=ge();An({pageTranstionName:n,pageTranstionState:e});const{openCache:o,getCaches:a,getKey:g}=lo(n);return{openCache:o,getCaches:a,getKey:g,pageTranstionName:n,handleStart:()=>{e.value="readly"},handleEnter:()=>{e.value="running"},handleEnd:()=>{e.value="finshed"},getCanEmbedIFramePage:s}}});function Gs(e,n,s,o,a,g){const r=U("RouterView"),u=U("FrameLayout");return c(),F(he,null,[p(r,null,{default:d(({Component:l})=>[p(Ee,{name:e.pageTranstionName,mode:"out-in",appear:"",onBeforeEnter:e.handleStart,onEnter:e.handleEnter,onAfterEnter:e.handleEnd},{default:d(()=>[e.openCache?(c(),v(Cn,{key:0,include:e.getCaches},[(c(),v(Ne(l),{key:e.getKey}))],1032,["include"])):(c(),v(Ne(l),{key:e.getKey}))]),_:2},1032,["name","onBeforeEnter","onEnter","onAfterEnter"])]),_:1}),e.getCanEmbedIFramePage?(c(),v(u,{key:0})):B("",!0)],64)}const Ws=le(Vs,[["render",Gs]]),js={class:"flex-1"},Ks=A({__name:"index",setup(e){const n=P(),s=P(),o=Ln(),{prefixCls:a}=Q("layout-content"),{getOpenPageLoading:g}=Xn(),{getPageLoading:r}=ge(),{width:u,height:l}=kt(s),{emit:f}=io();wn(s,f),Nn({width:u,height:l});const i=m(()=>g.value&&!o.meta?.hideLoading&&r.value);return Zn(async()=>{const _=n.value;_&&(await We(300),_.scrollTo({left:0,top:0}))}),(_,h)=>{const y=qn,w=kn,C=St,k=Tn;return c(),F("main",{ref_key:"contentEl",ref:s,class:V(["transform-gpu transform",[t(a)]])},[p(y,{show:t(i)},null,8,["show"]),p(k,{embedded:"",class:"h-full",position:"absolute"},{default:d(()=>[p(C,{ref_key:"scrollBarEl",ref:n,style:q({maxHeight:`${t(l)}px`})},{default:d(()=>[p(w,{right:40,bottom:60}),I("div",{class:"flex flex-col",style:q({minHeight:`${t(l)}px`})},[I("div",js,[p(Ws)]),me(_.$slots,"footer")],4)]),_:3},8,["style"])]),_:3})],2)}}}),Xs=A({__name:"TabRedo",setup(e){const n=P(!1),{refreshPage:s}=Ft();async function o(){const a=Date.now();n.value=!0,await s(),await We(1200-(Date.now()-a)%1200),n.value=!1}return(a,g)=>(c(),F("div",{class:"app-mtabs-anction-btn-wrapper group",onClick:o},[I("span",{class:V(["i-codicon-refresh app-mtabs-anction-btn",{"app-ease-spin animate-duration-1200":t(n)}])},null,2)]))}});var Z=(e=>(e[e.REFRESH_PAGE=0]="REFRESH_PAGE",e[e.TOGGLE_FULL_SCREEN=1]="TOGGLE_FULL_SCREEN",e[e.CLOSE_CURRENT=2]="CLOSE_CURRENT",e[e.CLOSE_LEFT=3]="CLOSE_LEFT",e[e.CLOSE_RIGHT=4]="CLOSE_RIGHT",e[e.CLOSE_OTHER=5]="CLOSE_OTHER",e[e.CLOSE_ALL=6]="CLOSE_ALL",e[e.SCALE=7]="SCALE",e))(Z||{});function Zs(e,n){const s=Ie({current:null,currentIndex:0}),{t:o}=ye(),a=Pe(),{currentRoute:g}=ve(),{refreshPage:r,closeAll:u,close:l,closeLeft:f,closeOther:i,closeRight:_}=Ft(),h=m(()=>t(n)?e.tabItem:t(g)),{getShowMenu:y,setMenuSetting:w}=J(),{getShowHeader:C,setHeaderSetting:k}=Vt(),M=Mn(ut(y),ut(C));function $(){const L=M.value;w({show:L,hidden:!L}),k({show:L})}const N=m(()=>{if(!t(h))return;const{path:L}=t(g),O=s.current,D=O?O.path===L:!1,R=s.currentIndex,x=R===0||!D,S=a.getTabList.length===1,W=!D||R===a.getTabList.length-1&&a.getLastDragEndIndex>=0,j=[{key:Z.TOGGLE_FULL_SCREEN,label:o("layout.multipleTab.toggleFullScreen"),iconName:M.value?"i-radix-icons-exit-full-screen":"i-radix-icons-enter-full-screen"},{type:"divider",key:"d2"},{key:Z.CLOSE_LEFT,label:o("layout.multipleTab.closeLeft"),disabled:x,iconName:"i-ph:arrow-line-left-bold"},{key:Z.CLOSE_RIGHT,label:o("layout.multipleTab.closeRight"),disabled:W,iconName:"i-ph:arrow-line-right-bold"},{key:Z.CLOSE_OTHER,label:o("layout.multipleTab.closeOther"),disabled:S||!D,iconName:"i-dashicons:align-center"},{key:Z.CLOSE_ALL,label:o("layout.multipleTab.closeAll"),disabled:S,iconName:"i-clarity:minus-line"}];return n.value?j.slice(2):j});function E(L){return O=>{if(!L)return;O?.preventDefault();const D=a.getTabList.findIndex(R=>R.path===L.path);s.current=L,s.currentIndex=D}}function b(L){switch(L){case Z.REFRESH_PAGE:r();break;case Z.TOGGLE_FULL_SCREEN:$();break;case Z.CLOSE_CURRENT:l(e.tabItem);break;case Z.CLOSE_LEFT:f();break;case Z.CLOSE_RIGHT:_();break;case Z.CLOSE_OTHER:i();break;case Z.CLOSE_ALL:u();break}}return{getDropMenuList:N,handleMenuEvent:b,handleContextMenu:E}}const qs=A({name:"TabContent",props:{tabItem:{type:Object,default:null},isExtra:Boolean},setup(e){const{prefixCls:n}=Q("multiple-tabs-content"),{t:s}=ye(),o=Ie({x:0,y:0}),a=Rn(!1),g=m(()=>{const{tabItem:{meta:b}={}}=e;return b&&s(b.title)}),r=m(()=>!e.isExtra),u=m(()=>t(r)?o.x:void 0),l=m(()=>t(r)?o.y:void 0),f=m(()=>t(r)?t(a):void 0),i=m(()=>t(r)?$:void 0),_=m(()=>t(r)?"manual":"click"),h=m(()=>t(r)?"bottom-start":"bottom-end"),{getDropMenuList:y,handleMenuEvent:w,handleContextMenu:C}=Zs(e,r);async function k(b){e.tabItem&&(b.preventDefault(),a.value=!1,await re(),o.x=b.clientX,o.y=b.clientY,a.value=!0,C(e.tabItem)(b))}function M(b){e.tabItem&&C(e.tabItem)(b)}function $(){a.value=!1}function N(b){w(b),$()}function E(b){return p("i",{class:`${b.iconName} z-1 text-4`},null)}return()=>p(he,null,[t(r)&&p("div",{class:`${n}__info py-1 pl-2`,onContextmenu:k},[p("span",null,[t(g)])]),p($n,{x:t(u),y:t(l),show:t(f),onSelect:N,onClickoutside:t(i),options:t(y),"render-label":({label:b})=>b,"render-icon":E,trigger:t(_),placement:t(h)},{default:()=>[!t(r)&&p("div",{class:"app-mtabs-anction-btn-wrapper group",onClick:M},[p("span",{class:"i-fluent-options-48-regular app-mtabs-anction-btn"},null)])]})])}});function Ys(){const e=P([]),n=Pe(),s=ve();function o(r){const u=[];return r&&r.forEach(l=>{l.meta&&l.meta.affix&&u.push(Mt(l))}),u}function a(){const r=o(s.getRoutes());e.value=r;for(const u of r)n.addTab({meta:u.meta,name:u.name,path:u.path})}let g=!1;return g||(a(),g=!0),e.value.map(r=>r.meta?.title).filter(Boolean)}const Js=A({name:"MultipleTabs",components:{TabRedo:Xs,TabContent:qs},setup(){Ys();const e=P(),n=P(),s=ve(),o=Pe(),{prefixCls:a}=Q("multiple-tabs"),{getShowMultipleTab:g}=Gt(),r=Oe(),u=P({borderTop:"none",borderRadius:"0px",padding:"0px",paddingRight:"6px"}),l=m(()=>({backgroundColor:Yn("Layout","headerColor").value})),f=m(()=>o.getTabList.filter(h=>!h.meta?.hideTab));return Pt(h=>{const{name:y}=h;if(y===Ot||!h)return;const{path:w,fullPath:C,meta:k={}}=h,{currentActiveMenu:M,hideTab:$}=k,N=$?M:null,E=N||C||w;if(n.value!==E&&(n.value=E),N){const b=s.getRoutes().find(L=>L.path===M);b&&o.addTab(b)}else o.addTab(t(h))}),se(()=>n.value,h=>{re(()=>{if(!h)return;const y=_e(e)?.querySelector(`[data-name="${h}"]`);y&&setTimeout(()=>{y.scrollIntoView({behavior:"smooth"})},50)})},{immediate:!0}),Lt(()=>_e(e),h=>{const y=h.querySelector(".n-tabs-nav");y.style.minHeight=`${Jn}px`}),{activeKeyRef:n,panels:f,tabsElRef:e,handleClose:h=>{o.closeTabByKey(h,s)},handleTabChange:h=>{n.value=h,r(h,!1)},prefixCls:a,getTabStyle:u,getWrapperStyle:l,getShowMultipleTab:g}}}),Qs=I("div",{class:"placeholder"},null,-1),ea={class:"flex h-full w-18"};function ta(e,n,s,o,a,g){const r=U("TabContent"),u=En,l=U("TabRedo"),f=xn;return e.getShowMultipleTab?(c(),F("div",{key:0,style:q(e.getWrapperStyle),class:V(e.prefixCls)},[p(f,{ref:"tabsElRef",value:e.activeKeyRef,"onUpdate:value":[n[0]||(n[0]=i=>e.activeKeyRef=i),e.handleTabChange],type:"card",size:"small",closable:"","tab-style":e.getTabStyle,onClose:e.handleClose},{prefix:d(()=>[Qs]),suffix:d(()=>[I("div",ea,[p(r,{"is-extra":"","tab-item":e.$route},null,8,["tab-item"]),p(l)])]),default:d(()=>[(c(!0),F(he,null,Rt(e.panels,i=>(c(),v(u,{key:i.path||i.fullPath,name:i.path||i.fullPath,class:V({"!pr-2":i?.meta?.affix}),closable:!i?.meta?.affix},{default:d(()=>[p(r,{"tab-item":i},null,8,["tab-item"])]),_:2},1032,["name","class","closable"]))),128))]),_:1},8,["value","tab-style","onClose","onUpdate:value"])],6)):B("",!0)}const na=le(Js,[["render",ta]]),oa=A({name:"DefaultLayout",components:{LayoutSider:Hs,LayoutHeader:Rs,LayoutContent:Ks,LayoutFooter:co,MTabs:na},setup(){const{prefixCls:e}=Q("default-layout"),{getMenuType:n}=J(),{runLog:s}=uo();return{getLayoutCls:m(()=>{let a="";switch(n.value){case Me.SIDEBAR:a=Re.SIDEBAR;break;case Me.MIX_SIDEBAR:a=Re.MIX_SIDEBAR;break;case Me.MIX:a=Re.MIX;break;case Me.TOP_MENU:a=Re.TOP_MENU;break}return`${a}`}),prefixCls:e,runLog:s}}});function sa(e,n,s,o,a,g){const r=U("LayoutHeader"),u=U("LayoutSider"),l=U("MTabs"),f=U("LayoutFooter"),i=U("LayoutContent"),_=Ao;return c(),F("div",{class:V([e.prefixCls,e.getLayoutCls])},[p(r),p(u),p(l),p(i,null,{footer:d(()=>[p(f)]),_:1}),p(_,{ref:"runLog"},null,512)],2)}const Ca=le(oa,[["render",sa]]);export{Ca as default};
