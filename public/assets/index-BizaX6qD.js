import{_ as Ee}from"./PageWrapper.vue_vue_type_style_index_0_lang-B-QjJlfz.js";import{a7 as i,aK as x,av as D,aN as Te,I as Be,A as g,aO as Ie,aP as Ne,aQ as Ve,a8 as c,a9 as o,aa as l,aA as q,u as t,aG as J,ax as Pe,aR as Me,aS as w,aL as h,az as ee,aF as B,am as A,aI as Fe,aT as We,aU as Ue,aV as Ae,aW as De,ap as He,aM as Ke,aX as Oe,aY as je,aZ as Ge,a_ as Qe,a$ as Xe,aE as Ye,b0 as Ze,B as ne,b1 as te,b2 as qe,b3 as Je,b4 as en,b5 as nn,b6 as tn}from"./vendor-CVUNLYN4.js";import{c as on,a as ln,_ as an,d as sn}from"./index-BW0Kz9QR.js";import{g as rn,f as cn,s as un,_ as pn}from"./socket-Du94NUmg.js";import{I as k}from"./Icon-ljQHnwJa.js";import{_ as dn}from"./index.vue_vue_type_style_index_0_lang-Dood1NSO.js";import _n from"./selectFile-B9sHj8Ht.js";import{u as gn}from"./useAppInject-Dal6O7k8.js";import{u as mn}from"./useTransition-CObelXI-.js";import{u as fn}from"./index-Ddm3CTAd.js";import{s as vn,g as yn}from"./file-BQviJjRi.js";import"./sharp-arrow-back-ios-DFVIULGe.js";import"./useDesign-DCKbhR-1.js";import"./propTypes-CYyueTg3.js";import"./useTextMate-BU0ngBPz.js";import"./search2-line-Cm_Nf99E.js";import"./index-wCKpV3TT.js";import"./folderEmpty-BCYceZjA.js";import"./filePrefix-TZsSBMTw.js";const hn={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},kn=D("path",{fill:"currentColor",d:"M13 19.3v-6.7l6-3.4V13c.7 0 1.4.1 2 .4V7.5c0-.4-.2-.7-.5-.9l-7.9-4.4c-.2-.1-.4-.2-.6-.2s-.4.1-.6.2L3.5 6.6c-.3.2-.5.5-.5.9v9c0 .4.2.7.5.9l7.9 4.4c.2.1.4.2.6.2s.4-.1.6-.2l.9-.5c-.3-.6-.4-1.3-.5-2M12 4.2l6 3.3l-2 1.1l-5.9-3.4zm-1 15.1l-6-3.4V9.2l6 3.4zm1-8.5L6 7.5l2-1.2l6 3.5zm8 4.2v3h3v2h-3v3h-2v-3h-3v-2h3v-3z"},null,-1),bn=[kn];function wn(I,$){return i(),x("svg",hn,[...bn])}const xn={name:"mdi-package-variant-closed-plus",render:wn},zn={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},Cn=D("path",{fill:"currentColor",d:"M8.27 3L3 8.27v7.46L8.27 21h7.46C17.5 19.24 21 15.73 21 15.73V8.27L15.73 3M9.1 5h5.8L19 9.1v5.8L14.9 19H9.1L5 14.9V9.1m6 5.9h2v2h-2zm0-8h2v6h-2z"},null,-1),$n=[Cn];function Rn(I,$){return i(),x("svg",zn,[...$n])}const Sn={name:"mdi-alert-octagon-outline",render:Rn},Ln={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},En=Te('<g stroke="currentColor"><circle cx="12" cy="12" r="9.5" fill="none" stroke-linecap="round" stroke-width="3"><animate attributeName="stroke-dasharray" calcMode="spline" dur="1.5s" keySplines="0.42,0,0.58,1;0.42,0,0.58,1;0.42,0,0.58,1" keyTimes="0;0.475;0.95;1" repeatCount="indefinite" values="0 150;42 150;42 150;42 150"></animate><animate attributeName="stroke-dashoffset" calcMode="spline" dur="1.5s" keySplines="0.42,0,0.58,1;0.42,0,0.58,1;0.42,0,0.58,1" keyTimes="0;0.475;0.95;1" repeatCount="indefinite" values="0;-16;-59;-59"></animate></circle><animateTransform attributeName="transform" dur="2s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"></animateTransform></g>',1),Tn=[En];function Bn(I,$){return i(),x("svg",Ln,[...Tn])}const In={name:"svg-spinners-ring-resize",render:Bn},Nn={key:1},Vn={key:1},Pn=Be({__name:"index",setup(I){const{message:$}=on(),{getIsMobile:m}=gn(),{t:p}=ln(),oe=g("fade-slide");mn(oe);const H=g(),f=g({}),d=g({});let N=null;const le=g(""),R=g(!0),S=g("on"),V=g(!1),z=g(m.value?14:16),_=g([]),v=g({}),b=g(""),L=g(!1),u=g(null),E=async n=>{switch(n){case"findBox":V.value=!V.value;break;case"wordWrap":S.value=S.value==="on"?"off":"on";break;case"minimap":R.value=!R.value;break;case"showEditorShortcutsInfo":t(f.value)[`editor-${u.value.key}`].showShortCuts();break}},ae=n=>{switch(n.item.label){case"1":me();break}},K=async()=>{try{H.value?.open()}catch{}},se=n=>{if(!u.value)return;const e=u.value.key;n!==e&&(v.value[e].content=t(f.value)[`editor-${e}`].getValue())},P=n=>{_.value.forEach(e=>{e.key===n&&(e.log.runEnd&&!e.log.isRunning&&(e.log.runEnd=!1),e.log.hasNew=!1,b.value=n,u.value=e,delete u.value.children)}),setTimeout(ge,800)},ie=n=>{_.value.forEach((e,r)=>{e.key===n&&(_.value.splice(r,1),delete v.value[e.key],delete f.value[`editor-${e.key}`],_.value.length>0?b.value===n&&P(_.value[_.value.length-1].key):(j("content"),O(e.key)))})},re=n=>{se(n),P(n)},ce=n=>{ie(n.value)},ue=()=>A(k,{size:24,icon:u.value.log.isRunning?"mdi:bug-stop-outline":"mdi:bug-play-outline",style:"margin-top: 4px"},{}),pe=()=>A(k,{size:24,icon:"tabler:settings-code",style:"margin-top: 4px"},{}),de=()=>A(k,{size:20,icon:"mdi:application-cog-outline",style:"margin-top: 6px"},{}),_e=async n=>{_.value.find(r=>r.key===n.key)||(await fe(n.key,n.language),_.value.push({...n,log:{content:"",newContent:"",id:"",runEnd:!1,isRunning:!1,hasNew:!1,env:[],option:[],isLogReachBottom:!0}})),P(n.key)},ge=()=>{ne().then(()=>{const n=u.value;if(d.value&&d.value[`log-${n.key}`]&&d.value[`log-${n.key}`].scrollbarRef?.containerRef){const e=d.value[`log-${n.key}`].scrollbarRef?.containerRef;e.removeEventListener("scroll",M),e.addEventListener("scroll",M)}})},M=Ie(n=>{const e=u.value;if(d.value&&d.value[`log-${e.key}`]){const r=d.value[`log-${e.key}`].$el.clientHeight,s=n.target.scrollTop,T=n.target.scrollHeight;e.log.isLogReachBottom=r+s>=T-10}},500),me=async()=>{const n=u.value;let e;if(n.log.isRunning)await un({path:n.key}),n.log.isRunning=!1;else try{e=fn(n.key,n.log.option.concat([{key:"--no-log",value:""}]),n.log.env,!1);const r=n.key,s=t(f.value)[`editor-${n.key}`].getValue();await vn({content:s,path:r}),v.value[r]&&(v.value[r].content=s),n.log.content="",n.log.isRunning=!0,n.log.id=await cn({cmd:e}),n.log.runEnd=!0}catch{}finally{}},fe=async(n,e)=>{le.value=e||"plaintext",L.value=!0;try{const r=await yn({path:encodeURI(n)});L.value=!1,r?v.value[n]={content:r,language:e}:(v.value[n]={content:"",language:e},$.info(p("page.code.fileContentIsEmptyMsg")))}catch{j("content")}finally{L.value=!1}},O=n=>{f.value[`editor-${n}`]&&(f.value[`editor-${n}`].dispose(),delete t(f.value)[`editor-${n}`])},j=n=>{switch(n){case"content":u.value=null,b.value="";break}},G=({code:n,result:e})=>{const r=u.value;!r||!r.log||(_.value.forEach(s=>{e.runId===s.log.id&&(s.log.content+=e.log||"",s.log.isRunning=!!n,e.over&&(s.log.isRunning=!1,s.log.id=""),s.key!==r.key&&(s.log.hasNew=!0))}),Fe(()=>{const s=u.value;s.log.content&&ne().then(()=>{s.log.isLogReachBottom&&d.value&&d.value[`log-${s.key}`]&&d.value[`log-${s.key}`].scrollTo({position:"bottom",silent:!0})})}))};return Ne(()=>{N=rn(),N?.off("runLog").on("runLog",G)}),Ve(()=>{if(_.value.length>0&&O(_.value[0].key),d.value)for(const n in d.value){const e=d.value[n];e&&e.scrollbarRef?.containerRef&&e.scrollbarRef.containerRef.removeEventListener("scroll",M)}N?.off("runLog",G)}),(n,e)=>{const r=In,s=We,T=pn,Q=qe,y=Ue,ve=Je,ye=an,he=en,ke=Sn,X=Ae,be=nn,we=tn,xe=De,ze=xn,C=He,F=Ke,W=Oe,Y=je,Z=Ge,Ce=Qe,$e=Xe,Re=Ye,Se=Ze,Le=Ee;return i(),c(Le,{ref:"pageWrapper","content-full":"","no-header":""},{default:o(()=>[l(F,{bordered:!t(m),class:"tab-panel",style:{height:"100%","word-break":"unset"},"content-style":"padding: 0; height: 100%"},{default:o(()=>[l(q,{name:"fade",mode:"out-in",appear:""},{default:o(()=>[t(_).length>0?(i(),c(xe,{key:0,value:t(b),"onUpdate:value":e[0]||(e[0]=a=>J(b)?b.value=a:null),"drag-sort":"",style:{height:"100%",width:"100%",display:"flex","flex-direction":"column"},theme:"card",addable:t(_).length>0,onChange:re,onAdd:e[1]||(e[1]=a=>K()),onRemove:ce},{default:o(()=>[(i(!0),x(Me,null,Pe(t(_),a=>(i(),c(we,{key:a.key,value:a.key,removable:"",style:{height:"100%",width:"100%",padding:"0"},"destroy-on-hide":!1},{label:o(()=>[t(m)?(i(),c(y,{key:1,style:{gap:"4px"}},{default:o(()=>[a.log.isRunning?(i(),c(s,{key:0,size:16},{default:o(()=>[l(r,{style:{"vertical-align":"-0.3em"}})]),_:1})):(i(),x("div",Vn,[a.log.runEnd?(i(),c(s,{key:0,size:16},{default:o(()=>[l(T,{style:{color:"var(--app-success-color)","vertical-align":"-0.3em"}})]),_:1})):(i(),c(s,{key:1,size:16},{default:o(()=>[(i(),c(te(a.icon),{style:{"vertical-align":"-0.3em"}}))]),_:2},1024))])),w(" "+h(a.label)+" ",1),a.log.hasNew?(i(),c(Q,{key:2,dot:"",offset:[2,-1]})):B("",!0)]),_:2},1024)):(i(),c(ve,{key:0,placement:"top",trigger:"hover",delay:1e3},{trigger:o(()=>[l(y,{style:{gap:"4px"}},{default:o(()=>[a.log.isRunning?(i(),c(s,{key:0,size:16},{default:o(()=>[l(r,{style:{"vertical-align":"-0.3em"}})]),_:1})):(i(),x("div",Nn,[a.log.runEnd?(i(),c(s,{key:0,size:16},{default:o(()=>[l(T,{style:{color:"var(--app-success-color)","vertical-align":"-0.3em"}})]),_:1})):(i(),c(s,{key:1,size:16},{default:o(()=>[(i(),c(te(a.icon),{style:{"vertical-align":"-0.3em"}}))]),_:2},1024))])),w(" "+h(a.label)+" ",1),a.log.hasNew?(i(),c(Q,{key:2,dot:"",offset:[2,-1]})):B("",!0)]),_:2},1024)]),default:o(()=>[D("span",null,h(a.key),1)]),_:2},1024))]),default:o(()=>[l(q,{name:"fade",mode:"out-in",appear:""},{default:o(()=>[l(be,{direction:t(m)?"vertical":"horizontal","default-size":.7,max:1,min:0},{1:o(()=>[l(dn,{ref_for:!0,ref:U=>t(f)[`editor-${a.key}`]=U,style:{height:"100%",padding:"0","z-index":"999999"},value:{content:t(v)[a.key].content,language:t(v)[a.key].language},"word-wrap":t(S),minimap:t(R),"font-size":t(z),"find-box":t(V)},null,8,["value","word-wrap","minimap","font-size","find-box"]),l(ye,{show:t(L)},null,8,["show"])]),2:o(()=>[a.log.content?(i(),c(he,{key:0,ref_for:!0,ref:U=>t(d)[`log-${a.key}`]=U,log:a.log.content,"font-size":t(z),"line-height":1.5,language:"naive-log",style:ee({padding:t(m)?"1em 0.6em":"1em 0 1em 1.6em",width:"100%",height:"100%"})},null,8,["log","font-size","style"])):(i(),c(X,{key:1,class:"min-h-200px flex-jc-ac h-full",size:"huge","show-description":!0,description:t(p)("page.code.noLog")},{icon:o(()=>[l(s,null,{default:o(()=>[l(ke)]),_:1})]),_:1},8,["description"]))]),_:2},1032,["direction"])]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["value","addable"])):(i(),c(X,{key:1,class:"min-h-200px flex-jc-ac h-full",size:"huge","show-icon":!1,"show-description":!1},{extra:o(()=>[l(C,{block:"",strong:"",size:"large",type:"primary",secondary:"",focusable:!1,style:{"border-radius":"6px",height:"160px",width:"160px"},onClick:e[2]||(e[2]=a=>K())},{default:o(()=>[l(y,{vertical:"",style:{gap:"20px"}},{default:o(()=>[l(s,{size:60},{default:o(()=>[l(ze,{style:{"vertical-align":"baseline"}})]),_:1}),w(" "+h(t(p)("page.code.createWorkspace")),1)]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1},8,["bordered"]),t(b)?(i(),c(Se,{key:0,class:"sticky-tool",type:"compact",shape:"round",style:ee(t(m)?"right: 14px; bottom: 14px":"right: 24px; bottom: 24px"),"on-click":ae},{default:o(()=>[l(W,{icon:ue,label:"1",popup:t(u).log.isRunning?t(p)("page.code.stopBtn"):t(p)("page.code.runBtn")},null,8,["popup"]),l(W,{icon:pe,label:"2","popup-props":{trigger:t(m)?"click":"hover",placement:t(m)?"top":"left-bottom",overlayInnerStyle:{padding:"0"}}},{popup:o(()=>[l(F,{bordered:!1,style:{width:"100%",height:"100%"},"content-style":"width: 100%; height: 100%; padding: 12px"},{default:o(()=>[l(Ce,{type:"segment",style:{"min-width":"260px"},animated:""},{default:o(()=>[l(Z,{name:"1",tab:t(p)("page.code.optionConfig")},{default:o(()=>[l(Y,{value:t(u).log.option,"onUpdate:value":e[3]||(e[3]=a=>t(u).log.option=a),preset:"pair","show-sort-button":"","key-placeholder":t(p)("file.run.paramKeyPlaceholder"),"value-placeholder":t(p)("file.run.paramValuePlaceholder")},null,8,["value","key-placeholder","value-placeholder"])]),_:1},8,["tab"]),l(Z,{name:"2",tab:t(p)("page.code.envConfig")},{default:o(()=>[l(Y,{value:t(u).log.env,"onUpdate:value":e[4]||(e[4]=a=>t(u).log.env=a),preset:"pair","show-sort-button":"","key-placeholder":t(p)("file.run.paramKeyPlaceholder"),"value-placeholder":t(p)("file.run.paramValuePlaceholder")},null,8,["value","key-placeholder","value-placeholder"])]),_:1},8,["tab"])]),_:1})]),_:1})]),_:1},8,["popup-props"]),l(W,{icon:de,label:"3","popup-props":{trigger:t(m)?"click":"hover",placement:"left-bottom",overlayInnerStyle:{padding:"0"}}},{popup:o(()=>[l(F,{bordered:!1,style:{width:"100%",height:"100%"},"content-style":"width: 100%; height: 100%; padding: 8px"},{default:o(()=>[l(Re,{vertical:""},{default:o(()=>[l(y,{size:"small"},{default:o(()=>[l(k,{size:20,icon:"ri:font-size",style:{"vertical-align":"-0.45em"}}),l($e,{value:t(z),"onUpdate:value":e[5]||(e[5]=a=>J(z)?z.value=a:null),min:12,max:40,"button-placement":"both",size:"small",style:{"text-align":"center",width:"116px"}},null,8,["value"])]),_:1}),l(y,{size:"small"},{default:o(()=>[l(k,{size:20,icon:"mdi:find-replace",style:{"vertical-align":"-0.45em"}}),l(C,{size:"small",strong:"",tertiary:"",style:{width:"116px"},onClick:e[6]||(e[6]=a=>E("findBox"))},{default:o(()=>[w(h(t(p)("editor.switch.findBtn")),1)]),_:1})]),_:1}),l(y,{size:"small"},{default:o(()=>[l(k,{size:20,color:t(S)==="on"?"var(--app-primary-color)":void 0,icon:"ant-design:swap-outlined",style:{"vertical-align":"-0.45em"}},null,8,["color"]),l(C,{size:"small",strong:"",tertiary:"",style:{width:"116px"},onClick:e[7]||(e[7]=a=>E("wordWrap"))},{default:o(()=>[w(h(t(p)("editor.switch.wordWrapBtn")),1)]),_:1})]),_:1}),l(y,{size:"small"},{default:o(()=>[l(k,{size:20,color:t(R)?"var(--app-primary-color)":void 0,icon:"mdi:map-outline",style:{"vertical-align":"-0.45em"}},null,8,["color"]),l(C,{size:"small",strong:"",tertiary:"",style:{width:"116px"},onClick:e[8]||(e[8]=a=>E("minimap"))},{default:o(()=>[w(h(t(p)("editor.switch.minimapBtn")),1)]),_:1})]),_:1}),t(m)?B("",!0):(i(),c(y,{key:0,size:"small"},{default:o(()=>[l(k,{size:20,icon:"gg:shortcut",style:{"vertical-align":"-0.45em"}}),l(C,{size:"small",strong:"",tertiary:"",style:{width:"116px"},onClick:e[9]||(e[9]=a=>E("showEditorShortcutsInfo"))},{default:o(()=>[w(h(t(p)("editor.switch.viewShortcuts")),1)]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1},8,["popup-props"])]),_:1},8,["style"])):B("",!0),l(_n,{ref_key:"selectFileComponent",ref:H,onOnConfirmSelect:_e},null,512)]),_:1},512)}}}),tt=sn(Pn,[["__scopeId","data-v-2cf65941"]]);export{tt as default};
