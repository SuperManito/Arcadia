import{az as r,aq as a,T as l,a5 as i,aA as g,ad as o,aw as c,ca as k}from"./vendor-ca0e89fa.js";import{$ as m,a0 as p,b as v,d as b,k as y,z as T}from"./app-dbd4b5f0.js";const w={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"};function x(e,t){return l(),a("svg",w,t[0]||(t[0]=[i("path",{fill:"currentColor",d:"M19 7h-2.81c-.45-.8-1.07-1.5-1.82-2L16 3.41L14.59 2l-2.17 2.17a6 6 0 0 0-2.83 0L7.41 2L6 3.41L7.62 5c-.75.5-1.36 1.21-1.81 2H3v2h2.09c-.06.33-.09.66-.09 1v1H3v2h2v1c0 .34.03.67.09 1H3v2h2.81A6 6 0 0 0 13 19.65V19c0-.57.09-1.14.25-1.69c-.66.45-1.45.69-2.25.69c-2.21 0-4-1.79-4-4v-4c0-2.21 1.79-4 4-4s4 1.79 4 4v4c0 .19 0 .39-.05.58c.59-.54 1.29-.96 2.05-1.23V13h2v-2h-2v-1c0-.34-.03-.67-.09-1H19zm-6 2v2H9V9zm0 4v2H9v-2zm3 3h6v6h-6z"},null,-1)]))}const O=r({name:"mdi-bug-stop-outline",render:x}),C={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"};function S(e,t){return l(),a("svg",C,t[0]||(t[0]=[g('<g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path fill="currentColor" fill-opacity="0" stroke-dasharray="64" stroke-dashoffset="64" d="M3 12c0 -4.97 4.03 -9 9 -9c4.97 0 9 4.03 9 9c0 4.97 -4.03 9 -9 9c-4.97 0 -9 -4.03 -9 -9Z"><animate fill="freeze" attributeName="fill-opacity" begin="0.6s" dur="0.15s" values="0;0.3"></animate><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.6s" values="64;0"></animate></path><path stroke-dasharray="14" stroke-dashoffset="14" d="M8 12l3 3l5 -5"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.75s" dur="0.2s" values="14;0"></animate></path></g>',1)]))}const j=r({name:"line-md-confirm-circle-twotone",render:S});function V(e,t="message"){return m.post({url:"/runCmd",data:e,headers:{"Content-Type":p.JSON}},{errorMessageMode:t})}function R(e,t="message"){return m.post({url:"/stopTask",data:e,headers:{"Content-Type":p.JSON}},{errorMessageMode:t})}const M={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"};function P(e,t){return l(),a("svg",M,t[0]||(t[0]=[i("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[i("path",{d:"M3 12c0 -4.97 4.03 -9 9 -9c4.97 0 9 4.03 9 9c0 4.97 -4.03 9 -9 9c-4.97 0 -9 -4.03 -9 -9Z"}),i("path",{"stroke-dasharray":"14","stroke-dashoffset":"14",d:"M8 12l3 3l5 -5"},[i("animate",{fill:"freeze",attributeName:"stroke-dashoffset",dur:"0.2s",values:"14;0"})])],-1)]))}const B=r({name:"line-md-circle-to-confirm-circle-transition",render:P}),_={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"};function z(e,t){return l(),a("svg",_,t[0]||(t[0]=[i("path",{fill:"currentColor",d:"M13.82 14H9.66c-.1-.66-.16-1.32-.16-2s.06-1.35.16-2h4.68c.09.65.16 1.32.16 2c0 .5-.04 1-.1 1.46c.6-.5 1.32-.89 2.1-1.14V12c0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2v.18c.7.17 1.35.45 1.95.82c.05-.32.05-.66.05-1c0-5.5-4.5-10-10-10C6.47 2 2 6.5 2 12s4.5 10 10 10c.34 0 .68 0 1-.05c-.41-.66-.71-1.4-.87-2.2c-.04.07-.08.14-.13.21c-.83-1.2-1.5-2.53-1.91-3.96h2.41c.31-.75.76-1.42 1.32-2m5.1-6h-2.95a15.7 15.7 0 0 0-1.38-3.56c1.84.63 3.37 1.9 4.33 3.56M12 4.03c.83 1.2 1.5 2.54 1.91 3.97h-3.82c.41-1.43 1.08-2.77 1.91-3.97M4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2s.06 1.34.14 2zm.82 2H8c.35 1.25.8 2.45 1.4 3.56A8 8 0 0 1 5.08 16M8 8H5.08A7.92 7.92 0 0 1 9.4 4.44C8.8 5.55 8.35 6.75 8 8m12.83 7.67L22 14.5v4h-4l1.77-1.77A2.5 2.5 0 1 0 20 20h1.71A3.99 3.99 0 0 1 18 22.5c-2.21 0-4-1.79-4-4s1.79-4 4-4c1.11 0 2.11.45 2.83 1.17"},null,-1)]))}const d=r({name:"mdi-web-refresh",render:z}),I={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"};function H(e,t){return l(),a("svg",I,t[0]||(t[0]=[i("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m20 16l-4 4m-9-8l5 5l-1.5 1.5a3.536 3.536 0 1 1-5-5zm10 0l-5-5l1.5-1.5a3.536 3.536 0 1 1 5 5zM3 21l2.5-2.5m13-13L21 3m-11 8l-2 2m5 1l-2 2m5 0l4 4"},null,-1)]))}const N=r({name:"tabler-plug-connected-x",render:H});let s=null;function A(){const{wsUrl:e}=T();JSON.parse("[]");let n="";return e&&(n=e),n}function L(){const e=y();s=k(A(),{path:"/api/ws",extraHeaders:{Authorization:`Bearer ${e}`}}),s.on("connect",()=>{console.log("ws connected")})}function J(){return s||L(),s}async function E(){if(s.connected)return!0;const{t:e}=v(),{dialog:t}=b(),n=t?.error({title:e("component.useSocket.disconnectDialog.failTitle"),content:e("component.useSocket.disconnectDialog.failContent"),closable:!1,maskClosable:!1,autoFocus:!1,positiveText:e("component.useSocket.disconnectDialog.failPositiveText"),negativeText:e("common.cancelText"),icon:()=>o(c,null,{default:()=>o(N)}),positiveButtonProps:{focusable:!1,loading:!1,renderIcon:()=>o(c,null,{default:()=>o(d)})},negativeButtonProps:{ghost:!1,tertiary:!0},async onPositiveClick(){return Object.assign(n,{positiveButtonProps:{focusable:!1,loading:!0,renderIcon:()=>o(c,null,{default:()=>o(d)})},positiveText:e("component.useSocket.disconnectDialog.connectingPositiveText")}),s.connect(),await new Promise(u=>{const h=setTimeout(()=>u(!1),5e3);s.once("connect",()=>{clearTimeout(h),u(!0)})})?(Object.assign(n,{type:"success",title:e("component.useSocket.disconnectDialog.successTitle"),content:e("component.useSocket.disconnectDialog.successContent"),positiveButtonProps:{focusable:!1,loading:!1,renderIcon:()=>o(c,null,{default:()=>o(B)})},positiveText:e("component.useSocket.disconnectDialog.successPositiveText")}),await new Promise(u=>setTimeout(u,2e3)),n.destroy(),!0):(Object.assign(n,{positiveButtonProps:{focusable:!1,loading:!1,renderIcon:()=>o(c,null,{default:()=>o(d)})},positiveText:e("component.useSocket.disconnectDialog.failPositiveText")}),!1)},onNegativeClick(){return n.destroy(),!1}});return new Promise(f=>{n.onAfterLeave=()=>f(s.connected)})}const U="runLog";export{O as I,j as _,E as c,V as f,J as g,U as r,R as s};
