import{_ as Wt}from"./PageWrapper.vue_vue_type_style_index_0_lang-B-QjJlfz.js";import{c as Y,u as G,m as he,r as ge,a as We,_ as Kt,d as Jt,e as Qt,f as Zt,b as en}from"./create-DPzsXDFE.js";import{d as st,c as tn,a as nn,e as ln,P as an,_ as on}from"./index-BW0Kz9QR.js";import{_ as sn}from"./more-horiz-C-LS9eeq.js";import{a7 as u,aK as D,av as k,a8 as _,a9 as n,aa as l,aT as c,I as rn,A as v,am as r,b9 as W,aU as z,aP as un,ax as ye,u as e,aR as be,aL as m,aG as K,at as cn,au as dn,aA as pn,aF as ae,aS as M,b1 as ke,b7 as Ke,B as fn,ba as _n,bC as vn,an as mn,ap as hn,bc as gn,b3 as yn,bw as bn,bx as kn,aE as xn,aM as wn,bA as Cn,bB as $n,bg as Tn,bD as Dn,aV as zn,bE as Mn,bF as In,bd as An,bj as Bn,bk as Pn,ao as Nn,bl as qn,bm as Rn,bn as Sn,bo as Ln,ay as Un,bG as En,aB as Fn,bH as On,bI as Vn}from"./vendor-CVUNLYN4.js";import{u as jn}from"./useTransition-CObelXI-.js";import{u as Hn}from"./useAppInject-Dal6O7k8.js";import{a as Je,f as Qe,d as xe,b as Xn,c as Ze}from"./delete-BvnWtlW2.js";import{i as Yn,f as Gn,b as Wn,c as Kn,d as et,e as Jn,h as Qn,a as Zn}from"./file-BQviJjRi.js";import{c as tt,a as nt,b as el}from"./index-wCKpV3TT.js";import{f as lt}from"./fileUnknown-sxaemHPP.js";import{f as tl}from"./folderEmpty-BCYceZjA.js";import"./sharp-arrow-back-ios-DFVIULGe.js";import"./useDesign-DCKbhR-1.js";import"./clock-plus-outline-COJJy2Z4.js";import"./file-question-outline-BVJPEVw9.js";const nl={},ll={xmlns:"http://www.w3.org/2000/svg",style:{"vertical-align":"baseline",margin:"0 auto"},x:"0px",y:"0px",width:"100",height:"100",viewBox:"0 0 48 48"},al=k("path",{fill:"#ffa000",d:"M40,12H22l-4-4H8c-2.2,0-4,1.8-4,4v24c0,2.2,1.8,4,4,4h29.7L44,29V16C44,13.8,42.2,12,40,12z"},null,-1),ol=k("path",{fill:"#ffca28",d:"M40,12H8c-2.2,0-4,1.8-4,4v20c0,2.2,1.8,4,4,4h32c2.2,0,4-1.8,4-4V16C44,13.8,42.2,12,40,12z"},null,-1),sl=[al,ol];function il(R,x){return u(),D("svg",ll,sl)}const at=st(nl,[["render",il]]),rl={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},ul=k("path",{fill:"currentColor",d:"M5 3c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7h-2v7H5V5h7V3zm12.78 1a.7.7 0 0 0-.48.2l-1.22 1.21l2.5 2.5L19.8 6.7c.26-.26.26-.7 0-.95L18.25 4.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L8 13.5V16h2.5l7.37-7.38z"},null,-1),cl=[ul];function dl(R,x){return u(),D("svg",rl,[...cl])}const pl={name:"mdi-square-edit-outline",render:dl},fl={};function _l(R,x){const oe=pl,y=c;return u(),_(y,null,{default:n(()=>[l(oe,{style:{"vertical-align":"baseline"}})]),_:1})}const ot=st(fl,[["render",_l]]),vl={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},ml=k("path",{fill:"currentColor",d:"M7 5h14v2H7zm0 8v-2h14v2zM4 4.5A1.5 1.5 0 0 1 5.5 6A1.5 1.5 0 0 1 4 7.5A1.5 1.5 0 0 1 2.5 6A1.5 1.5 0 0 1 4 4.5m0 6A1.5 1.5 0 0 1 5.5 12A1.5 1.5 0 0 1 4 13.5A1.5 1.5 0 0 1 2.5 12A1.5 1.5 0 0 1 4 10.5M7 19v-2h14v2zm-3-2.5A1.5 1.5 0 0 1 5.5 18A1.5 1.5 0 0 1 4 19.5A1.5 1.5 0 0 1 2.5 18A1.5 1.5 0 0 1 4 16.5"},null,-1),hl=[ml];function gl(R,x){return u(),D("svg",vl,[...hl])}const yl={name:"mdi-format-list-bulleted",render:gl},bl={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},kl=k("path",{fill:"currentColor",d:"M5 11q-.825 0-1.412-.587T3 9V5q0-.825.588-1.412T5 3h4q.825 0 1.413.588T11 5v4q0 .825-.587 1.413T9 11zm0 10q-.825 0-1.412-.587T3 19v-4q0-.825.588-1.412T5 13h4q.825 0 1.413.588T11 15v4q0 .825-.587 1.413T9 21zm10-10q-.825 0-1.412-.587T13 9V5q0-.825.588-1.412T15 3h4q.825 0 1.413.588T21 5v4q0 .825-.587 1.413T19 11zm0 10q-.825 0-1.412-.587T13 19v-4q0-.825.588-1.412T15 13h4q.825 0 1.413.588T21 15v4q0 .825-.587 1.413T19 21zM5 9h4V5H5zm10 0h4V5h-4zm0 10h4v-4h-4zM5 19h4v-4H5zM9 9"},null,-1),xl=[kl];function wl(R,x){return u(),D("svg",bl,[...xl])}const Cl={name:"material-symbols-grid-view-outline-rounded",render:wl},$l={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"},Tl=k("path",{fill:"currentColor",d:"M10 20v-6h4v6h5v-8h3L12 3L2 12h3v8z"},null,-1),Dl=[Tl];function zl(R,x){return u(),D("svg",$l,[...Dl])}const Ml={name:"mdi-home",render:zl},Il={key:0},Al={key:1},Bl={key:2},Pl={key:0,style:{height:"100%"}},Nl={style:{"line-height":"0"}},ql={style:{"line-height":"0"}},Rl={style:{"vertical-align":"-4px"}},Sl={style:{"margin-bottom":"12px"}},ta=rn({__name:"index",setup(R){const{message:x,confirm:oe}=tn(),{getIsMobile:y}=Hn(),{t:s}=nn(),it=ln(),rt=v("fade-slide");jn(rt);const we=v(),N=v(!0),S=v(!1),U=v(!1),E=v(!1),F=v(!1),O=v(!1),V=v(!1),se=v(!0),ie=v(!1),re=v(!0),L=v([]),B=v(""),ue=v([]),Ce=v([]),I=y.value?3:7,p=v([]),J=v([]),f=v(null),q=v(null),Q=v(""),$=v({type:1,name:null,dir:null}),ce=v(!1),de=v(0),pe=v(0),$e=v(0),Te=v(0),De=v(0),ut=[{title:s("page.file.table.columnsLabel.name"),key:"name",align:"left",render(a){const t=a.name;return r(z,{style:"gap: 4px"},{default:()=>[r(c,{size:16,style:"vertical-align: -0.2em"},{default:()=>r(a.type===0?at:(tt[t.substring(t.lastIndexOf(".")+1)]||{}).icon||lt)}),r(W,{lineClamp:1,style:"max-width: 160px; user-select: none;"},{default:()=>t})]})}},{title:s("page.file.table.columnsLabel.editTime"),key:"mTime",align:"center",titleAlign:"center",width:180}],j=async a=>{switch(a){case"clickContextMenu":S.value=!1;break;case"exitContextMenu":S.value=!1,C("operationItem");break;case"goBack":let t=p.value[p.value.length-2];if(Array.isArray(t)){const i=t.length-1;t=t[i],Z(t,i,!0)}else{const i=p.value.length-2;Z(t,i,!1)}break;case"closeDrawer":U.value=!1;break}},ct=(a,t)=>{f.value=t,ue.value=Me(t),de.value=a.clientX,pe.value=a.clientY,a.preventDefault(),S.value=!0},ze=async a=>{f.value=a,U.value=!0},Me=a=>{const t={create:{label:s("file.create.button"),key:"create",icon:()=>r(c,null,{default:()=>r(Y)}),props:{onClick:()=>{ee()}}},edit:{label:s("file.edit.button"),key:"edit",icon:()=>r(c,null,{default:()=>r(ot)}),props:{onClick:()=>{Be()}}},upload:{label:s("file.upload.button"),key:"upload",icon:()=>r(c,null,{default:()=>r(G)}),props:{onClick:()=>{te()}}},download:{label:s("file.download.button"),key:"download",icon:()=>r(c,null,{default:()=>r(a.type===0?Qe:Je)}),props:{onClick:()=>{Le()}}},attribute:{label:s("file.attribute.button"),key:"attribute",icon:()=>r(c,null,{default:()=>r(We)}),props:{onClick:()=>{Ue()}}},move:{label:s("file.move.button"),key:"move",icon:()=>r(c,null,{default:()=>r(he)}),props:{onClick:()=>{Pe()}}},rename:{label:s("file.rename.button"),key:"rename",icon:()=>r(c,null,{default:()=>r(ge)}),props:{onClick:()=>{qe()}}},divider:{type:"divider",key:"d1"},delete:{label:()=>r(Ke,{style:{color:"var(--app-error-color)"}},{default:()=>s("file.delete.button")}),key:"delete",icon:()=>r(c,{color:"var(--app-error-color)"},{default:()=>r(xe)}),props:{onClick:()=>{Se()}}}};let i=[t.download,t.attribute,t.move,t.rename,t.divider,t.delete];return a.type===0?i=[t.create,t.upload,...i]:i=[t.edit,...i],i},Ie=a=>{const t=[];for(let i=0;i<a.length;i++){const d=a[i];t.push({label:d.title,key:d.path,props:{onClick:()=>{Z(d,i,!0)}}})}return t},dt=(a,t,i)=>{if(i.node)switch(i.action){case"expand":i.node.prefix=()=>r(c,null,{default:()=>r(el)});break;case"collapse":i.node.prefix=()=>r(c,null,{default:()=>r(nt)});break}};let fe;const pt=(a,t)=>({onContextmenu:i=>{y.value||(f.value=a,ue.value=Me(a),i.preventDefault(),S.value=!1,fn().then(()=>{S.value=!0,de.value=i.clientX,pe.value=i.clientY}))},ondblclick:()=>{y.value||H(a)},onclick:()=>{y.value&&H(a)},ontouchstart:i=>{y.value&&($e.value=Date.now(),Te.value=i.touches[0].clientX,De.value=i.touches[0].clientY,fe=setTimeout(()=>{ze(a)},300))},ontouchmove:()=>{y.value&&clearTimeout(fe)},ontouchend:i=>{if(!y.value)return;clearTimeout(fe);const d=Date.now(),T=i.changedTouches[0].clientX,g=i.changedTouches[0].clientY,h=d-$e.value,b=Math.sqrt((T-Te.value)**2+(g-De.value)**2);h<300&&b<10&&H(a)}}),ft=(a,t,i)=>{switch(i.action){case"select":i.node&&(q.value=i.node,$.value.dir=i.node.key);break;case"delete":case"clear":case"unselect":C("treeSelect");break}},Z=(a,t,i)=>{if(P(a.path),p.value.length>=3&&Array.isArray(p.value[p.value.length-2])){const d=p.value[p.value.length-2],T=p.value.length-2+(t+1-1)+1,g=[];if(T>I){for(let b=0;b<p.value.length-2;b++)g.push(p.value[b]);const h=[];if(i){for(let b=0;b<=t-1;b++)h.push(d[b]);g.push(h),g.push(d[t])}else{for(let b=0;b<d.length;b++)h.push(d[b]);g.push(h),g.push(p.value[t])}p.value=g,J.value=Ie(p.value[p.value.length-2])}else{for(let h=0;h<p.value.length-2;h++)g.push(p.value[h]);for(let h=0;h<t;h++)g.push(d[h]);g.push(d[t]),p.value=g,J.value=[]}}else p.value=p.value.splice(0,t+1);ce.value=!1},H=a=>{if(a.type===0){P(a.path);const t={path:a.path,title:a.name,type:a.type};p.value.length<I?p.value.push(t):(Array.isArray(p.value[I-2])?p.value[I-2].push(p.value[I-1]):p.value[I-2]=[p.value[I-2],p.value[I-1]],p.value[I-1]=t,J.value=Ie(p.value[I-2])),ce.value=!1}else x.info(s("page.file.isFileTips"))},Ae=async()=>{ie.value=!0;const a=await Zn({isDir:"true"}),t=await _t(a);Ce.value=t,ie.value=!1},P=async a=>{se.value=!0;try{const t=await Yn({path:a});if(t.children&&t.children.length){const i=[];t.children.forEach(d=>{const T=d.name,g=T.substring(T.lastIndexOf(".")+1),h=tt[g]||{},b=()=>r(d.type===0?at:h.icon||lt),w={name:d.name,path:d.path,type:d.type,mTime:d.mTime,icon:b,checked:!1,isDir:d.type===0};i.push(w)}),L.value=i}else L.value=[];B.value=a}finally{se.value=!1}},_t=async a=>{const t=i=>{i.length&&i.forEach(d=>{d.type===0&&(Object.assign(d,{key:d.path,label:d.title,isDir:!0,prefix:()=>r(c,null,{default:()=>r(nt)})}),t(d.children),d.children.length||(Object.assign(d,{children:null}),d.prefix=()=>r(c,null,{default:()=>r(tl)})))})};return t(a),a},vt=a=>{U.value=a},mt=()=>{f.value=null},C=a=>{switch(a){case"operationItem":y.value?U.value=!1:f.value=null;break;case"renameInput":Q.value="";break;case"treeSelect":q.value=null,$.value.dir=void 0;break;case"createData":$.value={type:1,name:void 0,dir:void 0};break}},_e=()=>({ghost:!1,tertiary:!0}),Be=async()=>{it(`${an.CODE_EDIT_PAGE}?path=${f.value.path}`)},ht=()=>r(c,{style:"vertical-align: 0"},{default:()=>r(he)}),Pe=()=>{F.value=!0,Ae()},gt=async()=>{const a=f.value.path,t=f.value.name;let i=q.value?q.value.path:"";i=`${i}${a.includes("\\")?"\\":"/"}${t}`;try{await Gn({path:a,newPath:i}),x.success(s("file.move.success")),P(B.value)}catch{}finally{C("treeSelect"),C("operationItem")}},yt=()=>({disabled:!q.value}),Ne=()=>{F.value=!1,C("treeSelect")},bt=()=>r(c,{style:"vertical-align: 0"},{default:()=>r(ge)}),qe=()=>{E.value=!0},kt=async()=>{const a=f.value.path;try{await Wn({path:a,name:Q.value}),x.success(s("file.rename.success")),P(B.value)}catch{}finally{C("operationItem")}},xt=()=>({disabled:!Q.value}),Re=()=>{E.value=!1,y.value||C("operationItem"),C("renameInput")},wt=a=>{Q.value=a},Ct=a=>!["<",">","?","*","/"].some(t=>a.includes(t)),Se=async()=>{const a=f.value.path;oe.error({title:s("file.delete.title"),content:s("file.delete.confirm"),icon:()=>r(c,{style:"vertical-align: 0"},{default:()=>r(xe)}),closable:!1,maskClosable:!1,autoFocus:!1,positiveText:s("file.delete.button"),onPositiveClick:async()=>{try{await Kn({path:a}),x.success(s("file.delete.success")),P(B.value)}catch{}finally{C("operationItem")}},onNegativeClick:()=>{y.value||C("operationItem")},negativeButtonProps:{ghost:!1,tertiary:!0}})},Le=async()=>{const a=f.value.path,t=f.value.name,i=f.value.isDir,d=x.info(s("file.download.wait"),{duration:0,icon:()=>r(c,null,{default:()=>r(Xn)})});try{if(i){const{code:T,message:g,blob:h}=await et({path:a});d.destroy(),T?(x.success(s("file.download.success")),h&&Ze(h,`${t}.zip`)):g&&x.error(g)}else{const{code:T,message:g,blob:h}=await et({path:a});d.destroy(),T?(x.success(s("file.download.success")),h&&Ze(h,t)):g&&x.error(g)}}catch{d.destroy(),x.error(s("file.download.fail"),{keepAliveOnHover:!0})}finally{y.value||C("operationItem")}},Ue=()=>{const a=f.value.path,t=f.value.isDir;try{we.value?.open({path:a,isDir:t})}catch{}finally{y.value||C("operationItem")}},$t={name:{required:!0},dir:{required:!0}},Tt=()=>r(c,{style:"vertical-align: 0"},{default:()=>r(Y)}),ee=()=>{O.value=!0},Dt=async()=>{$.value.dir=f.value?f.value.path:B.value;const a=$.value.type,t=$.value.name,i=$.value.dir;try{await Jn({type:a,name:t,dir:i}),x.success(s("file.create.success")),P(B.value)}catch{}finally{C("createData"),y.value||C("operationItem")}},Ee=()=>{O.value=!1,C("createData"),y.value||C("operationItem")},zt=()=>({disabled:!$.value.name}),Mt=()=>r(c,{style:"vertical-align: 0"},{default:()=>r(G)}),te=()=>{V.value=!0,Ae()},It=({file:a,onFinish:t,onError:i,onProgress:d})=>{const T=a.name,g=new FormData,h=f.value?f.value.path:B.value;g.append("file",a.file),Qn({params:g,path:h,onUploadProgress:({progress:b})=>{d({percent:Math.ceil((b||0)*100)})}}).then(()=>{x.success(`${T} ${s("file.upload.success")}`),P(B.value),t()}).catch(b=>{x.error(b.message,{keepAliveOnHover:!0}),i()})},At=()=>{V.value=!1,y.value||C("operationItem")};return un(async()=>{p.value=[{title:s("page.file.rootPathLabel"),path:"/arcadia",type:0}],await P("/arcadia"),re.value=!1}),(a,t)=>{const i=_n,d=Fn,T=Ml,g=On,h=vn,b=mn,w=hn,ve=gn,Fe=yn,Oe=Cl,Ve=bn,je=yl,Bt=kn,me=xn,Pt=Vn,X=wn,Nt=sn,ne=Cn,He=$n,Xe=Tn,qt=Dn,Rt=zn,St=on,Lt=Mn,Ut=In,Ye=An,le=Bn,Et=Pn,Ft=Nn,Ot=Jt,Vt=qn,jt=Rn,Ht=Qt,Xt=Zt,Ge=Sn,Yt=Ln,Gt=Wt;return u(),_(Gt,{ref:"pageWrapper","content-full":""},{title:n(()=>[l(b,{"x-scrollable":"",size:0},{default:n(()=>[l(h,null,{default:n(()=>[(u(!0),D(be,null,ye(e(p),(o,A)=>(u(),_(g,{key:o?.title||"...",onClick:Ll=>Array.isArray(o)&&o.length>0?()=>{}:Z(o,A,!1)},{default:n(()=>[Array.isArray(o)&&o.length>0?(u(),D("div",Il,[l(i,{trigger:e(y)?"click":"hover",size:"small",options:e(J)},{default:n(()=>[l(e(c),null,{default:n(()=>[l(e(en))]),_:1})]),_:1},8,["trigger","options"])])):(u(),D("div",Al,[l(e(z),{style:{gap:"4px"}},{default:n(()=>[A===0?(u(),_(e(c),{key:0,size:16},{default:n(()=>[e(se)?(u(),_(d,{key:0,size:16,style:{"vertical-align":"baseline"}})):(u(),_(T,{key:1,style:{"vertical-align":"0"}}))]),_:1})):ae("",!0),e(y)&&A===2?(u(),_(e(W),{key:1,style:{height:"100%","max-width":"80px"}},{tooltip:n(()=>[k("span",null,m(o.title),1)]),default:n(()=>[k("span",null,m(o.title),1)]),_:2},1024)):(u(),D("span",Bl,m(o.title),1))]),_:2},1024)]))]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),extra:n(()=>[l(me,null,{default:n(()=>[e(y)?(u(),_(ve,{key:1,style:{height:"28px"}},{default:n(()=>[l(Fe,{placement:"bottom",trigger:"hover",delay:500},{trigger:n(()=>[l(w,{strong:"",tertiary:"",size:"small",style:{height:"100%"},focusable:!1,onClick:t[2]||(t[2]=o=>ee())},{icon:n(()=>[l(e(Y))]),_:1})]),default:n(()=>[k("span",null,m(e(s)("file.create.button")),1)]),_:1}),l(Fe,{placement:"bottom",trigger:"hover",delay:500},{trigger:n(()=>[l(w,{strong:"",tertiary:"",size:"small",style:{height:"100%"},focusable:!1,onClick:t[3]||(t[3]=o=>te())},{icon:n(()=>[l(e(G))]),_:1})]),default:n(()=>[k("span",null,m(e(s)("file.upload.button")),1)]),_:1})]),_:1})):(u(),_(ve,{key:0,style:{height:"28px"}},{default:n(()=>[l(w,{strong:"",tertiary:"",size:"small",style:{height:"100%"},focusable:!1,onClick:t[0]||(t[0]=o=>ee())},{icon:n(()=>[l(e(Y))]),default:n(()=>[k("span",null,m(e(s)("file.create.button")),1)]),_:1}),l(w,{strong:"",tertiary:"",size:"small",style:{height:"100%"},focusable:!1,onClick:t[1]||(t[1]=o=>te())},{icon:n(()=>[l(e(G))]),default:n(()=>[k("span",null,m(e(s)("file.upload.button")),1)]),_:1})]),_:1})),e(y)?(u(),_(w,{key:3,tertiary:"",strong:"",size:"small",style:{padding:"6px"},onClick:t[5]||(t[5]=o=>N.value=!e(N))},{icon:n(()=>[l(e(c),{size:18},{default:n(()=>[e(N)?(u(),_(Oe,{key:0,style:{"vertical-align":"baseline"}})):(u(),_(je,{key:1,style:{"vertical-align":"baseline"}}))]),_:1})]),_:1})):(u(),_(Bt,{key:2,value:e(N),"onUpdate:value":t[4]||(t[4]=o=>K(N)?N.value=o:null),size:"small","default-value":!0,style:{height:"28px"},variant:"default-filled"},{default:n(()=>[l(Ve,{value:!0,style:{height:"100%"}},{default:n(()=>[l(e(c),{size:18},{default:n(()=>[l(Oe,{style:{"vertical-align":"-0.2em"}})]),_:1})]),_:1}),l(Ve,{value:!1,style:{height:"100%"}},{default:n(()=>[l(e(c),{size:18},{default:n(()=>[l(je,{style:{"vertical-align":"-0.2em"}})]),_:1})]),_:1})]),_:1},8,["value"]))]),_:1})]),default:n(()=>[l(X,{bordered:!e(y),style:{height:"100%"},"content-style":"padding: 0; height: 100%"},{default:n(()=>[cn(l(pn,{name:"fade",mode:"out-in",appear:""},{default:n(()=>[e(L).length?(u(),D("div",Pl,[e(N)?(u(),_(b,{key:0},{default:n(()=>[e(y)?(u(),_(He,{key:1,"x-gap":"4",cols:3},{default:n(()=>[(u(!0),D(be,null,ye(e(L),o=>(u(),_(ne,{key:o.name,style:{padding:"8px"}},{default:n(()=>[l(X,{bordered:!1,style:{height:"160px",width:"100%"},"content-style":"max-height: 80px; padding: 0; margin: 0 auto","footer-style":"height: 100%; padding: 0; text-align: center; width: 100%",onClick:A=>H(o)},{default:n(()=>[l(e(c),{size:80,depth:1,style:{height:"100px",width:"100%"}},{default:n(()=>[(u(),_(ke(o.icon)))]),_:2},1024)]),footer:n(()=>[l(e(z),{vertical:""},{default:n(()=>[l(e(W),{"line-clamp":2,style:{height:"100%","-webkit-user-select":"none","user-select":"none"}},{tooltip:n(()=>[k("span",null,m(o.name),1)]),default:n(()=>[k("span",ql,m(o.name),1)]),_:2},1024),l(w,{round:"",secondary:"",size:"tiny",focusable:!1,onClick:En(A=>ze(o),["stop"])},{icon:n(()=>[l(e(c),{size:22,depth:5},{default:n(()=>[l(Nt,{style:{"vertical-align":"baseline"}})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})):(u(),_(me,{key:0,inline:"",style:{gap:"0"}},{default:n(()=>[(u(!0),D(be,null,ye(e(L),o=>(u(),D("div",{key:o.name,bordered:!1,style:{height:"180px",width:"180px",padding:"20px"}},[e(ce)?(u(),_(Pt,{key:0,checked:o.checked,"onUpdate:checked":A=>o.checked=A,focusable:!1,style:{margin:"6px",position:"absolute","z-index":"1"}},null,8,["checked","onUpdate:checked"])):ae("",!0),l(X,{bordered:!1,class:Un(o.checked?"file-checked":"file"),style:{height:"100%",width:"100%","border-radius":"6px"},"content-style":"max-height: 90px; padding: 0; margin: 0 auto","footer-style":"text-align: center; width: 100%; height: 100%; padding: 0 8px",onContextmenu:A=>ct(A,o),onDblclick:A=>H(o)},{default:n(()=>[l(e(c),{size:66,depth:1,style:{height:"100px",width:"100%","padding-top":"20px"}},{default:n(()=>[(u(),_(ke(o.icon)))]),_:2},1024)]),footer:n(()=>[l(e(W),{"line-clamp":2,style:{"-webkit-user-select":"none","user-select":"none"}},{tooltip:n(()=>[k("span",null,m(o.name),1)]),default:n(()=>[k("span",Nl,m(o.name),1)]),_:2},1024)]),_:2},1032,["class","onContextmenu","onDblclick"])]))),128))]),_:1})),l(Xe)]),_:1})):(u(),_(b,{key:1},{default:n(()=>[l(qt,{columns:ut,data:e(L),"row-props":pt,"paginate-single-page":!1},null,8,["data"]),l(Xe)]),_:1})),e(y)?ae("",!0):(u(),_(i,{key:2,placement:"bottom-start",trigger:"manual",style:{"min-width":"120px"},x:e(de),y:e(pe),options:e(ue),show:e(S),onSelect:t[6]||(t[6]=o=>j("clickContextMenu")),onClickoutside:t[7]||(t[7]=o=>j("exitContextMenu"))},null,8,["x","y","options","show"]))])):(u(),_(Rt,{key:1,class:"min-h-200px flex-jc-ac h-full",description:e(s)("page.file.emptyDirectory"),size:"huge"},{extra:n(()=>[l(w,{secondary:"",type:"primary",size:"large",focusable:!1,onClick:t[8]||(t[8]=o=>j("goBack"))},{default:n(()=>[M(m(e(s)("page.file.goBack")),1)]),_:1})]),_:1},8,["description"]))]),_:1},512),[[dn,!e(re)]]),l(St,{show:e(re)},null,8,["show"])]),_:1},8,["bordered"]),l(Ut,{show:e(U),"auto-focus":!1,height:e(f)?.type===0?"370px":"330px",style:{width:"96%",margin:"0 auto","border-radius":"1em 1em 0 0"},placement:"bottom","on-update:show":vt,"on-after-leave":mt,onOnEsc:t[17]||(t[17]=o=>j("closeDrawer")),onOnMaskClick:t[18]||(t[18]=o=>j("closeDrawer"))},{default:n(()=>[l(Lt,{closable:"","header-style":"padding: 10px 18px; border-bottom: hidden; -webkit-user-select: none; user-select: none;","body-content-style":"padding: 10px 18px; overscroll-behavior: none; -webkit-user-select: none; user-select: none;"},{header:n(()=>[l(e(z),null,{default:n(()=>[l(e(c),{size:56,depth:1},{default:n(()=>[(u(),_(ke(e(f)?.icon)))]),_:1}),l(X,{bordered:!1,"header-style":"padding: 0","content-style":"padding: 0; font-size: 12px"},{header:n(()=>[l(e(W),{style:{height:"100%","max-width":"240px"}},{tooltip:n(()=>[k("span",null,m(e(f)?.name),1)]),default:n(()=>[k("span",Rl,m(e(f)?.name),1)]),_:1})]),default:n(()=>[M(" "+m(e(s)("page.file.editAt"))+" "+m(e(f)?.mTime),1)]),_:1})]),_:1})]),default:n(()=>[l(me,{vertical:"",style:{gap:"16px 0"}},{default:n(()=>[l(He,{"x-gap":"6px ",cols:3,style:{width:"100%"}},{default:n(()=>[l(ne,null,{default:n(()=>[e(f)?.type===0?(u(),_(w,{key:0,secondary:"",block:"",strong:"",size:"large",focusable:!1,style:{"border-radius":"6px",height:"70px",background:"var(--app-pressed-color)"},onClick:t[9]||(t[9]=o=>te())},{default:n(()=>[l(e(z),{vertical:""},{default:n(()=>[l(e(c),{size:20},{default:n(()=>[l(e(G))]),_:1}),M(" "+m(e(s)("file.upload.button")),1)]),_:1})]),_:1})):(u(),_(w,{key:1,secondary:"",block:"",strong:"",size:"large",focusable:!1,style:{"border-radius":"6px",height:"70px",background:"var(--app-pressed-color)"},onClick:t[10]||(t[10]=o=>Be())},{default:n(()=>[l(e(z),{vertical:""},{default:n(()=>[l(e(c),{size:20},{default:n(()=>[l(e(ot))]),_:1}),M(" "+m(e(s)("file.edit.button")),1)]),_:1})]),_:1}))]),_:1}),l(ne,null,{default:n(()=>[l(w,{secondary:"",block:"",strong:"",size:"large",focusable:!1,style:{"border-radius":"6px",height:"70px",background:"var(--app-pressed-color)"},onClick:t[11]||(t[11]=o=>Pe())},{default:n(()=>[l(e(z),{vertical:""},{default:n(()=>[l(e(c),{size:20},{default:n(()=>[l(e(he))]),_:1}),M(" "+m(e(s)("file.move.button")),1)]),_:1})]),_:1})]),_:1}),l(ne,null,{default:n(()=>[l(w,{secondary:"",block:"",strong:"",size:"large",focusable:!1,style:{"border-radius":"6px",height:"70px",background:"var(--app-pressed-color)"},onClick:t[12]||(t[12]=o=>qe())},{default:n(()=>[l(e(z),{vertical:""},{default:n(()=>[l(e(c),{size:20},{default:n(()=>[l(e(ge))]),_:1}),M(" "+m(e(s)("file.rename.button")),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(ve,{vertical:"",size:"large",style:{gap:"1px 0",width:"100%"}},{default:n(()=>[l(w,{secondary:"",block:"",strong:"",size:"large","icon-placement":"right",focusable:!1,style:{"border-radius":"6px","justify-content":"space-between",background:"var(--app-pressed-color)"},onClick:t[13]||(t[13]=o=>Le())},{icon:n(()=>[l(e(c),null,{default:n(()=>[e(f)?.type===1?(u(),_(e(Je),{key:0})):(u(),_(e(Qe),{key:1}))]),_:1})]),default:n(()=>[M(" "+m(e(s)("file.download.button")),1)]),_:1}),l(w,{secondary:"",block:"",strong:"","icon-placement":"right",focusable:!1,style:{"border-radius":"6px","justify-content":"space-between",background:"var(--app-pressed-color)"},onClick:t[14]||(t[14]=o=>Ue())},{icon:n(()=>[l(e(c),null,{default:n(()=>[l(e(We))]),_:1})]),default:n(()=>[M(" "+m(e(s)("file.attribute.button")),1)]),_:1}),e(f)?.type===0?(u(),_(w,{key:0,secondary:"","icon-placement":"right",focusable:!1,style:{"border-radius":"6px","justify-content":"space-between",background:"var(--app-pressed-color)"},onClick:t[15]||(t[15]=o=>ee())},{icon:n(()=>[l(e(c),null,{default:n(()=>[l(e(Y))]),_:1})]),default:n(()=>[M(" "+m(e(s)("file.create.button")),1)]),_:1})):ae("",!0),l(w,{secondary:"",block:"",strong:"",type:"error",size:"large","icon-placement":"right",focusable:!1,style:{"border-radius":"6px","justify-content":"space-between",background:"var(--app-pressed-color)"},onClick:t[16]||(t[16]=o=>Se())},{icon:n(()=>[l(e(c),null,{default:n(()=>[l(e(xe))]),_:1})]),default:n(()=>[M(" "+m(e(s)("file.delete.button")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["show","height"]),l(le,{show:e(E),"onUpdate:show":t[19]||(t[19]=o=>K(E)?E.value=o:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:bt,title:e(s)("file.rename.title"),"positive-text":e(s)("common.okText"),"negative-text":e(s)("common.cancelText"),"on-close":Re,"positive-button-props":xt(),"negative-button-props":_e(),onNegativeClick:t[20]||(t[20]=o=>Re()),onPositiveClick:t[21]||(t[21]=o=>kt())},{default:n(()=>[l(Ye,{clearable:"",style:{"margin-top":"5px"},"default-value":e(f)?e(f).name:null,"allow-input":Ct,onInput:wt},null,8,["default-value"])]),_:1},8,["show","title","positive-text","negative-text","positive-button-props","negative-button-props"]),l(le,{show:e(F),"onUpdate:show":t[22]||(t[22]=o=>K(F)?F.value=o:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:ht,title:e(s)("file.move.title"),"positive-text":e(s)("common.okText"),"negative-text":e(s)("common.cancelText"),"on-close":Ne,"positive-button-props":yt(),"negative-button-props":_e(),onNegativeClick:t[23]||(t[23]=o=>Ne()),onPositiveClick:t[24]||(t[24]=o=>gt())},{default:n(()=>[l(Et,{clearable:"","show-path":!0,separator:"/",style:{"margin-top":"5px"},"consistent-menu-width":!1,loading:e(ie),options:e(Ce),"on-update:expanded-keys":dt,"on-update:value":ft},null,8,["loading","options"])]),_:1},8,["show","title","positive-text","negative-text","positive-button-props","negative-button-props"]),l(le,{show:e(V),"onUpdate:show":t[25]||(t[25]=o=>K(V)?V.value=o:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:Mt,title:!e(q)&&!e(f)?e(s)("file.upload.needSelect"):e(s)("file.upload.title"),"on-close":At},{default:n(()=>[l(e(z),{vertical:""},{default:n(()=>[l(Ft,{type:"info",closable:""},{default:n(()=>[M(m(e(s)("file.upload.info")),1)]),_:1}),l(jt,{multiple:"","directory-dnd":"",disabled:!e(q)&&!e(f)&&!e(B),"custom-request":It},{default:n(()=>[l(Vt,null,{default:n(()=>[k("div",Sl,[l(e(c),{size:"48",depth:3},{default:n(()=>[l(Ot)]),_:1})]),l(e(Ke),{style:{"font-size":"16px"}},{default:n(()=>[M(m(e(s)("file.upload.draggerText")),1)]),_:1})]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1},8,["show","title"]),l(le,{show:e(O),"onUpdate:show":t[29]||(t[29]=o=>K(O)?O.value=o:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:Tt,title:e(s)("file.create.title"),"on-close":Ee,"positive-text":e(s)("common.okText"),"negative-text":e(s)("common.cancelText"),"positive-button-props":zt(),"negative-button-props":_e(),onNegativeClick:t[30]||(t[30]=o=>Ee()),onPositiveClick:t[31]||(t[31]=o=>Dt())},{default:n(()=>[l(X,{bordered:!1,style:{height:"100%","word-break":"unset"},"content-style":"padding: 0"},{default:n(()=>[l(Yt,{model:e($),rules:$t,"label-placement":"left",style:{"padding-top":"1em"}},{default:n(()=>[l(Ge,{label:e(s)("file.create.form.type"),"show-label":!1,path:"type",style:{"padding-top":"1em"}},{default:n(()=>[l(e(z),{style:{width:"100%",height:"140px",gap:"0"},justify:"space-around"},{default:n(()=>[l(w,{strong:"",dashed:"",type:e($).type===1?"primary":"default",focusable:!1,style:{width:"120px",height:"100%"},onClick:t[26]||(t[26]=o=>e($).type=1)},{default:n(()=>[l(e(z),{vertical:"",style:{gap:"20px"}},{default:n(()=>[l(e(c),{size:48},{default:n(()=>[l(Ht,{style:{"vertical-align":"baseline"}})]),_:1}),k("strong",null,m(e(s)("file.create.form.typeFile")),1)]),_:1})]),_:1},8,["type"]),l(w,{strong:"",dashed:"",type:e($).type===0?"primary":"default",focusable:!1,style:{width:"120px",height:"100%"},onClick:t[27]||(t[27]=o=>e($).type=0)},{default:n(()=>[l(e(z),{vertical:"",style:{gap:"20px"}},{default:n(()=>[l(e(c),{size:48},{default:n(()=>[l(Xt,{style:{"vertical-align":"baseline"}})]),_:1}),k("strong",null,m(e(s)("file.create.form.typeFolder")),1)]),_:1})]),_:1},8,["type"])]),_:1})]),_:1},8,["label"]),l(Ge,{label:e(s)("file.create.form.name"),path:"name"},{default:n(()=>[l(Ye,{value:e($).name,"onUpdate:value":t[28]||(t[28]=o=>e($).name=o),clearable:"",placeholder:e(s)("file.create.form.namePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["show","title","positive-text","negative-text","positive-button-props","negative-button-props"]),l(Kt,{ref_key:"fileAttributeModal",ref:we},null,512)]),_:1},512)}}});export{ta as default};
