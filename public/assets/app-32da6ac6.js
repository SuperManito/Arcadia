import{aJ as j,a3 as p,aC as R,ah as m,G as Ue,r as Ae,as as fe,J as Be,y as de,h as Me,ck as Ne,F as e,a4 as b,a5 as l,a6 as t,aP as u,aD as r,af as q,ag as S,am as L,aO as pe,aj as qe,aE as V,al as me,aF as _e,aQ as Se,bl as Ve,aH as je,ba as Oe,bB as Ie,bn as Pe,bo as Ge,cl as He,aw as Xe,cm as Je,bI as Qe,aR as Ke,b1 as We,bg as Ye,cn as Ze,aI as et,bC as tt,bD as lt,b6 as at,bx as ot,by as nt,co as st}from"./vendor-d56b0496.js";import{e as it,c as rt,_ as ut}from"./app-3c7ac208.js";import{v as ge,_ as ct,a as ft}from"./app-e3f07554.js";import{a as dt,_ as pt}from"./app-dd5767c3.js";import{a as mt,c as _t}from"./app-651c98d4.js";import{S as gt}from"./app-b7ab00eb.js";import{u as ye}from"./app-477705b9.js";import{u as yt}from"./app-3da0bfa2.js";import{d as vt,b as bt,i as ht,e as kt}from"./app-d0ea65e6.js";import{F as wt}from"./app-58940cda.js";import"./app-75cf128a.js";import"./app-bef774e2.js";import"./app-f86637c3.js";import"./app-53e95917.js";import"./vendor-2a285eec.js";const xt={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"};function Ct(U,h){return p(),R("svg",xt,h[0]||(h[0]=[m("path",{fill:"currentColor",d:"M15.9 18.45c1.35 0 2.45-1.1 2.45-2.45s-1.1-2.45-2.45-2.45c-1.36 0-2.45 1.1-2.45 2.45s1.09 2.45 2.45 2.45m5.2-1.77l1.48 1.16c.13.11.17.29.08.45l-1.4 2.42a.35.35 0 0 1-.43.15l-1.74-.7c-.36.28-.76.51-1.18.69l-.27 1.85c-.02.17-.17.3-.34.3h-2.8c-.18 0-.32-.13-.35-.3l-.26-1.85c-.43-.18-.82-.41-1.18-.69l-1.75.7c-.15.06-.34 0-.42-.15l-1.4-2.42a.35.35 0 0 1 .08-.45l1.48-1.16l-.05-.68l.05-.69l-1.48-1.15a.35.35 0 0 1-.08-.45l1.4-2.42c.08-.16.27-.22.42-.16l1.75.71c.36-.28.75-.52 1.18-.69l.26-1.86c.03-.16.17-.29.35-.29h2.8c.17 0 .32.13.34.29l.27 1.86c.42.17.82.41 1.18.69l1.74-.71c.17-.06.34 0 .43.16l1.4 2.42c.09.15.05.34-.08.45l-1.48 1.15l.05.69zM6.69 8.07c.87 0 1.57-.7 1.57-1.57s-.7-1.58-1.57-1.58A1.58 1.58 0 0 0 5.11 6.5c0 .87.71 1.57 1.58 1.57m3.34-1.13l.97.74c.07.07.09.19.03.29l-.9 1.56c-.05.1-.17.14-.27.1l-1.12-.45l-.74.44l-.19 1.19c-.02.11-.11.19-.22.19h-1.8c-.12 0-.21-.08-.23-.19L5.4 9.62l-.76-.44l-1.14.45c-.09.04-.2 0-.26-.1l-.9-1.56c-.06-.1-.03-.22.05-.29l.95-.74l-.03-.44l.03-.44l-.95-.74a.23.23 0 0 1-.05-.29l.9-1.56c.06-.1.17-.14.26-.1l1.13.45l.77-.44l.16-1.19c.02-.11.11-.19.23-.19h1.8c.11 0 .2.08.22.19L8 3.38l.74.44l1.12-.45c.1-.04.22 0 .27.1l.9 1.56c.06.1.04.22-.03.29l-.97.74l.03.44z"},null,-1)]))}const Tt=j({name:"mdi-cogs",render:Ct}),zt={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"};function Ft(U,h){return p(),R("svg",zt,h[0]||(h[0]=[m("path",{fill:"currentColor",d:"m12 12.708l-5.246 5.246q-.14.14-.344.15t-.364-.15t-.16-.354t.16-.354L11.292 12L6.046 6.754q-.14-.14-.15-.344t.15-.364t.354-.16t.354.16L12 11.292l5.246-5.246q.14-.14.345-.15q.203-.01.363.15t.16.354t-.16.354L12.708 12l5.246 5.246q.14.14.15.345q.01.203-.15.363t-.354.16t-.354-.16z"},null,-1)]))}const $t=j({name:"material-symbols-light-close-rounded",render:Ft}),Rt={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"};function Dt(U,h){return p(),R("svg",Rt,h[0]||(h[0]=[m("path",{fill:"currentColor",d:"M14 12h1.5v2.82l2.44 1.41l-.75 1.3L14 15.69zM4 2h14a2 2 0 0 1 2 2v6.1c1.24 1.26 2 2.99 2 4.9a7 7 0 0 1-7 7c-1.91 0-3.64-.76-4.9-2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2m0 13v3h4.67c-.43-.91-.67-1.93-.67-3zm0-7h6V5H4zm14 0V5h-6v3zM4 13h4.29c.34-1.15.97-2.18 1.81-3H4zm11-2.85A4.85 4.85 0 0 0 10.15 15c0 2.68 2.17 4.85 4.85 4.85A4.85 4.85 0 0 0 19.85 15c0-2.68-2.17-4.85-4.85-4.85"},null,-1)]))}const Et=j({name:"mdi-timetable",render:Dt}),Lt={style:{display:"inline-block"},viewBox:"0 0 24 24",width:"1em",height:"1em"};function Ut(U,h){return p(),R("svg",Lt,h[0]||(h[0]=[m("path",{fill:"currentColor",d:"M13 2.03v2.02c4.39.54 7.5 4.53 6.96 8.92c-.46 3.64-3.32 6.53-6.96 6.96v2c5.5-.55 9.5-5.43 8.95-10.93c-.45-4.75-4.22-8.5-8.95-8.97m-2 .03c-1.95.19-3.81.94-5.33 2.2L7.1 5.74c1.12-.9 2.47-1.48 3.9-1.68zM4.26 5.67A9.9 9.9 0 0 0 2.05 11h2c.19-1.42.75-2.77 1.64-3.9zM2.06 13c.2 1.96.97 3.81 2.21 5.33l1.42-1.43A8 8 0 0 1 4.06 13zm5.04 5.37l-1.43 1.37A10 10 0 0 0 11 22v-2a8 8 0 0 1-3.9-1.63M12.5 7v5.25l4.5 2.67l-.75 1.23L11 13V7z"},null,-1)]))}const At=j({name:"mdi-progress-clock",render:Ut}),Bt={style:{"vertical-align":"-5px",padding:"0 2px"}},Mt={class:"inline-container"},Nt={class:"left-content",style:{width:"100%"}},qt={class:"right-content"},St=Ue({__name:"editTask",emits:["ok"],setup(U,{expose:h,emit:ve}){const be=ve,{getIsMobile:X}=yt(),{message:O}=vt(),{t:o}=bt(),J={id:null,name:"",cron:"",shell:"",remark:"",active:1,type:"user",config:{before_task_shell:"",after_task_shell:"",log_directory:"",source_file:"",allow_concurrency:!1}},Q=["before_task_shell","after_task_shell","log_directory","source_file","allow_concurrency"],f=Ae({show:!1,showAdvancedConfig:!1,model:fe(J),formRef:null,sourceFileName:"",isTreeLoading:!1,directoryTreeData:[]}),{show:x,showAdvancedConfig:w,model:n,formRef:I,sourceFileName:D,isTreeLoading:A,directoryTreeData:B}=Be(f),K=de(),W=de(),Y={active:{required:!0},name:{required:!0,message:o("page.cron.editTask.form.message.noName"),trigger:["input","blur"]},cron:{required:!0,validator(i,a){if(a){if(!ge(a))return new Error(o("page.cron.editTask.form.message.invalidCron"))}else return new Error(o("page.cron.editTask.form.message.noCron"));return!0},trigger:["input","blur"]},shell:{required:!0,message:o("page.cron.editTask.form.message.noShell"),trigger:["input","blur"]}};async function T(i){switch(i){case"genRandomCron":const a=Math.floor(Math.random()*24);let d=0;do d=Math.floor(Math.random()*60);while([0,1,2,3,30].includes(d));const g=`${d} ${a} * * *`;f.model.cron=g;break;case"openCronVisualization":K.value?.open({cron:f.model.cron,showSecond:f.model.cron.split(" ").length===6});break;case"showAdvancedConfig":w.value=!0,B.value=await Z();break;case"clearSelectCodeFile":f.model.config.source_file="",D.value="";break}}const F={onkeydown(i){if(i.key==="Enter")return O.warning(o("page.cron.editTask.form.message.no_enter")),!1}},v=Me(()=>{try{if(!ge(f.model.cron))return[];const i=[],a=Ne.parseExpression(f.model.cron);for(let d=0;d<5;d++)i.push(ht(a.next().toDate()));return i}catch{return[]}});function P(){return new Promise(i=>{I.value?.validate(async a=>{if(!a)try{const{type:d,id:g,name:C,cron:E,shell:k,remark:y,active:c}=f.model;let z=!1;for(const M of Q)f.model.config[M]&&(z=!0);let $="";z&&($=JSON.stringify(f.model.config)),g?(await it([{type:d,id:g,name:C,cron:E,shell:k,remark:y,active:c,config:$}]),O.success(o("page.cron.table.message.edit.ok"))):(await rt({type:d,name:C,cron:E,shell:k,remark:y,active:c,config:$}),O.success(o("page.cron.table.message.new.ok"))),be("ok"),i(!0),X&&(x.value=!1)}catch(d){throw new Error(d)}i(!1)}).catch(()=>{})})}async function he(i){if(f.model=fe(J),Object.assign(f.model,i),f.showAdvancedConfig=!1,f.model.config={before_task_shell:"",after_task_shell:"",log_directory:"",source_file:"",allow_concurrency:!1},Object.keys(i).length!==0&&i.config){f.showAdvancedConfig=!0,B.value=await Z();let a;try{a=i.config;for(const d of Q)a[d]&&(f.model.config[d]=a[d]);f.model.config.source_file&&(D.value=f.model.config.source_file.replace(/[\\/]$/,"").replace(/.*[\\/]/,""))}catch{}}f.show=!0}function ke(i){f.model.cron=i}async function Z(){A.value=!0;const i=await mt({type:wt.LOG,isDir:!0}),a=d=>{d.length&&d.forEach(g=>{g.type===0&&(Object.assign(g,{key:g.path,label:g.title,prefix:()=>_t(g.title)}),a(g.children),g.children.length||Object.assign(g,{children:null}))})};return a(i),A.value=!1,i}function ee(){try{W.value?.open(f.model.config.source_file||"")}catch{}}function we(i){D.value=i.label,f.model.config.source_file=i.key}function xe(i){i.style.height="auto";const{height:a}=getComputedStyle(i);i.style.height="0",i.style.overflow="hidden",requestAnimationFrame(()=>{i.style.height=a,i.addEventListener("transitionend",()=>{i.style.height="auto"},{once:!0})})}function Ce(i){const{height:a}=getComputedStyle(i);i.style.height=a,i.style.overflow="hidden",setTimeout(()=>i.style.height="0",0)}function Te(i){i.style.opacity="0",i.style.transform="scale(0.9)",requestAnimationFrame(()=>{requestAnimationFrame(()=>{i.style.transition="opacity 0.3s ease, transform 0.3s ease",i.style.opacity="1",i.style.transform="scale(1)"})})}function ze(i){i.style.opacity="1",i.style.transform="scale(1)",requestAnimationFrame(()=>{i.style.transition="opacity 0.3s ease, transform 0.3s ease",i.style.opacity="0",i.style.transform="scale(0.9)"})}return h({open:he}),(i,a)=>{const d=dt,g=pt,C=Se,E=Ve,k=je,y=Oe,c=Ie,z=Pe,$=Ge,M=At,te=He,_=Xe,le=Et,Fe=st,$e=Je,ae=Qe,G=Ke,oe=ft,N=We,ne=ut,se=Ye,ie=$t,re=Ze,H=et,ue=tt,ce=Tt,Re=lt,De=at,Ee=ot,Le=nt;return p(),R(pe,null,[e(X)?(p(),b(Le,{key:1,show:e(x),"onUpdate:show":a[29]||(a[29]=s=>_e(x)?x.value=s:null),height:"calc(var(--vh) * 100)",width:"100vw",placement:"right","auto-focus":!1,"mask-closable":!1},{default:l(()=>[t(Ee,{closable:"","header-style":"height: 60px; padding: 16px 12px","body-content-style":"padding: 4px 12px","footer-style":"padding: 16px 24px"},{header:l(()=>[t(G,{style:{gap:"4px"}},{default:l(()=>[t(C,{size:26,color:"var(--app-primary-color)"},{default:l(()=>[e(n).id?(p(),b(d,{key:0,style:{"vertical-align":"0"}})):(p(),b(g,{key:1,style:{"vertical-align":"0"}}))]),_:1}),t(De,{style:{height:"100%","max-width":"260px"}},{tooltip:l(()=>[m("span",null,r(e(n).id?e(o)("page.cron.table.edit"):e(o)("page.cron.table.new")),1)]),default:l(()=>[m("span",Bt,r(e(n).id?e(o)("page.cron.table.edit"):e(o)("page.cron.table.new")),1)]),_:1}),t(E,{size:"small",bordered:!1,style:{"margin-top":"2px"}},{default:l(()=>[u(r(e(n).type==="system"?e(o)("page.cron.type.system"):e(o)("page.cron.type.user")),1)]),_:1})]),_:1})]),footer:l(()=>[t(k,{justify:e(w)?"end":"space-between",style:{width:"100%"}},{default:l(()=>[q(t(_,{secondary:"",type:"primary",focusable:!1,onClick:a[27]||(a[27]=s=>w.value=!e(w))},{icon:l(()=>[t(C,null,{default:l(()=>[t(ce,{style:{"vertical-align":"baseline"}})]),_:1})]),default:l(()=>[u(" "+r(e(o)("page.cron.editTask.advancedConfig")),1)]),_:1},512),[[S,!e(w)]]),t(k,null,{default:l(()=>[t(_,{tertiary:"",focusable:!1,onClick:a[28]||(a[28]=s=>x.value=!1)},{default:l(()=>[u(r(e(o)("common.cancelText")),1)]),_:1}),t(_,{type:"primary",focusable:!1,onClick:P},{default:l(()=>[u(r(e(o)("common.okText")),1)]),_:1})]),_:1})]),_:1},8,["justify"])]),default:l(()=>[t(ue,{ref_key:"formRef",ref:I,model:e(n),rules:Y,style:{"padding-top":"1em"}},{default:l(()=>[m("div",Mt,[m("div",Nt,[t(c,{label:e(o)("page.cron.table.title.name"),path:"name"},{default:l(()=>[t(y,{value:e(n).name,"onUpdate:value":a[15]||(a[15]=s=>e(n).name=s),maxlength:"200",clearable:""},null,8,["value"])]),_:1},8,["label"])]),a[31]||(a[31]=m("div",{style:{flex:"0 0 8px"}},null,-1)),m("div",qt,[t(c,{label:e(o)("page.cron.table.title.active"),path:"active"},{default:l(()=>[t($,{value:e(n).active,"onUpdate:value":a[16]||(a[16]=s=>e(n).active=s),style:{height:"100%"},variant:"default-filled"},{default:l(()=>[t(z,{value:1},{default:l(()=>[u(r(e(o)("common.active")),1)]),_:1}),t(z,{value:0},{default:l(()=>[u(r(e(o)("common.inactive")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"])])]),t(c,{label:e(o)("page.cron.table.title.cron"),path:"cron"},{default:l(()=>[t(y,{value:e(n).cron,"onUpdate:value":a[17]||(a[17]=s=>e(n).cron=s),style:{"margin-right":"8px","font-family":"var(--app-font-family-mono)"},maxlength:"100",clearable:""},null,8,["value"]),t(k,{style:{"flex-flow":"row nowrap",gap:"4px"}},{default:l(()=>[t(N,{trigger:"hover",delay:500},{trigger:l(()=>[t(_,{strong:"",tertiary:"",style:{padding:"8px"},focusable:!1,onClick:a[18]||(a[18]=s=>T("openCronVisualization"))},{icon:l(()=>[t(oe)]),_:1})]),default:l(()=>[m("span",null,r(e(o)("page.cron.editTask.visualCron")),1)]),_:1}),t(N,{trigger:"hover",delay:500},{trigger:l(()=>[t(_,{strong:"",tertiary:"",style:{padding:"8px"},focusable:!1,onClick:a[19]||(a[19]=s=>T("genRandomCron"))},{icon:l(()=>[t(ne)]),_:1})]),default:l(()=>[m("span",null,r(e(o)("page.cron.editTask.randomCron")),1)]),_:1})]),_:1})]),_:1},8,["label"]),e(v).length===5&&e(n).active?(p(),b(G,{key:0,justify:"end",class:"mt--22px",style:{height:"22px"}},{default:l(()=>[t(ae,{trigger:"hover"},{trigger:l(()=>[t(L,{name:"fade",mode:"out-in",appear:""},{default:l(()=>[Date.parse(e(v)[0])-Date.now()<864e5?(p(),b(_,{key:0,text:"",focusable:!1,style:{height:"100%",color:"var(--app-text-color-3)"}},{icon:l(()=>[t(M)]),default:l(()=>[t(te,{duration:Date.parse(e(v)[0])-Date.now()},null,8,["duration"]),a[32]||(a[32]=u(" (NEXT) "))]),_:1})):(p(),b(_,{key:1,text:"",focusable:!1,style:{height:"100%",color:"var(--app-text-color-3)"}},{icon:l(()=>[t(le)]),default:l(()=>[u(" "+r(e(v)[0])+" (NEXT) ",1)]),_:1}))]),_:1})]),default:l(()=>[m("span",null,[u(r(e(v)[0])+" ",1),a[33]||(a[33]=m("br",null,null,-1)),u(" "+r(e(v)[1])+" ",1),a[34]||(a[34]=m("br",null,null,-1)),u(" "+r(e(v)[2])+" ",1),a[35]||(a[35]=m("br",null,null,-1)),u(" "+r(e(v)[3])+" ",1),a[36]||(a[36]=m("br",null,null,-1)),u(" "+r(e(v)[4]),1)])]),_:1})]),_:1})):V("",!0),t(c,{label:e(o)("page.cron.table.title.shell"),path:"shell"},{default:l(()=>[t(y,{value:e(n).shell,"onUpdate:value":a[20]||(a[20]=s=>e(n).shell=s),type:"textarea",style:{"font-family":"var(--app-font-family-mono)"},autosize:{minRows:3},"input-props":F},null,8,["value"])]),_:1},8,["label"]),t(c,{label:e(o)("page.cron.table.title.remark"),path:"remark"},{default:l(()=>[t(y,{value:e(n).remark,"onUpdate:value":a[21]||(a[21]=s=>e(n).remark=s),type:"textarea",maxlength:200,autosize:{minRows:1}},null,8,["value"])]),_:1},8,["label"]),t(L,{name:"slide-drawer",onEnter:Te,onBeforeLeave:ze},{default:l(()=>[e(w)?(p(),b(H,{key:0,bordered:!1,style:{"word-break":"unset"},"content-style":"padding: 0"},{default:l(()=>[t(c,{label:e(o)("page.cron.editTask.form.field.before_task_shell"),path:"config.before_task_shell"},{default:l(()=>[t(y,{value:e(n).config.before_task_shell,"onUpdate:value":a[22]||(a[22]=s=>e(n).config.before_task_shell=s),type:"textarea",style:{"font-family":"var(--app-font-family-mono)"},autosize:{minRows:1},"input-props":F},null,8,["value"])]),_:1},8,["label"]),t(c,{label:e(o)("page.cron.editTask.form.field.after_task_shell"),path:"config.after_task_shell"},{default:l(()=>[t(y,{value:e(n).config.after_task_shell,"onUpdate:value":a[23]||(a[23]=s=>e(n).config.after_task_shell=s),type:"textarea",style:{"font-family":"var(--app-font-family-mono)"},autosize:{minRows:1},"input-props":F},null,8,["value"])]),_:1},8,["label"]),t(c,{label:e(o)("page.cron.editTask.form.field.log_directory"),path:"config.log_directory"},{default:l(()=>[t(se,{value:e(n).config.log_directory,"onUpdate:value":a[24]||(a[24]=s=>e(n).config.log_directory=s),clearable:"","consistent-menu-width":!1,loading:e(A),options:e(B),"on-update:expanded-keys":e(ye)},null,8,["value","loading","options","on-update:expanded-keys"])]),_:1},8,["label"]),t(c,{label:e(o)("page.cron.editTask.form.field.source_file"),path:"config.source_file"},{default:l(()=>[t(k,{wrap:!1,style:{gap:"4px",width:"100%"}},{default:l(()=>[t(_,{secondary:"",focusable:!1,style:me({flexGrow:"1",fontFamily:e(n).config.source_file?"var(--app-font-family-mono)":"var(--app-font-family)"}),onClick:ee},{default:l(()=>[u(r(e(n).config.source_file?e(D):e(o)("page.cron.editTask.form.sourceFileBtn")),1)]),_:1},8,["style"]),q(t(_,{quaternary:"",style:{padding:"8px"},focusable:!1,onClick:a[25]||(a[25]=s=>T("clearSelectCodeFile"))},{icon:l(()=>[t(C,{size:28,depth:3},{default:l(()=>[t(ie)]),_:1})]),_:1},512),[[S,e(n).config.source_file]])]),_:1})]),_:1},8,["label"]),t(c,{label:e(o)("page.cron.editTask.form.field.allow_concurrency"),path:"config.allow_concurrency"},{default:l(()=>[t(re,{value:e(n).config.allow_concurrency,"onUpdate:value":a[26]||(a[26]=s=>e(n).config.allow_concurrency=s)},null,8,["value"])]),_:1},8,["label"])]),_:1})):V("",!0)]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])):(p(),b(Re,{key:0,show:e(x),"onUpdate:show":a[14]||(a[14]=s=>_e(x)?x.value=s:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,style:{width:"520px"},"positive-text":e(o)("common.okText"),"negative-text":e(o)("common.cancelText"),"negative-button-props":{ghost:!1,tertiary:!0},onPositiveClick:P},{icon:l(()=>[t(C,{size:26},{default:l(()=>[e(n).id?(p(),b(d,{key:0,style:{"vertical-align":"0"}})):(p(),b(g,{key:1,style:{"vertical-align":"0"}}))]),_:1})]),header:l(()=>[t(k,null,{default:l(()=>[u(r(e(n).id?e(o)("page.cron.table.edit"):e(o)("page.cron.table.new"))+" ",1),t(E,{size:"small",bordered:!1,style:{"margin-top":"3px"}},{default:l(()=>[u(r(e(n).type==="system"?e(o)("page.cron.type.system"):e(o)("page.cron.type.user")),1)]),_:1})]),_:1})]),action:l(()=>[t(L,{name:"fade",mode:"out-in",appear:""},{default:l(()=>[t(k,{justify:e(w)?"end":"space-between",style:{width:"100%"}},{default:l(()=>[q(t(_,{secondary:"",type:"primary",size:"small",focusable:!1,onClick:a[12]||(a[12]=s=>T("showAdvancedConfig"))},{icon:l(()=>[t(C,null,{default:l(()=>[t(ce,{style:{"vertical-align":"baseline"}})]),_:1})]),default:l(()=>[u(" "+r(e(o)("page.cron.editTask.advancedConfig")),1)]),_:1},512),[[S,!e(w)]]),t(k,null,{default:l(()=>[t(_,{size:"small",tertiary:"",ghost:!1,focusable:!1,onClick:a[13]||(a[13]=s=>x.value=!1)},{default:l(()=>[u(r(e(o)("common.cancelText")),1)]),_:1}),t(_,{size:"small",type:"primary",focusable:!1,onClick:P},{default:l(()=>[u(r(e(o)("common.okText")),1)]),_:1})]),_:1})]),_:1},8,["justify"])]),_:1})]),default:l(()=>[t(H,{bordered:!1,style:{height:"100%","word-break":"unset"},"content-style":"padding: 0"},{default:l(()=>[t(ue,{ref_key:"formRef",ref:I,model:e(n),rules:Y,"label-placement":"left","label-width":e(w)?"100px":"auto","require-mark-placement":"right-hanging",style:{"padding-top":"1em"}},{default:l(()=>[t(c,{label:e(o)("page.cron.table.title.name"),path:"name"},{default:l(()=>[t(y,{value:e(n).name,"onUpdate:value":a[0]||(a[0]=s=>e(n).name=s),maxlength:"200",clearable:""},null,8,["value"])]),_:1},8,["label"]),t(c,{label:e(o)("page.cron.table.title.active"),path:"active"},{default:l(()=>[t(G,{justify:"space-between",style:{width:"100%"}},{default:l(()=>[t($,{value:e(n).active,"onUpdate:value":a[1]||(a[1]=s=>e(n).active=s),style:{height:"100%"},variant:"default-filled"},{default:l(()=>[t(z,{value:1},{default:l(()=>[u(r(e(o)("common.active")),1)]),_:1}),t(z,{value:0},{default:l(()=>[u(r(e(o)("common.inactive")),1)]),_:1})]),_:1},8,["value"]),e(v).length===5&&e(n).active?(p(),b(ae,{key:0,trigger:"hover",placement:"bottom-end"},{trigger:l(()=>[t(L,{name:"fade",mode:"out-in",appear:""},{default:l(()=>[Date.parse(e(v)[0])-Date.now()<864e5?(p(),b(_,{key:0,text:"",focusable:!1,style:{height:"100%"}},{icon:l(()=>[t(M)]),default:l(()=>[t(te,{duration:Date.parse(e(v)[0])-Date.now()},null,8,["duration"]),a[30]||(a[30]=u(" (NEXT) "))]),_:1})):(p(),b(_,{key:1,text:"",focusable:!1,style:{height:"100%"}},{icon:l(()=>[t(le)]),default:l(()=>[u(" "+r(e(v)[0])+" (NEXT) ",1)]),_:1}))]),_:1})]),default:l(()=>[t($e,null,{default:l(()=>[(p(),R(pe,null,qe(5,s=>t(Fe,{key:s,title:e(v)[s-1]},null,8,["title"])),64))]),_:1})]),_:1})):V("",!0)]),_:1})]),_:1},8,["label"]),t(c,{label:e(o)("page.cron.table.title.cron"),path:"cron"},{default:l(()=>[t(y,{value:e(n).cron,"onUpdate:value":a[2]||(a[2]=s=>e(n).cron=s),style:{"margin-right":"8px","font-family":"var(--app-font-family-mono)"},maxlength:"100",clearable:""},null,8,["value"]),t(k,{style:{"flex-flow":"row nowrap",gap:"4px"}},{default:l(()=>[t(N,{trigger:"hover",delay:500},{trigger:l(()=>[t(_,{strong:"",tertiary:"",style:{padding:"8px"},focusable:!1,onClick:a[3]||(a[3]=s=>T("openCronVisualization"))},{icon:l(()=>[t(oe)]),_:1})]),default:l(()=>[m("span",null,r(e(o)("page.cron.editTask.visualCron")),1)]),_:1}),t(N,{trigger:"hover",delay:500},{trigger:l(()=>[t(_,{strong:"",tertiary:"",style:{padding:"8px"},focusable:!1,onClick:a[4]||(a[4]=s=>T("genRandomCron"))},{icon:l(()=>[t(ne)]),_:1})]),default:l(()=>[m("span",null,r(e(o)("page.cron.editTask.randomCron")),1)]),_:1})]),_:1})]),_:1},8,["label"]),t(c,{label:e(o)("page.cron.table.title.shell"),path:"shell"},{default:l(()=>[t(y,{value:e(n).shell,"onUpdate:value":a[5]||(a[5]=s=>e(n).shell=s),type:"textarea",style:{"font-family":"var(--app-font-family-mono)"},autosize:{minRows:3},"input-props":F},null,8,["value"])]),_:1},8,["label"]),t(c,{label:e(o)("page.cron.table.title.remark"),path:"remark"},{default:l(()=>[t(y,{value:e(n).remark,"onUpdate:value":a[6]||(a[6]=s=>e(n).remark=s),type:"textarea",maxlength:200,autosize:{minRows:1}},null,8,["value"])]),_:1},8,["label"]),t(L,{name:"slide-modal",onEnter:xe,onBeforeLeave:Ce},{default:l(()=>[e(w)?(p(),b(H,{key:0,bordered:!1,style:{"word-break":"unset"},"content-style":"padding: 0"},{default:l(()=>[t(c,{label:e(o)("page.cron.editTask.form.field.before_task_shell"),path:"config.before_task_shell"},{default:l(()=>[t(y,{value:e(n).config.before_task_shell,"onUpdate:value":a[7]||(a[7]=s=>e(n).config.before_task_shell=s),type:"textarea",style:{"font-family":"var(--app-font-family-mono)"},autosize:{minRows:1},"input-props":F},null,8,["value"])]),_:1},8,["label"]),t(c,{label:e(o)("page.cron.editTask.form.field.after_task_shell"),path:"config.after_task_shell"},{default:l(()=>[t(y,{value:e(n).config.after_task_shell,"onUpdate:value":a[8]||(a[8]=s=>e(n).config.after_task_shell=s),type:"textarea",style:{"font-family":"var(--app-font-family-mono)"},autosize:{minRows:1},"input-props":F},null,8,["value"])]),_:1},8,["label"]),t(c,{label:e(o)("page.cron.editTask.form.field.log_directory"),path:"config.log_directory"},{default:l(()=>[t(se,{value:e(n).config.log_directory,"onUpdate:value":a[9]||(a[9]=s=>e(n).config.log_directory=s),clearable:"","consistent-menu-width":!1,loading:e(A),options:e(B),"on-update:expanded-keys":e(ye)},null,8,["value","loading","options","on-update:expanded-keys"])]),_:1},8,["label"]),t(c,{label:e(o)("page.cron.editTask.form.field.source_file"),path:"config.source_file",style:{width:"100%"}},{default:l(()=>[t(k,{wrap:!1,style:{gap:"4px",width:"100%"}},{default:l(()=>[t(_,{secondary:"",focusable:!1,style:me({flexGrow:"1",fontFamily:e(n).config.source_file?"var(--app-font-family-mono)":"var(--app-font-family)"}),onClick:ee},{default:l(()=>[u(r(e(n).config.source_file?e(D):e(o)("page.cron.editTask.form.sourceFileBtn")),1)]),_:1},8,["style"]),q(t(_,{quaternary:"",style:{padding:"8px"},focusable:!1,onClick:a[10]||(a[10]=s=>T("clearSelectCodeFile"))},{icon:l(()=>[t(C,{size:28,depth:3},{default:l(()=>[t(ie)]),_:1})]),_:1},512),[[S,e(n).config.source_file]])]),_:1})]),_:1},8,["label"]),t(c,{label:e(o)("page.cron.editTask.form.field.allow_concurrency"),path:"config.allow_concurrency"},{default:l(()=>[t(re,{value:e(n).config.allow_concurrency,"onUpdate:value":a[11]||(a[11]=s=>e(n).config.allow_concurrency=s),round:!1},null,8,["value"])]),_:1},8,["label"])]),_:1})):V("",!0)]),_:1})]),_:1},8,["model","label-width"])]),_:1})]),_:1},8,["show","positive-text","negative-text"])),t(ct,{ref_key:"cronVisualizationRef",ref:K,onOnConfirm:ke},null,512),t(e(gt),{ref_key:"selectCodeFileRef",ref:W,onOnConfirmSelect:we},null,512)],64)}}}),tl=kt(St,[["__scopeId","data-v-814adad8"]]);export{tl as default};
