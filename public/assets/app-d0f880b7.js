import{_ as Ce,n as $e,o as Te,p as Ie,q as Ue,r as Se,s as Pe,t as De,h as ve,v as Ne,w as Me,d as he,c as xe,i as we,x as Re}from"./app-d83d28c3.js";import{_ as qe,a as Ee}from"./app-9df6a39b.js";import{I as Fe}from"./app-9f5af7f8.js";import{k as Oe,i as Ae,h as Be,b as Le,l as Ve,f as je,m as He,n as Ge}from"./app-d3fc3aa7.js";import{u as X}from"./app-9adaac50.js";import{b as Y,d as de,e as Je}from"./app-16ee8ad9.js";import{G as Z,r as ee,J as te,F as e,a3 as d,a4 as b,a5 as t,a$ as Q,a6 as l,ah as a,aC as R,aP as c,aD as s,aO as J,aE as W,aF as O,aJ as me,aQ as N,bl as We,aR as le,b6 as ne,bB as Qe,aw as oe,b1 as Ke,bC as Xe,bD as ae,bx as se,by as ie,ak as ue,al as pe,ap as H,bu as Ye,bv as Ze,bE as et,bg as ge,ba as ke,bF as tt,aI as ze,aH as ye,av as lt,b5 as nt,bG as ot,bH as at}from"./vendor-191e7315.js";import{u as K,g as be}from"./app-de22de5f.js";const st={style:{"line-height":".5"}},it={key:0,style:{"line-height":"2.5"}},rt={key:1,style:{"line-height":"2","padding-bottom":"5px"}},ut={style:{"line-height":".5"}},pt={key:0,style:{"line-height":"2.5"}},dt={key:1,style:{"line-height":"2","padding-bottom":"5px"}},ct={style:{"vertical-align":"-5px",padding:"0 2px"}},ft={style:{"line-height":".5"}},_t={key:0,style:{"line-height":"2.5"}},mt={key:1,style:{"line-height":"2","padding-bottom":"5px"}},gt={style:{"line-height":".5"}},yt={key:0,style:{"line-height":"2.5"}},bt={key:1,style:{"line-height":"2","padding-bottom":"5px"}},Mt=Z({__name:"Attribute",setup(re,{expose:A}){const{getIsMobile:$}=X(),{t:f}=Y(),B=ee({show:!1,loading:!1,path:"",isDir:!1,data:null,icon:null}),{show:_,loading:m,path:y,isDir:i,data:o,icon:w}=te(B);async function q(E={path:"",isDir:!1}){i.value=E.isDir||!1,y.value=E.path,m.value=!0;try{const n=await Oe({path:y.value});i.value&&(n.fileSize=""),o.value=n}catch{}if(i.value)w.value=me(Be);else{const n=y.value.substring(y.value.lastIndexOf(".")+1),P=Le[n]||{};w.value=P.language?me(P.icon):me(Ae)}m.value=!1,_.value=!0}function r(){_.value=!1,setTimeout(()=>{L()},$.value?0:500)}function L(){o.value=null,w.value=null}return A({open:q}),(E,n)=>{const P=Fe,z=N,D=Ce,p=We,u=le,g=$e,k=Te,v=Ie,x=Ue,I=ne,h=Qe,U=qe,T=Se,S=oe,C=Ke,V=Ee,F=Pe,G=De,j=Xe,ce=ae,fe=se,M=ie;return e($)?(d(),b(M,{key:1,show:e(_),"onUpdate:show":n[1]||(n[1]=_e=>O(_)?_.value=_e:null),height:"400px",placement:"bottom",style:{width:"100%",margin:"0 auto","border-radius":"1em 1em 0 0"},"auto-focus":!1,onMaskClick:r,onAfterLeave:r},{default:t(()=>[l(fe,{closable:"","header-style":"height: 60px; padding: 16px 12px; border-bottom: hidden","body-content-style":"padding: '4px 8px'}; overscroll-behavior: none","footer-style":"padding: 16px 24px 24px 24px"},{header:t(()=>[l(u,{style:{gap:"4px"}},{default:t(()=>[e(m)?(d(),b(P,{key:0,icon:"svg-spinners:pulse-2",size:30,style:{"vertical-align":"0"}})):(d(),b(z,{key:1,size:28},{default:t(()=>[(d(),b(Q(e(w))))]),_:1})),l(I,{style:{height:"100%","max-width":"190px"}},{tooltip:t(()=>[a("span",null,s(e(o)?e(o).name:e(f)("file.attribute.title")),1)]),default:t(()=>[a("span",ct,s(e(o)?e(o).name:e(f)("file.attribute.title")),1)]),_:1})]),_:1})]),default:t(()=>[l(j,{"single-column":"",bordered:!1,"bottom-bordered":!1},{default:t(()=>[a("tbody",null,[a("tr",null,[a("td",ft,[e(o)&&e(o).fileSize?(d(),R(J,{key:0},[l(u,{size:1},{default:t(()=>[l(p,null,{icon:t(()=>[l(D)]),default:t(()=>[c(s(e(f)("file.attribute.fileSize"))+" ",1)]),_:1})]),_:1}),n[17]||(n[17]=a("br",null,null,-1))],64)):W("",!0),l(u,{size:1},{default:t(()=>[l(p,null,{icon:t(()=>[e(i)?(d(),b(k,{key:1})):(d(),b(g,{key:0}))]),default:t(()=>[c(s(e(i)?e(f)("file.attribute.folderMode"):e(f)("file.attribute.fileMode"))+" ",1)]),_:1})]),_:1}),n[18]||(n[18]=a("br",null,null,-1)),l(u,{size:1},{default:t(()=>[l(p,null,{icon:t(()=>[e(i)?(d(),b(x,{key:1})):(d(),b(v,{key:0}))]),default:t(()=>[c(s(e(i)?e(f)("file.attribute.folderPath"):e(f)("file.attribute.filePath"))+" ",1)]),_:1})]),_:1})]),e(m)?(d(),R("td",mt,[e(o)&&e(o).fileSize?(d(),R(J,{key:0},[l(h,{text:"",size:"small",width:130,sharp:!1}),n[21]||(n[21]=a("br",null,null,-1))],64)):W("",!0),l(h,{text:"",size:"small",width:130,sharp:!1}),n[22]||(n[22]=a("br",null,null,-1)),l(h,{text:"",size:"small",width:130,sharp:!1})])):(d(),R("td",_t,[e(o)&&e(o).fileSize?(d(),R(J,{key:0},[l(p,{bordered:!1,color:{color:"transparent"}},{default:t(()=>[c(s(e(o)?e(o).fileSize:"Unknown"),1)]),_:1}),n[19]||(n[19]=a("br",null,null,-1))],64)):W("",!0),l(p,{bordered:!1,color:{color:"transparent"}},{default:t(()=>[c(s(e(o)?e(o).mode:"Unknown"),1)]),_:1}),n[20]||(n[20]=a("br",null,null,-1)),l(p,{bordered:!1,color:{color:"transparent"}},{default:t(()=>[l(I,{style:{"max-width":"138px"}},{default:t(()=>[c(s(e(o)?e(o).path:"Unknown"),1)]),_:1})]),_:1})]))]),a("tr",gt,[a("td",null,[l(u,{size:1},{default:t(()=>[l(p,{type:"warning"},{icon:t(()=>[l(U)]),default:t(()=>[c(s(e(f)("file.attribute.birthtime"))+" ",1)]),_:1}),l(C,{trigger:e($)?"click":"hover","show-arrow":!1},{trigger:t(()=>[l(S,{quaternary:"",circle:"",size:"small",focusable:!1},{default:t(()=>[l(T)]),_:1})]),default:t(()=>[a("span",null,s(e(f)("file.attribute.birthtimeExplanation")),1)]),_:1},8,["trigger"])]),_:1}),n[23]||(n[23]=a("br",null,null,-1)),l(u,{size:1},{default:t(()=>[l(p,{type:"info"},{icon:t(()=>[l(V)]),default:t(()=>[c(s(e(f)("file.attribute.mtime"))+" ",1)]),_:1}),l(C,{trigger:e($)?"click":"hover","show-arrow":!1},{trigger:t(()=>[l(S,{quaternary:"",circle:"",size:"small",focusable:!1},{default:t(()=>[l(T)]),_:1})]),default:t(()=>[a("span",null,s(e(f)("file.attribute.mtimeExplanation")),1)]),_:1},8,["trigger"])]),_:1}),n[24]||(n[24]=a("br",null,null,-1)),l(u,{size:1},{default:t(()=>[l(p,{type:"success"},{icon:t(()=>[l(F)]),default:t(()=>[c(s(e(f)("file.attribute.atime"))+" ",1)]),_:1}),l(C,{trigger:e($)?"click":"hover","show-arrow":!1},{trigger:t(()=>[l(S,{quaternary:"",circle:"",size:"small",focusable:!1},{default:t(()=>[l(T)]),_:1})]),default:t(()=>[a("span",null,s(e(f)("file.attribute.atimeExplanation")),1)]),_:1},8,["trigger"])]),_:1}),n[25]||(n[25]=a("br",null,null,-1)),l(u,{size:1},{default:t(()=>[l(p,{type:"error"},{icon:t(()=>[l(G)]),default:t(()=>[c(s(e(f)("file.attribute.ctime"))+" ",1)]),_:1}),l(C,{trigger:e($)?"click":"hover","show-arrow":!1},{trigger:t(()=>[l(S,{quaternary:"",circle:"",size:"small",focusable:!1},{default:t(()=>[l(T)]),_:1})]),default:t(()=>[a("span",null,s(e(f)("file.attribute.ctimeExplanation")),1)]),_:1},8,["trigger"])]),_:1})]),e(m)?(d(),R("td",bt,[l(h,{text:"",size:"small",width:130,sharp:!1}),n[29]||(n[29]=a("br",null,null,-1)),l(h,{text:"",size:"small",width:130,sharp:!1}),n[30]||(n[30]=a("br",null,null,-1)),l(h,{text:"",size:"small",width:130,sharp:!1}),n[31]||(n[31]=a("br",null,null,-1)),l(h,{text:"",size:"small",width:130,sharp:!1})])):(d(),R("td",yt,[l(p,{bordered:!1,color:{color:"transparent"}},{default:t(()=>[c(s(e(o)?e(o).birthtime:"Unknown"),1)]),_:1}),n[26]||(n[26]=a("br",null,null,-1)),l(p,{bordered:!1,color:{color:"transparent"}},{default:t(()=>[c(s(e(o)?e(o).mtime:"Unknown"),1)]),_:1}),n[27]||(n[27]=a("br",null,null,-1)),l(p,{bordered:!1,color:{color:"transparent"}},{default:t(()=>[c(s(e(o)?e(o).atime:"Unknown"),1)]),_:1}),n[28]||(n[28]=a("br",null,null,-1)),l(p,{bordered:!1,color:{color:"transparent"}},{default:t(()=>[c(s(e(o)?e(o).ctime:"Unknown"),1)]),_:1})]))])])]),_:1})]),_:1})]),_:1},8,["show"])):(d(),b(ce,{key:0,show:e(_),"onUpdate:show":n[0]||(n[0]=_e=>O(_)?_.value=_e:null),preset:"dialog",style:{"max-width":"fit-content","border-radius":"10px"},"auto-focus":!1,title:e(o)?e(o).name:e(f)("file.attribute.title"),"on-close":r,"on-mask-click":r},{icon:t(()=>[e(m)?(d(),b(P,{key:0,icon:"svg-spinners:pulse-2",size:30,style:{"vertical-align":"0"}})):(d(),b(z,{key:1,size:26},{default:t(()=>[(d(),b(Q(e(w)),{style:{"vertical-align":"-0.1em"}}))]),_:1}))]),default:t(()=>[l(j,{"single-column":"",bordered:!1,"bottom-bordered":!1},{default:t(()=>[a("tbody",null,[a("tr",null,[a("td",st,[e(o)&&e(o).fileSize?(d(),R(J,{key:0},[l(u,{size:1},{default:t(()=>[l(p,null,{icon:t(()=>[l(D)]),default:t(()=>[c(s(e(f)("file.attribute.fileSize"))+" ",1)]),_:1})]),_:1}),n[2]||(n[2]=a("br",null,null,-1))],64)):W("",!0),l(u,{size:1},{default:t(()=>[l(p,null,{icon:t(()=>[e(i)?(d(),b(k,{key:1})):(d(),b(g,{key:0}))]),default:t(()=>[c(s(e(i)?e(f)("file.attribute.folderMode"):e(f)("file.attribute.fileMode"))+" ",1)]),_:1})]),_:1}),n[3]||(n[3]=a("br",null,null,-1)),l(u,{size:1},{default:t(()=>[l(p,null,{icon:t(()=>[e(i)?(d(),b(x,{key:1})):(d(),b(v,{key:0}))]),default:t(()=>[c(s(e(i)?e(f)("file.attribute.folderPath"):e(f)("file.attribute.filePath"))+" ",1)]),_:1})]),_:1})]),e(m)?(d(),R("td",rt,[e(o)&&e(o).fileSize?(d(),R(J,{key:0},[l(h,{text:"",size:"small",width:130,sharp:!1}),n[6]||(n[6]=a("br",null,null,-1))],64)):W("",!0),l(h,{text:"",size:"small",width:130,sharp:!1}),n[7]||(n[7]=a("br",null,null,-1)),l(h,{text:"",size:"small",width:130,sharp:!1})])):(d(),R("td",it,[e(o)&&e(o).fileSize?(d(),R(J,{key:0},[l(p,{bordered:!1,color:{color:"transparent"}},{default:t(()=>[c(s(e(o)?e(o).fileSize:"Unknown"),1)]),_:1}),n[4]||(n[4]=a("br",null,null,-1))],64)):W("",!0),l(p,{bordered:!1,color:{color:"transparent"}},{default:t(()=>[c(s(e(o)?e(o).mode:"Unknown"),1)]),_:1}),n[5]||(n[5]=a("br",null,null,-1)),l(p,{bordered:!1,color:{color:"transparent"}},{default:t(()=>[l(I,{style:{"max-width":"138px"}},{default:t(()=>[c(s(e(o)?e(o).path:"Unknown"),1)]),_:1})]),_:1})]))]),a("tr",ut,[a("td",null,[l(u,{size:1},{default:t(()=>[l(p,{type:"warning"},{icon:t(()=>[l(U)]),default:t(()=>[c(s(e(f)("file.attribute.birthtime"))+" ",1)]),_:1}),l(C,{trigger:e($)?"click":"hover","show-arrow":!1},{trigger:t(()=>[l(S,{quaternary:"",circle:"",size:"small",focusable:!1},{default:t(()=>[l(T)]),_:1})]),default:t(()=>[a("span",null,s(e(f)("file.attribute.birthtimeExplanation")),1)]),_:1},8,["trigger"])]),_:1}),n[8]||(n[8]=a("br",null,null,-1)),l(u,{size:1},{default:t(()=>[l(p,{type:"info"},{icon:t(()=>[l(V)]),default:t(()=>[c(s(e(f)("file.attribute.mtime"))+" ",1)]),_:1}),l(C,{trigger:e($)?"click":"hover","show-arrow":!1},{trigger:t(()=>[l(S,{quaternary:"",circle:"",size:"small",focusable:!1},{default:t(()=>[l(T)]),_:1})]),default:t(()=>[a("span",null,s(e(f)("file.attribute.mtimeExplanation")),1)]),_:1},8,["trigger"])]),_:1}),n[9]||(n[9]=a("br",null,null,-1)),l(u,{size:1},{default:t(()=>[l(p,{type:"success"},{icon:t(()=>[l(F)]),default:t(()=>[c(s(e(f)("file.attribute.atime"))+" ",1)]),_:1}),l(C,{trigger:e($)?"click":"hover","show-arrow":!1},{trigger:t(()=>[l(S,{quaternary:"",circle:"",size:"small",focusable:!1},{default:t(()=>[l(T)]),_:1})]),default:t(()=>[a("span",null,s(e(f)("file.attribute.atimeExplanation")),1)]),_:1},8,["trigger"])]),_:1}),n[10]||(n[10]=a("br",null,null,-1)),l(u,{size:1},{default:t(()=>[l(p,{type:"error"},{icon:t(()=>[l(G)]),default:t(()=>[c(s(e(f)("file.attribute.ctime"))+" ",1)]),_:1}),l(C,{trigger:e($)?"click":"hover","show-arrow":!1},{trigger:t(()=>[l(S,{quaternary:"",circle:"",size:"small",focusable:!1},{default:t(()=>[l(T)]),_:1})]),default:t(()=>[a("span",null,s(e(f)("file.attribute.ctimeExplanation")),1)]),_:1},8,["trigger"])]),_:1})]),e(m)?(d(),R("td",dt,[l(h,{text:"",size:"small",width:130,sharp:!1}),n[14]||(n[14]=a("br",null,null,-1)),l(h,{text:"",size:"small",width:130,sharp:!1}),n[15]||(n[15]=a("br",null,null,-1)),l(h,{text:"",size:"small",width:130,sharp:!1}),n[16]||(n[16]=a("br",null,null,-1)),l(h,{text:"",size:"small",width:130,sharp:!1})])):(d(),R("td",pt,[l(p,{bordered:!1,color:{color:"transparent"}},{default:t(()=>[c(s(e(o)?e(o).birthtime:"Unknown"),1)]),_:1}),n[11]||(n[11]=a("br",null,null,-1)),l(p,{bordered:!1,color:{color:"transparent"}},{default:t(()=>[c(s(e(o)?e(o).mtime:"Unknown"),1)]),_:1}),n[12]||(n[12]=a("br",null,null,-1)),l(p,{bordered:!1,color:{color:"transparent"}},{default:t(()=>[c(s(e(o)?e(o).atime:"Unknown"),1)]),_:1}),n[13]||(n[13]=a("br",null,null,-1)),l(p,{bordered:!1,color:{color:"transparent"}},{default:t(()=>[c(s(e(o)?e(o).ctime:"Unknown"),1)]),_:1})]))])])]),_:1})]),_:1},8,["show","title"]))}}}),vt={style:{"vertical-align":"-5px",padding:"0 2px"}},ht=Z({__name:"Create",emits:["onCreated"],setup(re,{expose:A,emit:$}){const f=$,{getIsMobile:B}=X(),_=ee({show:!1,loading:!1,data:{type:1,name:"",dir:""},directoryTreeData:[],currentTreeSelectOption:null}),{show:m,loading:y,data:i,directoryTreeData:o,currentTreeSelectOption:w}=te(_),{message:q}=de(),{t:r}=Y();async function L(p){p&&(w.value=p,i.value.dir=p.key),m.value=!0,y.value=!0,o.value=await be(),y.value=!1}function E(p,u,g){switch(g.action){case"select":g.node&&(w.value=g.node,i.value.dir=g.node.key);break;case"delete":case"clear":case"unselect":w.value=null,i.value.dir="";break}}function n(){return H(N,{style:"vertical-align: 0"},{default:()=>H(ve)})}async function P(){try{await Ve(i.value),q.success(r("file.create.success")),f("onCreated",i.value),z()}catch{}finally{D()}}function z(){m.value=!1,D()}function D(){o.value=[],w.value=null,i.value={type:1,name:"",dir:""}}return A({open:L}),(p,u)=>{const g=Ne,k=le,v=oe,x=Ye,I=Me,h=Ze,U=et,T=ge,S=ke,C=tt,V=ze,F=ae,G=ne,j=ye,ce=se,fe=ie;return e(B)?(d(),b(fe,{key:1,show:e(m),"onUpdate:show":u[8]||(u[8]=M=>O(m)?m.value=M:null),height:"100%",placement:"bottom","auto-focus":!1,onAfterLeave:z},{default:t(()=>[l(ce,{closable:"","header-style":"padding: 16px 12px","body-content-style":"padding: 4px 12px","footer-style":"padding: 16px 24px"},{header:t(()=>[l(k,{style:{gap:"4px"}},{default:t(()=>[l(e(N),{size:26,color:"var(--app-primary-color)"},{default:t(()=>[(d(),b(Q(e(ve))))]),_:1}),l(G,{style:{height:"100%","max-width":"190px"}},{tooltip:t(()=>[a("span",null,s(e(r)("file.create.title")),1)]),default:t(()=>[a("span",vt,s(e(r)("file.create.title")),1)]),_:1})]),_:1})]),footer:t(()=>[l(j,{inline:"",wrap:!1,justify:"space-between",style:{gap:"0px",width:"100%"}},{default:t(()=>[l(v,{tertiary:"",focusable:!1,style:{width:"50%","border-radius":"8px","margin-left":"-4px"},onClick:z},{default:t(()=>[c(s(e(r)("common.cancelText")),1)]),_:1}),l(v,{secondary:"",type:"primary",focusable:!1,disabled:!e(w)||!e(i).name,style:{width:"50%","border-radius":"8px","margin-left":"8px"},onClick:u[7]||(u[7]=M=>P())},{default:t(()=>[c(s(e(r)("common.okText")),1)]),_:1},8,["disabled"])]),_:1})]),default:t(()=>[l(V,{bordered:!1,style:{height:"100%","word-break":"unset"},"content-style":"padding: 0"},{default:t(()=>[l(C,{model:e(i),"label-placement":"left",style:{"padding-top":"1em"}},{default:t(()=>[l(U,{label:e(r)("file.create.form.type"),"show-label":!1,path:"type",style:{"padding-bottom":"5px"}},{default:t(()=>[l(h,{"x-gap":"24px",cols:2},{default:t(()=>[l(x,null,{default:t(()=>[l(v,{secondary:"",block:"",strong:"",focusable:!1,class:ue(["type-card select-none",[e(i).type===1?"selected":""]]),style:{height:"140px",width:"140px"},onClick:u[4]||(u[4]=M=>e(i).type=1)},{default:t(()=>[l(k,{vertical:""},{default:t(()=>[l(e(N),{size:48,color:e(i).type===1?"var(--app-primary-color)":void 0},{default:t(()=>[l(g,{style:{"vertical-align":"baseline"}})]),_:1},8,["color"]),a("strong",{style:pe({fontSize:"16px",fontWeight:"550",color:e(i).type===1?"var(--app-primary-color)":void 0})},s(e(r)("file.create.form.typeFile")),5)]),_:1})]),_:1},8,["class"])]),_:1}),l(x,null,{default:t(()=>[l(v,{secondary:"",block:"",strong:"",focusable:!1,class:ue(["type-card select-none",[e(i).type===0?"selected":""]]),style:{height:"140px",width:"140px"},onClick:u[5]||(u[5]=M=>e(i).type=0)},{default:t(()=>[l(k,{vertical:""},{default:t(()=>[l(e(N),{size:48,color:e(i).type===0?"var(--app-primary-color)":void 0},{default:t(()=>[l(I,{style:{"vertical-align":"baseline"}})]),_:1},8,["color"]),a("strong",{style:pe({fontSize:"16px",fontWeight:"550",color:e(i).type===0?"var(--app-primary-color)":void 0})},s(e(r)("file.create.form.typeFolder")),5)]),_:1})]),_:1},8,["class"])]),_:1})]),_:1})]),_:1},8,["label"]),l(U,{label:e(r)("file.create.form.path"),path:"dir"},{default:t(()=>[l(T,{size:"large","default-value":e(w)?.key,clearable:"","show-path":!0,separator:" / ","consistent-menu-width":!1,loading:e(y),options:e(o),"on-update:expanded-keys":e(K),"on-update:value":E},null,8,["default-value","loading","options","on-update:expanded-keys"])]),_:1},8,["label"]),l(U,{label:e(r)("file.create.form.name"),path:"name"},{default:t(()=>[l(S,{value:e(i).name,"onUpdate:value":u[6]||(u[6]=M=>e(i).name=M),clearable:"",size:"large",placeholder:e(r)("file.create.form.namePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1})]),_:1},8,["show"])):(d(),b(F,{key:0,show:e(m),"onUpdate:show":u[3]||(u[3]=M=>O(m)?m.value=M:null),preset:"dialog","auto-focus":!1,icon:n,title:e(r)("file.create.title"),"positive-text":e(r)("common.okText"),"negative-text":e(r)("common.cancelText"),"positive-button-props":{disabled:!e(w)||!e(i).name},"negative-button-props":{ghost:!1,tertiary:!0},"on-close":z,"on-mask-click":z,onNegativeClick:z,onPositiveClick:P},{default:t(()=>[l(V,{bordered:!1,style:{height:"100%","word-break":"unset"},"content-style":"padding: 0"},{default:t(()=>[l(C,{model:e(i),"label-placement":"left",style:{"padding-top":"1em"}},{default:t(()=>[l(U,{label:e(r)("file.create.form.type"),"show-label":!1,path:"type",style:{"padding-bottom":"5px"}},{default:t(()=>[l(h,{"x-gap":"32px",cols:2},{default:t(()=>[l(x,null,{default:t(()=>[l(v,{secondary:"",block:"",strong:"",focusable:!1,class:ue(["type-card select-none",[e(i).type===1?"selected":""]]),style:{height:"180px",width:"180px"},onClick:u[0]||(u[0]=M=>e(i).type=1)},{default:t(()=>[l(k,{vertical:""},{default:t(()=>[l(e(N),{size:64,color:e(i).type===1?"var(--app-primary-color)":void 0},{default:t(()=>[l(g,{style:{"vertical-align":"baseline"}})]),_:1},8,["color"]),a("strong",{style:pe({fontSize:"18px",color:e(i).type===1?"var(--app-primary-color)":void 0})},s(e(r)("file.create.form.typeFile")),5)]),_:1})]),_:1},8,["class"])]),_:1}),l(x,null,{default:t(()=>[l(v,{secondary:"",block:"",strong:"",focusable:!1,class:ue(["type-card select-none",[e(i).type===0?"selected":""]]),style:{height:"180px",width:"180px"},onClick:u[1]||(u[1]=M=>e(i).type=0)},{default:t(()=>[l(k,{vertical:""},{default:t(()=>[l(e(N),{size:64,color:e(i).type===0?"var(--app-primary-color)":void 0},{default:t(()=>[l(I,{style:{"vertical-align":"baseline"}})]),_:1},8,["color"]),a("strong",{style:pe({fontSize:"18px",color:e(i).type===0?"var(--app-primary-color)":void 0})},s(e(r)("file.create.form.typeFolder")),5)]),_:1})]),_:1},8,["class"])]),_:1})]),_:1})]),_:1},8,["label"]),l(U,{label:e(r)("file.create.form.path"),path:"dir"},{default:t(()=>[l(T,{"default-value":e(w)?.key,clearable:"","show-path":!0,separator:" / ","consistent-menu-width":!1,loading:e(y),options:e(o),"on-update:expanded-keys":e(K),"on-update:value":E},null,8,["default-value","loading","options","on-update:expanded-keys"])]),_:1},8,["label"]),l(U,{label:e(r)("file.create.form.name"),path:"name"},{default:t(()=>[l(S,{value:e(i).name,"onUpdate:value":u[2]||(u[2]=M=>e(i).name=M),clearable:"",placeholder:e(r)("file.create.form.namePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["show","title","positive-text","negative-text","positive-button-props"]))}}}),Rt=Je(ht,[["__scopeId","data-v-5a82c655"]]),xt={style:{"vertical-align":"-5px",padding:"0 2px"}},qt=Z({__name:"Move",emits:["onMoved"],setup(re,{expose:A,emit:$}){const f=$,B=ee({show:!1,loading:!1,originPath:"",originName:"",targetPath:"",targetName:"",directoryTreeData:[],currentTreeSelectOption:null}),{show:_,loading:m,originPath:y,originName:i,targetPath:o,targetName:w,directoryTreeData:q,currentTreeSelectOption:r}=te(B),{getIsMobile:L}=X(),{message:E}=de(),{t:n}=Y();async function P(k,v){k&&v&&(i.value=k,y.value=v,_.value=!0,m.value=!0,q.value=await be(),m.value=!1)}function z(k,v,x){switch(x.action){case"select":x.node&&(r.value=x.node);break;case"delete":case"clear":case"unselect":r.value=null;break}}function D(){return H(N,{style:"vertical-align: 0"},{default:()=>H(he)})}async function p(){try{o.value=`${r.value?r.value.key:""}${y.value.includes("\\")?"\\":"/"}${i.value}`,w.value=i.value,await je({path:y.value,newPath:o.value}),E.success(n("file.move.success")),f("onMoved",{origin:{path:y.value,name:i.value},target:{path:o.value,name:w.value}})}catch{}finally{g()}}function u(){_.value=!1,g()}function g(){q.value=[],r.value=null}return A({open:P}),(k,v)=>{const x=ge,I=ae,h=ne,U=le,T=oe,S=ye,C=se,V=ie;return e(L)?(d(),b(V,{key:1,show:e(_),"onUpdate:show":v[1]||(v[1]=F=>O(_)?_.value=F:null),height:"180px",style:{width:"100%",margin:"0 auto","border-radius":"1em 1em 0 0"},placement:"bottom","auto-focus":!1,onAfterLeave:u},{default:t(()=>[l(C,{closable:"","header-style":"border-bottom: none; padding: 16px 12px","body-content-style":"padding: 4px 12px","footer-style":"border-top: none; padding: 16px 24px"},{header:t(()=>[l(U,{style:{gap:"4px"}},{default:t(()=>[l(e(N),{size:26,color:"var(--app-primary-color)"},{default:t(()=>[(d(),b(Q(e(he))))]),_:1}),l(h,{style:{height:"100%","max-width":"190px"}},{tooltip:t(()=>[a("span",null,s(e(n)("file.move.title")),1)]),default:t(()=>[a("span",xt,s(e(n)("file.move.title")),1)]),_:1})]),_:1})]),footer:t(()=>[l(S,{inline:"",wrap:!1,justify:"space-between",style:{gap:"0px",width:"100%"}},{default:t(()=>[l(T,{tertiary:"",focusable:!1,style:{width:"50%","border-radius":"8px","margin-left":"-4px"},onClick:u},{default:t(()=>[c(s(e(n)("common.cancelText")),1)]),_:1}),l(T,{secondary:"",type:"primary",focusable:!1,disabled:!e(r),style:{width:"50%","border-radius":"8px","margin-left":"8px"},onClick:p},{default:t(()=>[c(s(e(n)("common.okText")),1)]),_:1},8,["disabled"])]),_:1})]),default:t(()=>[l(x,{clearable:"",size:"large","show-path":!0,separator:"/","consistent-menu-width":!1,loading:e(m),options:e(q),"on-update:expanded-keys":e(K),"on-update:value":z},null,8,["loading","options","on-update:expanded-keys"])]),_:1})]),_:1},8,["show"])):(d(),b(I,{key:0,show:e(_),"onUpdate:show":v[0]||(v[0]=F=>O(_)?_.value=F:null),preset:"dialog","auto-focus":!1,icon:D,title:e(n)("file.move.title"),"positive-text":e(n)("common.okText"),"positive-button-props":{disabled:!e(r)},"negative-text":e(n)("common.cancelText"),"negative-button-props":{ghost:!1,tertiary:!0},"on-close":u,"on-mask-click":u,onNegativeClick:u,onPositiveClick:p},{default:t(()=>[l(x,{clearable:"","show-path":!0,separator:"/",style:{"margin-top":"4px"},"consistent-menu-width":!1,loading:e(m),options:e(q),"on-update:expanded-keys":e(K),"on-update:value":z},null,8,["loading","options","on-update:expanded-keys"])]),_:1},8,["show","title","positive-text","positive-button-props","negative-text"]))}}}),wt={style:{"vertical-align":"-5px",padding:"0 2px"}},Et=Z({__name:"Rename",emits:["onRenamed"],setup(re,{expose:A,emit:$}){const f=$,B=ee({show:!1,name:"",path:"",renameInput:"",inputInstRef:null}),{show:_,name:m,path:y,renameInput:i,inputInstRef:o}=te(B),{getIsMobile:w}=X(),{message:q}=de(),{t:r}=Y();function L(u,g){u&&(y.value=u,m.value=g||"",_.value=!0,setTimeout(()=>{o.value?.focus()},500))}function E(){return H(N,{style:"vertical-align: 0"},{default:()=>H(xe)})}async function n(){try{await He({path:y.value,name:i.value}),q.success(r("file.rename.success")),f("onRenamed",{origin:{path:y.value,name:m.value},target:{path:y.value.replace(new RegExp(`${m.value}$`),i.value),name:i.value}})}catch{}finally{p()}}function P(u){i.value=u}function z(u){return!["<",">","?","*","/"].some(g=>u.includes(g))}function D(){_.value=!1,p()}function p(){i.value=""}return A({open:L}),(u,g)=>{const k=ke,v=ae,x=ne,I=le,h=oe,U=ye,T=se,S=ie;return e(w)?(d(),b(S,{key:1,show:e(_),"onUpdate:show":g[1]||(g[1]=C=>O(_)?_.value=C:null),height:"180px",style:{width:"100%",margin:"0 auto","border-radius":"1em 1em 0 0"},placement:"bottom","auto-focus":!1,onAfterLeave:D},{default:t(()=>[l(T,{closable:"","header-style":"border-bottom: none; padding: 16px 12px","body-content-style":"padding: 4px 12px","footer-style":"border-top: none; padding: 16px 24px"},{header:t(()=>[l(I,{style:{gap:"4px"}},{default:t(()=>[l(e(N),{size:26,color:"var(--app-primary-color)"},{default:t(()=>[(d(),b(Q(e(xe))))]),_:1}),l(x,{style:{height:"100%","max-width":"190px"}},{tooltip:t(()=>[a("span",null,s(e(r)("file.rename.title")),1)]),default:t(()=>[a("span",wt,s(e(r)("file.rename.title")),1)]),_:1})]),_:1})]),footer:t(()=>[l(U,{inline:"",wrap:!1,justify:"space-between",style:{gap:"0px",width:"100%"}},{default:t(()=>[l(h,{tertiary:"",focusable:!1,style:{width:"50%","border-radius":"8px","margin-left":"-4px"},onClick:D},{default:t(()=>[c(s(e(r)("common.cancelText")),1)]),_:1}),l(h,{secondary:"",type:"primary",focusable:!1,disabled:!e(i),style:{width:"50%","border-radius":"8px","margin-left":"8px"},onClick:n},{default:t(()=>[c(s(e(r)("common.okText")),1)]),_:1},8,["disabled"])]),_:1})]),default:t(()=>[l(k,{ref_key:"inputInstRef",ref:o,clearable:"",size:"large","default-value":e(m),"allow-input":z,onInput:P},null,8,["default-value"])]),_:1})]),_:1},8,["show"])):(d(),b(v,{key:0,show:e(_),"onUpdate:show":g[0]||(g[0]=C=>O(_)?_.value=C:null),preset:"dialog","auto-focus":!1,icon:E,title:e(r)("file.rename.title"),"positive-text":e(r)("common.okText"),"negative-text":e(r)("common.cancelText"),"positive-button-props":{disabled:!e(i)},"negative-button-props":{ghost:!1,tertiary:!0},"on-close":D,"on-mask-click":D,onNegativeClick:D,onPositiveClick:n},{default:t(()=>[l(k,{ref_key:"inputInstRef",ref:o,clearable:"",style:{"margin-top":"4px"},"default-value":e(m),"allow-input":z,onInput:P},null,8,["default-value"])]),_:1},8,["show","title","positive-text","negative-text","positive-button-props"]))}}}),kt={style:{"margin-bottom":"12px"}},zt={style:{"vertical-align":"-5px",padding:"0 2px"}},Ct={style:{"margin-bottom":"12px"}},Ft=Z({__name:"Upload",emits:["onUploaded"],setup(re,{expose:A,emit:$}){const f=$,B=ee({show:!1,loading:!1,uploadDir:"",directoryTreeData:[],currentTreeSelectOption:null}),{show:_,loading:m,uploadDir:y,directoryTreeData:i,currentTreeSelectOption:o}=te(B),{getIsMobile:w}=X(),{message:q}=de(),{t:r}=Y();async function L(p){p&&(o.value=p,y.value=p.key),_.value=!0,m.value=!0,i.value=await be(),m.value=!1}function E(p,u,g){switch(g.action){case"select":g.node&&(o.value=g.node,y.value=g.node.key);break;case"delete":case"clear":case"unselect":o.value=null,y.value="";break}}function n(){return H(N,{style:"vertical-align: 0"},{default:()=>H(we)})}function P({file:p,onFinish:u,onError:g,onProgress:k}){const v=p.name,x=new FormData;x.append("file",p.file),Ge({params:x,path:o.value?.key,onUploadProgress:({progress:I})=>{k({percent:Math.ceil((I||0)*100)})}}).then(()=>{q.success(`${v} ${r("file.upload.success")}`),f("onUploaded",y.value),u()}).catch(I=>{q.error(I.message,{keepAliveOnHover:!0}),g()})}function z(){_.value=!1,D()}function D(){i.value=[],o.value=null,y.value=""}return A({open:L}),(p,u)=>{const g=ge,k=lt,v=Re,x=nt,I=ot,h=at,U=le,T=ae,S=ne,C=ze,V=oe,F=se,G=ie;return e(w)?(d(),b(G,{key:1,show:e(_),"onUpdate:show":u[1]||(u[1]=j=>O(_)?_.value=j:null),height:"100%",placement:"bottom","auto-focus":!1,onAfterLeave:z},{default:t(()=>[l(F,{closable:"","header-style":"padding: 16px 12px","body-content-style":"padding: 4px 12px","footer-style":"padding: 16px 24px"},{header:t(()=>[l(U,{style:{gap:"4px"}},{default:t(()=>[l(e(N),{size:26,color:"var(--app-primary-color)"},{default:t(()=>[(d(),b(Q(e(we))))]),_:1}),l(S,{style:{height:"100%","max-width":"190px"}},{tooltip:t(()=>[a("span",null,s(!e(o)&&!e(y)?e(r)("file.upload.needSelect"):e(r)("file.upload.title")),1)]),default:t(()=>[a("span",zt,s(!e(o)&&!e(y)?e(r)("file.upload.needSelect"):e(r)("file.upload.title")),1)]),_:1})]),_:1})]),footer:t(()=>[l(V,{block:"",strong:"",secondary:"",type:"primary",focusable:!1,onClick:z},{default:t(()=>[c(s(e(r)("component.modal.close")),1)]),_:1})]),default:t(()=>[l(C,{bordered:!1,style:{height:"100%","word-break":"unset"},"content-style":"padding: 0"},{default:t(()=>[l(U,{vertical:""},{default:t(()=>[l(g,{size:"large","default-value":e(o)?.key,clearable:"","show-path":!0,separator:"/",style:{"margin-top":"5px"},placeholder:e(r)("file.upload.selectPlaceholder"),"consistent-menu-width":!1,loading:e(m),options:e(i),"on-update:expanded-keys":e(K),"on-update:value":E},null,8,["default-value","placeholder","loading","options","on-update:expanded-keys"]),l(k,{type:"info",closable:""},{default:t(()=>[c(s(e(r)("file.upload.info")),1)]),_:1}),l(h,{multiple:"","directory-dnd":"",disabled:!e(o)&&!e(y),"custom-request":P},{default:t(()=>[l(I,null,{default:t(()=>[a("div",Ct,[l(e(N),{size:"48",depth:3},{default:t(()=>[l(v)]),_:1})]),l(x,{style:{"font-size":"16px"}},{default:t(()=>[c(s(e(r)("file.upload.draggerText")),1)]),_:1})]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])):(d(),b(T,{key:0,show:e(_),"onUpdate:show":u[0]||(u[0]=j=>O(_)?_.value=j:null),preset:"dialog","auto-focus":!1,"mask-closable":!1,icon:n,title:!e(o)&&!e(y)?e(r)("file.upload.needSelect"):e(r)("file.upload.title"),"on-close":z,"on-mask-click":z},{default:t(()=>[l(U,{vertical:""},{default:t(()=>[l(g,{"default-value":e(o)?.key,clearable:"","show-path":!0,separator:"/",style:{"margin-top":"5px"},placeholder:e(r)("file.upload.selectPlaceholder"),"consistent-menu-width":!1,loading:e(m),options:e(i),"on-update:expanded-keys":e(K),"on-update:value":E},null,8,["default-value","placeholder","loading","options","on-update:expanded-keys"]),l(k,{type:"info",closable:""},{default:t(()=>[c(s(e(r)("file.upload.info")),1)]),_:1}),l(h,{multiple:"","directory-dnd":"",disabled:!e(o)&&!e(y),"custom-request":P},{default:t(()=>[l(I,null,{default:t(()=>[a("div",kt,[l(e(N),{size:"48",depth:3},{default:t(()=>[l(v)]),_:1})]),l(x,{style:{"font-size":"16px"}},{default:t(()=>[c(s(e(r)("file.upload.draggerText")),1)]),_:1})]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1},8,["show","title"]))}}});export{Rt as F,Et as _,Ft as a,Mt as b,qt as c};
